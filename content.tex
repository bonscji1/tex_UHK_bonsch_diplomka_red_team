\section{Úvod}

% TODO WRITER: text

Zde vysvětlit problémovou situaci a otázky, které se budou v bakalářské/diplomové práci řešit.

\section{Cíl práce}

% TODO WRITER: text

Smysl a účel, výzkumné otázky.

%teoretická část
\section{Metodika zpracování}

% TODO WRITER: text

Cíle, hypotézy/ výzkumné otázky, způsob hledání odpovědí na výzkumné otázky včetně metodiky vlastního výzkumu/šetření, literární rešerše.

\section{Úvod do problematiky Cyber-security}
%todo writer clean uvod?
V dnešní době díky rozvoji moderních technologií tráví velká část lidské populace značné množství času interakcemi s těmito tachnologiemi.
Ať už se jedná o Internet, \firstac{IoT}, mobilní bankovnictví nebo sociální sítě, lidé se na technologií stávají čím dál více závislí.
Technologie nám usnadňují všední život, dovolují práci z domova nebo přináší příležitosti, které jen pár let předem neexistovaly.
Tento rozvoj bohužel není jen kladný.
Rozvoj se projevil i hrozbami, kterým populace čelí.
Některé hrozby, jako malware jsou pro lidstvo nové.
Jiné jsou staré jako lidstvo samo a pouze se novým okolnostem přizpůsobily.
Jedním příkladem za všechny je Sociální inženýrství.

\paragraph{}
Hrozbám nečelí jen samotní lidé ale i firmy a dokonce státy.
Státy na celém světě se staly na cybernetickém světe zcela závislé.\cite{LI20218176}
Jakékoli jeho selhání může ohrozit jejich funkčnost a odvázání se od něj je již nemožné.
Existuje nezměrné množství hrozeb.
Je jasné, že v prostředí kde mezi sebou soupeří státy je značné úsilí věnováno jak zabezpečení tak útoku.
Rozdíly mezi cyber-útokem, cyber-zločinem a cyber-válkou jsou ve většině případů rozděleny pouze dle účastníků.\cite{LI20218176}
Způsob útoku či hrozby na zatřídění do předchozích kategorií klade minimální vliv, zohledněn bývá pouze výsledek.


%todo more?



\section{Relevance}
Relevantnost problematiky cyber-bezpečnosti potvrzuje nejen množství akademických textů které zkoumají tuto problematiku, ale také stále větší zájem všeobecné veřejnosti.
Hlavním důvodem je vzrůstající povědomí populace, způsobené medializací útoků sociálního inženýrství nebo ransomware které populaci v poslední době ovlivňovaly.
V době psaní je v popředí například ransomware útok na dětskou nemocnici SickKids.\cite{bleep_sickkids_ransom}
I když Ransomware skupina \textit{LockBit} poskytla nemocnici \textit{decryptor} zdarma a s omluvou, nemění to nic na vážnosti situace.
Je totiž důležité si uvědomit, že takovýto útok nastal.
Byl schopen omezit optimální funkčnost nemocnice zašifrováním důležitých interních systému.
A bohužel není jediným ransomware útokem zaměřeným na zdravotnictví.
Je tedy možné předpokládat, že nastanou i další útoky na nemocnice.
A příští útok nemusí být veden skupinou, která se řídí silným morálním kompasem.
Důležité je na závěr poznamenat, že tento silný morální kompas platí jen na omezení funkčnosti které může vést ke smrti.
Nevztahuje se na méně kritické instituce nebo ani na prodej již získaných zdravotních dat na černém trhu.

\paragraph{}
Je tedy důležité věnovat se i nadále cyber-bezpečnosti.
Jsou hrozby, které jsou dobře prostudované a víme, jak se jim efektivně bránit.
Jsou hrozby, kterým je sice obtížné se bránit, ale jsou omezené rozsahem a tak je obrana uskutečnitelné.
Ale také jsou hrozby, na které obrana zatím neexistuje.
Tyto hrozby je nutné najít a zkoumat, aby bylo možné ochranu vytvořit.

\subsection{Studie trendů Cyber-security}
Dlouhodobě můžeme v rámci Cyber-security rozeznávat několik klíčových zaměření.
Zajímavé jsou změny v prioritách zaměření v ohledu na čas, které můžeme zkoumat na literatuře.
Velké změny lze zaznamenat především před a po pandemii Covidu-19.\cite{KUMAR2022102821}
Jako i u jiných odvětví můžeme dělit celou sféru na 2 části, část akademickou a část veřejnou.
Je jasné, že zaměření těchto dvou částí budou lehce rozdílná, proto je nutné dívat se na ně odděleně i když se v mnoha ohledech překrývají a ovlivňují.
Důvod proč zkoumáme rozdíl před a po Covidu-19 je rapidní navýšení adopce digitálních technologií, které v této době proběhlo.
Ztížené pracovní podmínky vyžadovaly zavádění nových technologií.
To znamená nová bezpečnostní rizika vzniklá nejen z těchto technologií, ale i z přístupu jejich využívání.
Je značný rozdíl v bezpečnosti práce uživatele, nachází-li se v uzavřené síti uvnitř společnosti nebo při připojování na dálku při práci z domova.

\paragraph{Akademická literatura}
V akademické sféře je možné vidět zaměření výzkumu.
Dlouhodobě populárními tématy jsou jsou \textit{cyber risk management, detekce malware} nebo \textit{systémy detekce přístupu}.\cite{KUMAR2022102821}
Tato témata je možné nalézt jak před, tak i po pandemii Covidu-19.
Témata, které byla mnohem více zkoumána před pandemií jsou například využití \textit{Machine learningu}, a to jak pro detekci hrozeb tak hledání nových útočných vektorů.
Také \textit{Blockchain} a \textit{Cryptoměna} jsou témata, která byla před pandemií v oblasti zájmu akademiků mnohem více, nežli po pandemii.\cite{KUMAR2022102821}
Pandemie způsobila velký zvrat v myšlení.
Vedlo to ke zkoumání témat, které bylo nutné okamžitě aplikovat nebo která byla nutné pro budoucí fungování společnosti.
Objevují se zde mnohem více témata zaměřená na \textit{Zdravotnictví, Bankovní sektor} nebo \textit{zranitelnosti dodavatelského řetězce}.\cite{KUMAR2022102821}
Všechna tato témata mají jasný vznik v okolnostech pandemie a jejich zkoumání je prováděno i roky po pandemii samotné.

\paragraph{Všeobecná literatura}
Všeobecná literatura poukazuje na zájmy a zvědavost lidu, proto zde lze odvodit zaměření ale také problémy populace.
Před pandemií byly nejčastější témata zaměřená na \textit{finančně zaměřené cybernetické útoky}.
Ty spolu s běžnými tématy jako \textit{běžné bezpečnostní slabiny, úniky dat} a \textit{malware incidenty} vzbuzovaly největší zájem médií.\cite{KUMAR2022102821}
Pandemie rapidně změnila zájem lidu.
Zaměření se přesunulo na útoky, které se během pandemie značně rozšířily.
Jsou jimi hlavně \textit{Sociální inženýrství} nebo útoky \textit{ransomware}.
Také útoky na \textit{Zdravotnictví} byli mnohem častěji reportovány medii.
Tématem, které je v obou obdobích významné je \textit{malware}.
Jeho primární zaměření se však liší.
Před pandemií byla literatura zaměřena hlavně na ovlivnění správného chodu firem.
Po pandemii se psalo spíše o dopadech na digitální infrastrukturu jako jsou \textit{služby v cloudu}.

\paragraph{Současné trendy}
V současných trendech však dominuje konflikt na Ukrajině.
Je známé, že rusko provádělo přípravu roky před samotným vypuknutím války na ukrajině.
%todo find references to infrastructure attacks
Zajímavé jsou však hlavně markantní změny, které nastaly po samotném vypuknutí konfliktu a jejich vliv na bezpečnost do budoucna.
Možná nejlepším průvodcem těmito změnami je každoroční report vydávaný \firstac{ENISA}\cite{Enisa_thread_landscape}.
Z tohoto reportu jsou snadno rozpoznatelné hlavní trendy, stačí zohlednit celkové rozdělení reportu.
Hlavními zájmy jsou \textit{Ransomware ,Malware, Sociální Inženýrství, Hrozby pro data,	Hrozby pro dostupnost, Dezinformace a Supply-chain útoky}.
~\cntcapfigure{ENISA_prime_threats}{\linewidth}{Primární hrozby identifikované agenturou ENISA}{\cite{Enisa_thread_landscape}}\label{fig:PrimeThreats}

\paragraph{Nejvíce napadené odvětví}
%todo text
~\cntcapfigure{ENISA_targeted_sectors}{\linewidth}{Nejvíce napadené sektory}{\cite{Enisa_thread_landscape}}\label{fig:TargetedSectors}
hello?
~\cntcapfigure{ENISA_targeted_sectors}{\linewidth}{Nejvíce napadené sektory}{\cite{Enisa_thread_landscape}}\label{fig:TargetedSectors}

\section{Nejčastější cyber-útoky}
Asi nejčastějšími útoky jsou dlouhodobě \textit{Denial-of-service}, \textit{Man-in-the-Middle}, \textit{Malware} a samozřejmě \textit{Phishing}\cite{LI20218176}.
Zaznamenané útoky v roce 2022 jsou v souladu s tímto trendem.
Použití \textit{Ransomware} v tomto roze vzrostlo o 41\%, primárně v první polovině roku.
Také čas na odhalení a nápravů úspěšného útoku trval o 49 dní déle, než bylo běžné.
\textit{Phishing} je stále nejčastějším útokem.
Jeho oblíbenost spočívá v jeho efektivitě a relativně nízkých nákladech na provedení.
Počet zaznamenaných útoků téměř každoročně stoupá\cite{moje_bakalarka}.
Není tak divu, že jen za první polovinu roku 2022 byl zaznamenán nárůst v četnosti útoků o 48\%.
V této době bylo nahlášeno přes 11 tisíc útoků které stály cíle 12.3 milionů dolarů.
Je nutné poznamenat, že statistiky se týkají pouze \textit{zaznamenaných} útoků.
Mnoho společností tyto útoky neoznamuje.
Může tomu být z pokusu zachování dobré pověsti.
Horší možnost je že útok nezaznamenali.\cite{securityintelligence_most_common_2022_attacks}

\paragraph{Nové cíle}
Stále více útoků se zaměřuje na \textit{Supply-chain} a \ac{IoT}.
To nemůže být překvapením.
Již v předchozích letech bylo možné zaznamenat neklid mezi ruskem a ukrajinou.
Plné vypuknutí války samozřejmě zahrnuje útoky na infrastrukturu, a to i v online prostředí.
\textit{Supply-chain} je výborným cílem ze dvou důvodů.
Jedna úspěšně napadnutá část dovoluje šířit se po celku a dopad úspěšného útoku je významný.
Výzkumná zpráva od Accenture\cite{accenture_supplu-chain-disruption} odhadla škody způsobené v Eurozóně těmito útoky na 112.7 bilionů euro.
Odhad na období 2022/2023 spojený právě s várkou je 242 bilionů euro a v nejhorším případě až 920 bilionů.
Útoky na \ac{IoT} zařízení stoupají ne díky zvyšující oblíbenesti u útočníku ale čistě díky množství zařízení.
\ac{IoT} zařízení jsou používána všude.
Najdeme je v domácnostech, firmách, továrnách nebo kasínech.
Tato zařízení ulehčují lidský život, bohužel jsou také novým rizikem.
Obzvláště protože jejich zabezpečení není priorita při vývoji těchto zařízení.
Proto jsou cílem útočníku at už jako přídavek do botnetu nebo jako slabý článek obrany samotné.
Zní opravdu špatně když se povede útočníkům ukrást důvěrné informace z kasína pomocí chytrého thermometeru akvária\cite{casino_thermometer}.
O vážnosti situace svědčí i veřejná prohlášení o slabinách, která vydávají přímo státy.
Například pro monitorovací zařízení vozidel MiCODUS MV720 toto prohlášení vydala americká vláda\cite{america_gov_advisories_micodus}.
A není divu, toto zařízení nejen monitoruje vozidlo ale je i schopné odpojit přívod paliva.
Jelikož je toto zařízení nachází hlavně v armádní a policejní technice, je to opravdu velký problém.\cite{securityintelligence_most_common_2022_attacks}

\paragraph{Nejčastější útoky}
Je nutné podívat se nejčastější útoky.
V předchozím textu jsme již na některé narazili, přidáme k nim ještě další.
Například Cisco udává tyto nejčastější metody útoku\cite{cisco_most_common_attack}.
%todo add more sources of most common attacks
%todo add definitions from att&ck
%todo add defending? prevention, good security higiene(segmentation, backups atd)
%todo add enisa

\subsection{Malware}
Tento termín se používá pro škodlivý software.
Zahrnuje známé hrozby jako viry, červy, trojské koně, spyware a ransomware.
Do systému se dostávají pomocí jeho slabin, často díky nepozornosti uživatele.\cite{cisco_most_common_attack}
Malware je důvod, proč si uživatele musí dávat pozor na jaké linky klikají a jaké programy instalují.
Je také nutné dávat si pozor odkud je program stažen.
Stále častěji malware předstírá, že je legitimní software.
Mezi nejznámější napodobované programy patří Skype, Adobe Acrobat, VLC nebo 7zip.\cite{virustotal_report_findings}
Škodlivému software se bohužel nevyhnul ani státní sektor.
Není však jen cílem ale i používán k šíření.
Zkoumání z roku 2022 ukazuje, že je možné najít desítky instancí hostování škodlivého software přímo v doménách spojených se státními institucemi.\cite{virustotal_report_findings_goverment}
Tento problém není specifický pro jeden stát ale je to celosvětový problém, jak je možné vidět na ~\ref{fig:MaliciousGoverments}.
Státní stránky nejsou blokované, naopak k nim existuje implicitní důvěra.
Proto je tento problém opravdu závažný.

~\cntcapfigure{malicious_govs_domains}{\linewidth}{Zneužití státní infrastruktury}{\cite{virustotal_report_findings_goverment}}\label{fig:MaliciousGoverments}
%todo add specific for ransomware as the most common?

\subsection{Phishing}
Podvodné komunikaci, která předstírá že pochází z legitimního zdroje, se říká Phishing\cite{cisco_most_common_attack}.
Nejčastěji se jedná o emailovou komunikaci, existují však i formy přes sms nebo telefonní hovor.
Nejnebezpečnější jsou specializované útoky, zvané whaling a spear-phishing.
Většina útoků se snaží pokrýt velké spektrum populace, většinou omezené pouze záminkou, která je k útoku využita.
Specializované útoky jsou však tvořeny pro jednu specifickou osoby.
Útočník stráví týdny nebo i měsíce zjišťováním informací o cílené osobě a poté vytváří jeden specifický útok, který je v drtivé většině případů úspěšný.
Tato hrozba mívá 2 primární cíle.
Prvním je ověření nebo zisk informací, které lze použít k dalšímu útoku.
Druhým je kompromitace zařízení, například pomocí malware.
Nejčastěji je to pomocí odkazů, které se v podvodném emailu nachází, popřípadě pomocí infikovaných souborů.
Znepokojující je také každoroční nárostu počtu těchto útoků.\cite{moje_bakalarka}

%todo defence ---> education, multifactor auth

\subsection{Man-in-the-middle}
Útoky \textit{Man-in-the-middle} jsou také zvané odposlouchávací útoky.
Útočník se při tomto útoku dostává doprostřed komunikace 2 subjektů.
Hlavním cílem je filtrování, kradení a nahrazování dat proudících v komunikaci.
Mezi nejčastější implementace tohoto útoky patří napodobování veřejné \textit{Wi-Fi}.
Útočník se představuje jako vstupní bod na tuto veřejnou wifi kap posléze odesílá veškerou komunikaci.
Lidé si tak nemusí uvědomit, že útočník existuje a nedávají si tak pozor na svoji činnost na takto odposlouchávané síti.
Další oblíbenou implementací útoku je použití malware.
Ten po nainstalování přesměrovává komunikaci nebo pouze odposlouchává činnost na daném stroji.\cite{cisco_most_common_attack}
%todo more?

\subsection{Denial of service}
Útok zaměřený na kolaps infrastruktury.
\textit{Denial-of-service}, také znám jako \firstac{DoS} útok se snaží vyčerpat zdroje služby množství zasílaných požadavků.
Další možností je ovládnutí nebo alespoň vyřazení z provozu dané služby za pomocí známe zranitelnosti.\cite{cisco_most_common_attack}


Známější a více používaná je však podkategorie tohoto útoky zvaná \firstac{DDoS}.
Hlavní změnou je využívání mnoha zařízení, takzvaného \textit{Botnetu}, která na příkaz zahltí službu množstvím požadavků.
Problematika tohoto útoku spočívá v 2 hlavních bodech.
Při útoku \ac{DoS} je možné příchozí požadavky z jednoho zařízení snadno zablokovat pomocí \textit{blacklistu} daného zařízení.
To však není proveditelné pokud tyto požadavky přichází z tisíců nebo i statisíců zařízení.
S tím souvisí i druhý problém, rozsah celého útoku.
Jedno zařízení jen těžce může konkurovat statisícím v množství požadavků, které je schopné odeslat.
A to i za předpokladu, že je mnohem výkonnější.
%todo more? zdroje?

\subsection{Sql injection}
Tento známý útok využívá špatného nastavení databáze pro provádění za normálních okolností nepovolených operací.
Ze špatně zabezpečeného vyhledávacího boxu je útočných schopný zadáním specificky vypadajícího dotazu získat například výpis celé databáze.
%todo more? zdroje?

\subsection{Zero day exploit}
\textit{Zero day exploit} je slabina na kterou ještě neexistuje patch.
Tato situace může nastat pokud byla slabina nahlášena a ještě ji výrobce systému nestihl opravit.
Mnohem častější je případ, kdy slabinu našel sám útočník.
Ten ji pouze bude chtít využít, rozhodně ne nahlásit.
Tyto slabiny se také snaží získat státní složky zaměřené na špehování.
Nemůže tak být divu, že s těmito slabinami existuje černý trh\cite{world_end_2021} kde se prodávají až za miliony dolarů.
%todo more? zdroje?

\subsection{DNS tunneling}
\textit{DNS tunneling} je možné použít pro legitimní účely, tato práce však zkoumá jeho zneužití.
Není to samotný útok ale podpora útoku.
Je založený na \firstac{DNS}.
Tento protokol je využíván prakticky neustále pro běžné účely a je velmi flexibilní.
To však dovoluje jeho zneužití.
\ac{DNS} je tak často používán, že malé navýšení není poznat.
Mnoho společností ho navíc nekontroluje dostatečně, aby mohlo tento typ útoku možné odhalit.
Útočník v \ac{DNS} requestech a responsech zakódovává vlastní komunikaci za účelem jejího skrytí.
Odchozí komunikace může být použita pro exfiltraci kritických dat nebo přijímání odpovědí od nainstalovaného malware.
příchozí naopak pro posílání příkazů již nainstalovanému malware nebo dokonce stahování dalšího malware.\cite{cisco_most_common_attack, bright_sec_dns_tunneling}
%todo more? zdroje?

% TODO WRITER: text in between?

\section{Testování}
% TODO WRITER: incorporate into text, source enisa
druhy útočníků, bylo by fajn zakomponovat
State-sponsored actors
• Cybercrime actors
• Hacker-for-hire actors
• Hacktivists


Smyslem testování je simulovat útok na infrastrukturu systému.
Vě většině případů to znamená, že se specialista na bezpečnost snaží provádět stejné kroky jako potencionální útočník.
Většina případů však nejsou všechny.
Ideální postup vylučuje nejen nepředvídatelnost útočníka, ale ve výjimečných případech i jeho neschopnost nebo neznalost.
Stejně jako v každém odvětví existují i mezi útočníky sféry kompetence a znalostí.
Existuje mnoho útočníků, kteří se touto činností nejen živí ale je to také jejich vášeň.
Takovýto útočník bude disponovat znalostmi a technikami které nejsou běžné.
Při útoku bude postupovat co možná nejoptimálněji za účelem dosažení výsledků.
Je možné od něj očekávat pozorné zkoumání cíle a vytrvalost, díky které se si cíl zvolí.
Tiše hledá slabiny a proniká do střežených systémů bez povšimnutí.
Ne každý útočník je však takto nebezpečný.
Drtivá většina útoků je prováděna nadšenci nebo útočníky bez obsáhlých znalostí a technik útoku.
Není tak vyloučeno použití snadno detekovatelných `hlučných' technik nebo prostých chyb, kterými na sebe při útoku upozorní.
Nebezpečnost této skupiny v posledních letech vzrostla díky propagaci \firstac{MaaS}\cite{MaaS_ATaT} a \firstac{RaaS}\cite{RaaS_microsoft}.
Existence nástrojů, které dovolují provézt úspěšný útok za pomocí znalostí zkušenějšího útočníka znamená, že ani nezkušené útočníky není možné podceňovat.

\paragraph{}
Testování je jedna z nejlepších možností, jak zlepšit obranyschopnost organizace.
Nemilou samozřejmostí je, že největší změny v ochraně přichází po bezpečnostním incidentu.
Ztráta dat, poškození reputace organizace nebo i finanční postihy jsou výborné motivace nejen pro obránce ale i management organizace věnovat zabezpečení větší úsilí.
Pokud se útočníkovi podařilo prolomit ochranu organizace, jasně to ukazuje na nedostatky, které je nutné napravit.
Bezpečnostní incident tak se kromě mnoha nepříjemností ukazuje, jak dobře byla organizace připravena.
Dle reakce obránců lze zkoumat jejich celková připravenost.
Dobře připravení obránci mohou nebezpečný incident zaznamenat včas a pokud jeho následku nejde zabránit, mohou ho alespoň omezit.
Nepřipravení obránci nemusejí zaznamenat incident ani měsíce po jeho uskutečnění a několikanásobném zopakování.
Organizace a její obránci musí vědět, jak postupovat v případě incidentu.
Testování je simulace bezpečnostního incidentu ale bez většiny jeho negativ.
V závislosti na druhu testování je možné vyzkoušet připravenost obránců, jejich obezřetnost a postupy v případě detekce podazřelé činnosti.
Můžeme testovat robustnost infrastruktury, zda je kvalitně navržena a správně nastavena.
Můžeme testovat zařízení, zda fungují správně a nelze je zneužít.
Můžeme testovat technologie, zda jsou správně využívány popřípadě zda je jejich využívání nutno omezit nebo naopak rozšížit.
Důvodů, proč by mělo být testování součástí zlepšování obranyschopnosti každé organizace je tedy mnoho.
Testování přináší tolik benefitů protože to není prostá reakce na událost ale příprava.
Cílem organizace je zajistit, aby žádný bezpečnostní incident nebylo možné stejně uskutečnit dvakrát.
Čím více je poprvé uskutečněno pomocí testování, tím více jich bude zaznamenáno a zastaveno při skutečném útoku.


\subsection{Rozsah testovní}
Obránci se musí přizpůsobovat a testovat nejen nejběžnější a nejefektivnější útoky ale i krajní scénáře.
Toto přizpůsobování vedlo nejen k různým testovacím metodikám jako \textit{Red teaming} a \textit{Penetration testing} ale také k testování různých scénářů a hlavně rozsahů.
Mezi nejznámější patří \textit{celkový pokus o kompromitaci}, \textit{specifický pokus o kompromitaci} nebo \textit{předpokládaný kompromis}.
Je samozřejmé, že každá tato kategorie obsahuje další podkategorie.
Toto základní rozdělení je však vhodné pro rozpoznání hlavních výzev, složitostí ale i přínosů testování.
Nelze říci, zda je jeden scénář lepší nežli jiné, naopak se doplňují a každý slouží pro určitou situaci.\cite{red_team_oakley_2019}

\paragraph{Celkový pokus o kompromitaci}
Základní situací je \textit{celkový pokus o kompromitaci obrany}.
Lze definovat jako snaha \textit{red teamu} napadnout celou infrastrukturu organizace a pokusit se kompromitovat co možná největší možnou část.
Tato strategie je vhodná pro celkové testování infrastruktury.
Je to nejbližší emulace skutečného útoku.
Testování ve většině případů začíná ze stejného bodu, který je běžně dostupný veřejnosti a tím pádem i útočníkům.
Lze takto testovat správnou segmentaci infrastruktury a resistivity jednotlivých segmentů.
Z velkého a otevřeného rozsahu však vyplývá jen omezená možnost testování do hloubky a zaměření se na specifické části infrastruktury.
\textit{Red team} má pouze omezený čas a prostředky, proto nachází pouze nejčastější slabiny na celém rozsahu testování ale nemá možnost testovat jednotlivé části do hloubky a pro všechny možné hrozby.
Při nesprávném provedení nebo nepochopení cíle tohoto testování může vznikat falešný pocit bezpečnosti, který je pro zabezpečení nebezpečný.
cílem tohoto testu je získat celkové povědomí o ochraně a poté pokračovat s podrobnějším testováním.
%todo add picture?

\paragraph{Specifický pokus o kompromitaci}
Pro testování omezené části infrastruktury se využívá \textit{specifický pokus o kompromitaci}.
Cílem je důkladně otestovat omezenou část infrastruktury bez využití, zásahu nebo omezení částí infrastruktury nacházející se mimo testovaný rozsah.
\textit{Red team} prování podrobné testování, které při korektním provedení vede k nalezení všech slabin.
Výhodou tohoto testování je jeho specificita, je možné testovat určitou oblast infrastruktury nebo jen určité zařízení a to pouze za určitých podmínek.
Příkladem může být testování za použití specifického účtu a s ním spojených pravomocí přístupu.
Další výhoda je možnost testování v běžném provozu.
Krátkodobě vyřadit a testovat část infrastruktury je proveditelnější nežli celkové vyřazení nebo testování za běžného provozu.
V takovém případě je však nutné dávat pozor na správné vybrání rozsahu.
Při důkladném testování není neobvyklé vyřazení testovacího zařízení z běžného provozu nebo jeho zhroucení.
Je tak důležité aby nebyl testován systém, který je kriticky důležitý nebo zrovna používaný.

\paragraph{Předpokládaná kompromitace}
Z názvu je jasné, že toto testování zkoumá, jakou škodu může útočník napáchat při úspěšném útoku.
Počáteční bod tohoto testování je založen na předpokladu úspěšné infiltrace útočníkem.
Přístup k takto identifikovanému bodu je s příslušnými právy poskytnut \textit{red teamu}, který nemusí prolamovat obranu systému.
\textit{Red team} se tak může plně soustředit na zkoumání dopadu úspěšného útoku.
Důvod, proč toto testování není pouze součástí předchozích testování je úspora času a prostředků.
Vhodným příkladem jsou útoky sociálního inženýrství a phishing.
Jsou to často testované útoky díky jejich četnosti, jejich výsledek a prolomení systému však není okamžité.
Může trvat i týdny než uživatel otevře email a nainstaluje malware.\cite{red_team_oakley_2019}
Z důvodu efektivity je tedy lepší předpokládat úspěch útoku a začít testovat z bodu malware nakaženého uživatelského stroje.
Tento typ testování je výhodný pro ukázku dopadu úspěšného útoku.
Častým problémem bezpečnosti je její nedocenění dokud funguje správně.
Ve chvíli kdy nastane problém je však většinou pozdě.
Proto tento typ testování představuje nástroj prokázání důležitosti kvalitní obrany ukázkou důsledků jejího selhání.

\subsection{Metodologie testování}%todo rozepsat se
ještě důležitějším rozhodnutím než jak široce testovat je způsob testování.
možná nejznámější jsou 3 hlavní testovací metodologie: Penetration testing, Red team assessment a Purple team/kontrolní cvičení.
Samozřejmě stejně jako i u rozsahu testování i u těchto metodologií existuje určitý přesah.
Z tohoto důvodu jsou tyto metodologie nepřesně definovány, někdy zaměňovány nebo dokonce považovány za jedinou metodologii s několik různými názvy.
Je proto nutné si je představit v kontextu tohoto textu.
K tomu slouží následující sekce.\cite{securityInteligence_pen_test_red_team_purple_team}

\paragraph{Penetration testing}

Penetration testing, často také zkracován na pen testing, je metodologie s cílem vyhledání co nejvíce možných zranitelností testovaného systému.
Takto důkladné hledání je omezeno pouze na zadaný ,scope', neboli část testovaného systému.
Aby bylo dosaženo co největší efektivity, tento typ testování se svoji činnost nesnaží schovávat, naopak bývá velmi snadné ho detekovat, to však nevadí protože ochrana daného systému by o jeho provádění měla být předem informována.
Tento typ testování může být také z části automatizován, což vede k dalšímu zlepšení efektivnosti na úkor flexibilitě.
V neposlední řadě Penetration testing vyžaduje menší množství zdrojů, ať už v podobě času, lidí či kapitálu, než red team assessment.
\paragraph{}
Ve shrnutí, Penetration testing je hledání co nejvíce zranitelnosti v zadané oblasti bez nutnosti svoji činnost maskovat před ochranou systému.\cite{securityInteligence_pen_test_red_team_purple_team, lootsec_pen_test_vs_red_team, astra_pen_test_vs_red_teaming}


\paragraph{Red team assessment}

Red team assessment, také referovaný jako red teaming, je na rozdíl od pen testingu zaměřen na dosažení zadaných cílů, například získání přístupu k citlivým datům, nebo testování všímavosti ochranných systémů.
To také znamená, že red teaming není omezen oblastí, kterou může v rámci dosažení svého cíle využít.
Obrana systému není ze zřejmých důvodů seznámena s nadcházejícím testováním, proto tato metodika vyžaduje maskování a opatrný přístup, aby pokud možno co nejvíce simulovala skutečný útok.
Výhodou je, že za předpokladu detekce testování bude obrana systému postupovat stejně, jako kdyby se jednalo o skutečnou hrozbu a získáme tak cenná data a zpětnou vazbu pro zlepšení budoucí obrany.
Je jasné, že pro správné provedení red teamingu je potřeba více zdrojů, at už se jedná o čas nebo lidskou práci, než v případě pen testingu.
Také automatizace zde bývá složitá, jedná se totiž o specifickou strategii pro každé testování kde je nutnost reagovat na všechny události vzniklé testováním.\cite{securityInteligence_pen_test_red_team_purple_team, lootsec_pen_test_vs_red_team, astra_pen_test_vs_red_teaming}

\paragraph{}
Ve shrnutí, red team assessment je zaměřen na testování obranyschopnosti cíle s omezeními vznikajícími pouze ze snahy simulovat reálný útok.

%todo use this resource
todo\cite{red_team_oakley_2019}

\paragraph{Purple team/Kontrolní cvičení}
Specifická situace je pak blízká spolupráce útočníků (Red team) a obránců (Blue Team).
Hlavní výhodou tohoto postupu je zpětná vazba mezi útočníky a obránci, kde se dá testovat detekce a následná odezva obránců při testování specifických technik obsažených v MITRE ATT\&CK frameworku.
Další výhodou je seznámení s postupy druhé strany pro tvorbu efektivnějším strategií, at už se jedná o útočníky nebo obránce.
\paragraph{}
Tato cvičení lze uskutečňovat pouze jednou pro vyzkoušení techniky nebo také opakovaně.
Částečná automatizace za použití open-source nástrojů, které mají v této práci vlastní kapitolu, je také jednou z možností.
Výhodou opakovaného testování s automatizací je možnost měřit a porovnávat výsledky za stejných stupních podmínek, což vede k jasně viditelnému zlepšení obranné strategie.\cite{securityInteligence_pen_test_red_team_purple_team,redscan_team_purple_team}

\section{Zavedené nástroje v problematice Testování}
Pro účely testování je dobré využívat stávající technologie.
Je jasné, že každé testování prostředí je jedinečné.
To však neznamená, že není možné těžit z poznatku ostatních obránců.
Vzniklo mnoho nástrojů, jejichž cílem je pomoci nejen s rozeznáváním útoků ale i se samotným testováním.
Asi nejznámějším frameworkem pro kolekci útoků a jejich rozeznávání je MITRE ATT\&CK\cite{mitre_attack_framework}.
Tento framework je open-source, volně dostupný a obsáhlý.
Existuje množství testovacích frameworků, které jsou s MITRE ATT\&CK kompatibilní\cite{csoonline_4_testing_frameworks}.
Příkladem \firstac{RTA}, Caldera nebo Atomic Red.
Tyto frameworky jsou na rozdíl od jiných zdarma a proto se hodí pro začátek testování.
Je dobré si nejdříve vymezit testovanou oblast.
Všechny tyto frameworky budou více probrány a porovnány v následujících kapitolách.

\subsubsection{Mitre ATT\&CK}
% TODO WRITER: text
vysvětlit matici, co nám přináší

\subsubsection{Nástroje}
~\cntcapfigure{cso_mitre_open-source_attck_test_tools}{\linewidth}{Porovnání vybraných nástrojů}{\cite{csoonline_4_testing_frameworks}}\label{fig:OpenSourceTestTools}
% TODO maybe make my own table?

Než je zvolen finální framework pro testování, je nutné si nejdříve připravit co možná nejvíce informací týkajících se testování.
Je jasné, že každý z vybraných frameworků má své silné a slabé stránky.
Jak je vidět v tabulce ~\ref{fig:OpenSourceTestTools}, jedním z ovlivňujících parametrů je například testovaný operační systém.
Kde s atomic red je možné testovat na všech třech hlavních platformách, \ac{RTA} je přizpůsobené pouze pro Windows.
Specializace sama o sobě není špatná vlastnost, naopak většinou bývá přínosem.
Pokud však potřebujeme testovat Linux, je jasné že nemůžeme použít nástroj který toho není schopen.
Žádný z frameworků také nepokrývá celou MITRE ATT\&CK matice.
Proto lze předpokládat použití více nástrojů právě podle okruhu testování, na který je testování zaměřeno.

% TODO WRITER: text
% TODO udělat porovnání vybraných nástrojů(viz článek -> atomic red team, mitre caldera,..)
% TODO vlastní subsekce pro nástroje
% TODO MITRE Caldera, Uber Metta, Atomic Red Team and Endgame RTA

\subsubsection{Red Canary Atomic Red}
Ze všech uváděných příkladů je \textit{Atomic Red} nejvíce přívětivý rychlému začátku .
Pro jeho funkčnost není potřeba nic stahovat ani nastavovat, lze ho jednoduše použít z příkazové řádky\cite{redcanary_atomic_red}.
Další odlišnost je jeho ovládání.
Většina ostatních frameworků je založena na jazyku Python, popřípadě jiném skriptovacím jazyce.
Atomic red je ale spíše sada instrukcí odpovídajících jednotlivým taktikám a technikám Mitre ATT\&CK\@.
Atomic Red tedy není testovací software ale instrukce, jak testovat jednotlivé ATT\&CK taktiky s nástroji, které jsou již pravděpodobně nainstalované v počítači.
Je tedy vhodný pro naučení testovacích postupů ne však pro automatizované testování.
Uživatel při testování vždy musí provézt kroky útoku a sledovat výsledek.
To neznamená, že není možné simulovat složité útoky využívající hned několik technik.
Atomic red dovoluje techniky za sebou řetězit a vytvářet složité sequence útoků.
Výborným příkladem přímo od tvůrců je kod zvaný \textit{Dragons tail}\cite{redcanary_dragons_tail}.
Tento příklad se snaží napodobit chování skutečných útočníků.
Samozřejmě napodobení není dokonalé, ale dobře ukazuje možnosti Atomic Red pro složitější testování.\cite{csoonline_4_testing_frameworks}

\paragraph{Nevýhody}
Hlavní nedokonalostí tohoto přístupu je nutnost vytvářet nebo najít vlastní pomůcky.
Atomic Red je nástroj pro obránce a nechce útočníkům všechny potřebné prostředky pro provedení útoku.
To znamená že pomocné nástroje pro útok si musí obránce připravit sám.
Příkladem může být malware vložený v Microsoft Word dokumentu.
Atomic Red se snaží ukázat, jak malware operuje a jek ho útočníci využívají bez toho, aby ho útočníkům poskytl.
Dalším problémem je generace výstupních reportů.
Na rozdíl od dalších přístupů Atomic Red nevytváří automaticky stručný report o technikách které byly v útoku zkoumány.
Tato funkcionalita je bohužel až v pokročilejším placeném software který Red Canary nabízí.\cite{csoonline_4_testing_frameworks}

%todo add more after using it?
% TODO WRITER: text
%todo co to je, porovnání

\subsubsection{Endgame RTA}
\ac{RTA} v tomto kontextu znamená \firstac{RTA}.
Z představených nástrojů je to stále jednodušší, i když mocný nástroj.
Jediný povinný požadavek je Python verze 2.7, kde pro instalaci stačí rozbalit z gitu stažený repozitář.
Pro plnou funkcionalitu je však doporučeno navíc do podadresáře \textit{bin} vložit Sysinternals Suite a MsXsl.
Stále je to však jednoduchá instalace a celý návod se nachází přímo v git repozitáři.\cite{endgame_rta}

\paragraph{Schopnosti}
\ac{RTA} je složení téměř 50 různých skriptů simulujících útoky.
Bohužel jména těchto skriptů neodpovídají přesně Mitre ATT\&CK, i když jsou na ni založené.
Také zde neexistuje hiperlink navigace jako například u Atomic Red.
Práce se skripty proto vyžaduje více úsilí a určitou známost matice ATT\&CK\@.
Naštěstí jsou přesná označení technik, jako T1107 dohledatelné přímo ve skriptu.
Pro složitější testování je možné spouště všechny skripty najednou nebo vybrat některé pomocí IF statementů v kodu.
Pro základní automatizaci stačí, pro hlubší testovaní je tento nástroj však omezen.\cite{csoonline_4_testing_frameworks}

%todo probably better to use never EQL analytics library? https://eqllib.readthedocs.io/en/latest/
% TODO WRITER: text


\subsubsection{Mitre Caldera}
Caldera je od stejných vývojářů jako ATT\&CK, tedy Mitre.
Lze tak očekávat dobrou integraci a kompatibilitu mezi těmito nástroji.
Na rozdíl od dříve představených nástrojů je Mitre Caldera komparativně náročnější nástroj, což se projevili i v instalaci.
Ani tak však není instalace náročná, a to hlavně díky přípravě tvůrců a dobré dokumentaci\cite{mitre_caldera_docs}.
Framework caldera lze rozdělit na 2 hlavní části.
První je \textit{Jádro systému}.
Tento framework je dostupný v github repozitáři.
Zahrnuje asynchronní server pro řízení příkazů a kontrolu (command-and-control, C2) s REST API a webovým rozhraním.
druhou složkou jsou \textit{pluginy}.
Jsou to rozšíření pro možnosti jádra frameworku poskytující dodatečnou funkcionalitu.
Většinou se jedná o samostatné repozitáře.
Jako příklady je dobré uvézt agenty, hlášení, nebo  techniky z Atomic red team.\cite{mitre_caldera}

\paragraph{Systémové požadavky}
Autoři se snaží podporovat široké spektrum cílových systémů.
Proto existují 2 typy požadavků, povinné a doporučené.
Povinné určují, kde může být vůbec Caldera připravena.
Jádro frameworku může být nainstalováno na operačních systémech Linux nebo MacOS.
Pro fungování je vyžadován Python verze 3.7, 3.8, nebo 3.9 samozřejmě s rozhraním pip3.
Pip3 je vyžadován pro instalaci podpůrných balíčků uvedených v souboru \textit{requirements} přímo v repozitáři Caldery.
Ke správnému ovládání je vyžadován moderní prohlížeč.
Doporučený je Google Chrome.
Doporučené požadavky se týkají vývoje a správného fungování Caldery.
Je doporučený hardware s 8GB+ RAM a 2+ CPU\@.
Dále je pro správnou kompilaci a funkčnost Golang agentů doporučen GoLang 1.17+.
Za zmínku stojí také možnost instalovat a pracovat s Calderou v Docker kontejneru.\cite{mitre_caldera_docs}

\paragraph{Možnosti}
Caldera je oproti dříve představeným nástrojům složitý framework.
To je však více nežli dostatečně vyváženo dobrou dokumentací a hlavně možnostmi, které zkušenému uživateli Caldera nabízí.
Caldera dovoluje nastavení autonomních red-team nebo blue-team operací, a to plnohodnotně včetně závěrečného výpisu a exportování logů.
Existuje také možnost manuálních red-team operací, hlavně v případech nahrazování a testování pomocí vlastních nástrojů.\cite{mitre_caldera_docs}
%todo add more after using it?



\section{Praktická část}

% TODO WRITER: text

\section{Závěry a doporučení}

% TODO WRITER: text

Kritická diskuze nad výsledky, ke kterým autor dospěl (soulad výsledků  literaturou či předpoklady;
výsledky a okolnosti, které zvláště ovlivnily předkládanou práci atd.).
Je vhodné naznačit i případné další
(popř. alternativní) možnosti zkoumání dané problematiky a otevřené problémy pro další studium.

% todo del - this is example and testing section

Vlastní řešení dokládá student zpravidla v několika kapitolách.
Podle charakteru práce musí student uvážit, zda informace
netextové povahy (data, tabulky, obrázky atd.) bude uvádět přímo v textu, nebo je zařadí až za celou práci ve formě příloh, či bude kombinovat oba způsoby.
Více podrobností viz Metodické pokyny pro vypracování bakalářských a diplomových prací (zveřejňované formou výnosů děkana)
a v kurzu MES – Metodologický seminář.

	\subsection{Podkapitola}

	Text podkapitoly.

	Následuje ukázka nějakého seznamu:
	\begin{itemize}
		\item fotografie/avatar,
		\item kategorizační štítky,
		\item popisek.
	\end{itemize}

		\subsubsection{Podpodkapitola}

		Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet ornare diam, id consequat diam.

			\nlparagraph{Paragraf}

			\noindent Ukázka prvního odstavce v paragrafu. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Phasellus sit amet ornare diam, id consequat diam.



			Použití obrázku je jednoduché, zadáme název souboru, šířku, popisek a zdroj:\cntcapfigure{rovnovaha_paka}{8cm}{Páka rovnováhy vzhledu.}
			V případně, že autor je i autor obrázku:

			\cntcapfigure{uhk}{\linewidth}{Toto je UHK.}{[autor]}

			Blok kódu může vypadat takto:

			\begin{codeblock}
				\begin{verbatim}
@Mapper
public interface AccountDao {
  @Select({
    "select *",
    "from " + Account.TABLE_NAME,
    "where email = #{email}"
  })
  Optional<Account> findByEmail(String email);
}
				\end{verbatim}
				\captionsource{Ukázka bloku kódu.}{[autor]}
			\end{codeblock}

			Tabulka zas může vypadat takto:

			\begin{table}[hbt!]
				\captionsource{Ukázková tabulka.}{[autor]}
				\centering
				\begin{tabular}{| l | r | r | r | }
					\hline
					&        psnr &      ssim &      doba  \\
					model &       (db)    &           & gen. (s) \\
					\hline
					bik. int. & 28.3155 & 0.8566 & 0.0322 \\
					nn1000    & 30.1461 & 0.9043 & 0.8109 \\
					nn1001    & 30.0324 & 0.9023 & 0.7486 \\
					nn1002    & \textbf{30.1886} & \textbf{0.9046} & 1.1731 \\
					nn1003    & 30.0390 & 0.9030 & 1.1320 \\
					nn1004    & 24.9772 & 0.7172 & 4.4367 \\
					nn1005    & 26.1629 & 0.8004 & 4.0475 \\
					nn1006    & 27.9129 & 0.8438 & 4.0683 \\
					nn1007    & 27.5834 & 0.8360 & 4.2082 \\
					\hline
				\end{tabular}
			\end{table}

			\newpage

			Další text

\section{Závěry a doporučení}

% TODO WRITER: text

Kritická diskuze nad výsledky, ke kterým autor dospěl (soulad výsledků  literaturou či předpoklady;
výsledky a okolnosti, které zvláště ovlivnily předkládanou práci atd.). Je vhodné naznačit i případné další
(popř. alternativní) možnosti zkoumání dané problematiky a otevřené problémy pro další studium.
