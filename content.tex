% TODO WRITER: text

%todo nutnost
cyber -> kybernetické
ciber -> kybernetické
kiber -> kybernetické

pozor na zkratky -> check

slabiny -> zranitelnosti

pozor na dvojité mezery, kontrola hned jak dopíšu
%todo end





\section{Úvod}\label{sec:uvod}
%todo use different words
V dnešní moderní době jsou kladeny stále větší nároky na
bezpečnost. S rozvojem internetu je přístup k informacím velmi
jednoduchý, na druhou stranu je však jejich ochrana stále složitější.
Není proto překvapením, že se vyvíjí stále novější, lepší a
pokrokovější metody pro ochranu dat.

% TODO WRITER: text

Zde vysvětlit problémovou situaci a otázky, které se budou v bakalářské/diplomové práci řešit.

\section{Cíl práce}\label{sec:cil-prace}
Diplomová práce je zaměřena na zkoumání oblasti kybernetické bezpečnosti.
Cílem práce je obeznámit neznalou osobu s nejzákladnějšími termíny kybernetické bezpečnosti a připravit pro tuto osobu jednoduché a srozumitelné testovací prostředí, které lze použít k testování základní testování taktik a technik MITRE ATT\&CK pro zvýšení bezpečnosti vlastní infrastruktury.

*Teorie:
-relevantnost
-nejčastější kybernetické útoky
-kategorie útočníků
-základní pojmy týkající se testování
-ukázka nástrojů

*Praktická část:
-vytvoření testovacího prostředí
-ukázky testování


% TODO WRITER: text



\section{Metodika zpracování}\label{sec:metodika-zpracovani}
%todo clean
V diplomové práci je možné rozlišit dvě primární metodiky zpracování v souvislosti s teoretiskou a praktickou částí práce.
Teoretické část za zabývá analýzou oblasti kybernetické bezpečnosti.
Za tímto účelem je provedena rešerše současné literatury, zhodnocení získaných dat o kybernetických útocích v posledních letech a také představení základních metodologií testování.

Praktické část diplomové práce využívá zjištěné poznatky z teoretické části pro vytvoření testovacího prostředí, které je posléze využito k testování připravené infrastruktury.
Aby připravovaná infrastruktura co nejvíce odpovídala současným trendům, zakládá se na dotazníkovém šetření a konzultaci s administrátorem skutečné organizační infrastruktury.

V práci jsou testovány dvě hypotézy:

\begin{itemize}
	\item Je možné vytvořit jednoduché testovací prostředí a seznámit s jeho ovládáním neznalého uživatele?
	\item Jsou výsledky získané z testovaného prostředí realistické a mají praktický význam pro zlepšení bezpečnosti infrastruktury?
\end{itemize}



\section{Úvod do problematiky kybernetické bezpečnosti}\label{sec:uvod-do-problematiky-kyberneticke-bezpecnosti}
V dnešní době tráví velká část lidské populace díky rozvoji moderních značné množství času interakcemi s těmito technologiemi.
Ať už se jedná o internet, \firstac{IoT}, mobilní bankovnictví nebo sociální sítě, lidé se na technologii stávají čím dál více závislí.
Technologie nám usnadňují všední život, dovolují práci z domova nebo přináší příležitosti, které i jen pár let zpátky neexistovaly.
Tento rozvoj bohužel nemá jen klady,přinesl zároveň hrozby, kterým nyní populace čelí.
Některé hrozby, jako malware, jsou pro lidstvo nové, jiné jsou staré jako lidstvo samo a pouze se novým okolnostem přizpůsobily.
Jedním příkladem za všechny je Sociální inženýrství.

\paragraph{}
Existuje nezměrné množství hrozeb a nečelí jim jen lidé, ale i firmy a dokonce státy.
Státy na celém světě se staly na kybernetickém světě zcela závislé a jakékoli jeho selhání může ohrozit jejich funkčnost a odpoutání se od něj je již nemožné.\cite{LI20218176}
Je jasné, že prostředí, v němž mezi sebou soupeří státy, je značné úsilí věnováno jak zabezpečení, tak útoku.
Rozdíly mezi kybernetickým útokem, kybernetickým zločinem a kybernetickou válkou jsou ve většině případů založeny pouze na účastnících těchto situací.\cite{LI20218176}
Způsob útoku či hrozby mají jen minimální vliv na zařazení do předchozích kategorií, zohledněn bývá pouze výsledek.

\section{Relevance}\label{sec:relevance}
Relevantnost problematiky kybernetické bezpečnosti potvrzuje nejen množství akademických textů, které zkoumají tuto problematiku, ale také stále větší zájem všeobecné veřejnosti.
Hlavním důvodem je vzrůstající povědomí populace způsobené především medializací útoků sociálního inženýrství nebo ransomwarových kampaní, které populaci v poslední době ovlivňovaly.
V době psaní této práce je v popředí například ransomwarový útok na dětskou nemocnici SickKids, při němž došlo k omezení optimální funkčnosti nemocnice zašifrováním důležitých interních systémů.\cite{bleep_sickkids_ransom}
I když se Ransomwarová skupina \textit{LockBit} omluvila a zdarma poskytla nemocnici \textit{decryptor}, nemění to nic na vážnosti situace – skutečnosti, že takový útok vůbec nastal.
A bohužel není jediným ransomwarovým útokem zaměřeným na zdravotnictví, naopak je možné předpokládat, že v budoucnu nastanou i další útoky.
A příští útok nemusí být veden skupinou, která se řídí silným morálním kompasem.
Důležité je na závěr poznamenat, že tento morální kompas platí jen na omezení funkčnosti které může vést ke smrti.
Nevztahuje se na méně kritické instituce nebo ani na prodej již získaných zdravotních dat na černém trhu.

\paragraph{}
Kybernetická bezpečnost si zaslouží dlouhodobou pozornost společnosti.
Existují hrozby, které jsou dobře prostudované, a víme, jak se jim efektivně bránit.
Existují hrozby, kterým je sice obtížné se bránit, ale jsou omezené rozsahem, a tak je obrana uskutečnitelné.
Ale existují také hrozby, na než obrana zatím neexistuje.
A tyto hrozby je nutné najít a zkoumat, aby bylo možné ochranu vytvořit.

\subsection{Studie trendů kybernetické bezpečnosti}\label{subsec:studie-trendu-kyberneticke-bezpecnosti}
Dlouhodobě můžeme v rámci kybernetické bezpečnosti rozeznávat několik klíčových zaměření.
Zajímavé jsou změny v prioritách zaměření v určitém období, které můžeme zkoumat na literatuře.
Velké změny lze zaznamenat především před a po pandemii Covidu-19.\cite{KUMAR2022102821}
Jako i u jiných odvětví můžeme celou sféru dělit na 2 části, část akademickou a část veřejnou.
Je jasné, že zaměření těchto dvou částí budou lehce rozdílná, proto je nutné dívat se na ně odděleně, třebaže se v mnoha ohledech překrývají a ovlivňují.
Důvodem, proč zkoumáme rozdíl před a po Covidu-19, je rapidní navýšení adopce digitálních technologií, které v této době proběhlo.
Ztížené pracovní podmínky vyžadovaly zavádění nových technologií, to ale zároveň znamená nová bezpečnostní rizika vzniklá nejen z těchto technologií, ale i z přístupu k jejich využívání.
Je značný rozdíl v bezpečnosti práce uživatele, nachází-li se v uzavřené síti uvnitř společnosti nebo při připojování na dálku při práci z domova.

\nlparagraph{Akademická literatura}
V akademické sféře je možné vidět zaměření výzkumu.
Dlouhodobě populárními tématy jsou \textit{cyber risk management, detekce malwaru} nebo \textit{systémy detekce přístupu}.\cite{KUMAR2022102821}
Tato témata je možné nalézt jak před, tak i po pandemii Covidu-19.
Témata, která byla mnohem více zkoumána před pandemií, jsou například využití \textit{Machine learningu}, a to jak pro detekci hrozeb, tak pro hledání nových vektorů útoku, dále \textit{Blockchain} a \textit{Cryptoměny}.\cite{KUMAR2022102821}
Pandemie způsobila velký obrat v myšlení a reorganizaci priorit, což vedlo ke zkoumání témat, která byla nutná aplikovat okamžitě nebo která byla nutná pro budoucí fungování společnosti.
Objevují se zde mnohem více témata zaměřená na \textit{Zdravotnictví, Bankovní sektor} nebo \textit{zranitelnosti dodavatelského řetězce}.\cite{KUMAR2022102821}
Všechna tato témata mají jasný vznik v okolnostech pandemie a jejich zkoumání je prováděno i roky po pandemii samotné.

\nlparagraph{Všeobecná literatura}
Všeobecná literatura poukazuje na zájmy a zvědavost lidu, proto zde lze odvodit zaměření i problémy populace.
Před pandemií byly nejčastější témata zaměřená na \textit{finančně zaměřené kybernetické útoky}.
Ty spolu s běžnými tématy jako \textit{běžné bezpečnostní slabiny, úniky dat} a \textit{malwarové incidenty}, vzbuzovaly největší zájem médií.\cite{KUMAR2022102821}
Pandemie nicméně tato témata rapidně změnila a zájem lidu se postupně začal zaměřovat na útoky, které se během pandemie značně rozšířily.
Největší hrozbou se staly \textit{Sociální inženýrství} nebo \textit{ransomwarocé} útoky, také útoky na \textit{Zdravotnictví} byly mnohem častěji reportovány medii.
Tématem, které je v obou obdobích významné je \textit{malware}, jeho primární zaměření se však liší.
Před pandemií se literatura týkala hlavně ovlivnění správného chodu firem, po pandemii se psalo spíše o dopadech na digitální infrastrukturu, jako jsou \textit{služby v cloudu}.

\nlparagraph{Současné trendy}
V současných trendech však dominuje konflikt na Ukrajině.
Je známé, že Rusko provádělo přípravu roky před samotným vypuknutím války na Ukrajině.
Zdroje poukazují na incidenty již v roce 2014\cite{russian_cyber_usage}, asi nejničivějším je však \textit{NotPetya} z roku 2017\cite{NotPetya}.
Faktem také je, že Rusko se nikdy neostýchalo využívat kybernetické útoky ve svůj prospěch, přestože bylo mnohokrát varováno.
Naopak, jejich používání je často těžkopádné a dalo by se říci i nezodpovědné.
Příkladem je útok mířený na olympijské hry v Tokyu\cite{Tokyo_olympic_attack}.
Není proto překvapením zaznamenání hned několika kybernetických útoků před samotným vypuknutím války\cite{before_ukranian_war_attacks}.
Zajímavé jsou ale markantní změny, které nastaly po samotném vypuknutí konfliktu, a jejich vliv na bezpečnost do budoucna.
Nejlepším průvodcem těmito změnami může být každoroční report vydávaný organizací \firstac{ENISA}\cite{Enisa_thread_landscape}.
Z tohoto reportu jsou snadno rozpoznatelné hlavní trendy, stačí zohlednit celkové rozdělení reportu.
Hlavními zájmy jsou \textit{Ransomware, Malware, Sociální Inženýrství, Hrozby pro data,	Hrozby pro dostupnost, Dezinformace a Supply-chain útoky}.
Samotné hrozby jsou blíže vysvětleny v následujících kapitolách.
Důležité je poukázat na trendy útoku na supply-chain a dezinformace.
Nelze říci, že tyto útoky v předchozích letech neexistovaly, v porovnání se současnou situací to tak ale téměř vypadá.
Jejich závažnost a také množství rapidně vzrostlo.
Není tak divu, že se objevují na listu hlavních hrozeb.
~\clfig{ENISA_prime_threats}{\linewidth}{Primární hrozby identifikované agenturou ENISA}{\cite{Enisa_thread_landscape}}{fig:PrimeThreats}

\nlparagraph{Pegasus spyware}
Speciální zmínku si zaslouží Pegasus spyware a celkově průmysl špehování na zakázku.
Za zrodem Pegasus spywaru stojí Izraelská společnost NSO Group.
Pegasus je využíván pro špehování, překvapivě jsou však cílovým zákazníkem státní instituce a totalitní režimy.
Průmysl špehování na zakázku funguje celosvětově a zaměřuje se stále více na běžné uživatele internetu.
Cílem je nejen zisk informací, ale také manipulace cílů za účelem kompromitování jejich zařízení a účtů.
Většina zprostředkovatelů těchto služeb tvrdí, že služby jsou určené pro sledování zločinců a teroristů.
Tomuto tvrzení však jednoznačně protiřečí výzkum provedený společností \ac{ENISA}.
Více než 30,000 aktivistů za lidská práva, novinářů a právníků po celém světě bylo cílem špehování.
V Evropě byl hlášen vysoký počet případů právě se špionážním softwarem Pegasus od NSO\@.
Monitorováni například politici Španělska a vůdci katalánské nezávislosti.
Navíc sama skupina NSO uvedla, že pět států \firstac{EU} používá jejich špionážní software Pegasus.\cite{Enisa_thread_landscape}

\nlparagraph{Další entity v průmyslu špehování na zakázku}
~\clfig{Facebook_banned_entities}{\linewidth}{Entity identifikované společností Meta}{\cite{pegasus_facebook}}{fig:FacebookThreads}

Facebook je jeden ze zdrojů informací, které se používají pro špehování.
Meta se snaží tuto činnost zredukovat a tak provedla kroky proti 7 různým entitám operujícím špehování na zakázku.
Tyto entity sídlily v Číně, Izraeli, Indii a Severní Makedonii, avšak svoje působení zaměřovaly na lidi ve více než 100 zemích po celém světě.
Obrázek ~\ref{fig:FacebookThreads} ukazuje ovlivněné entity, je zde vidět, na kterých částech řetězce sledovací operace se jednotlivé entity podílely.
Řetězec se skládá z \textit{průzkumu}, \textit{navázání kontaktu} a \textit{využití}.
První fází řetězce sledování, a obvykle nejhůře zaznamenatelnou, je \textit{průzkum} .
Cíl sledování je potichu profilován s využitím softwaru k automatickému sběru dat z celého internetu.
Informace o cíli pochází ze všech dostupných online zdrojů, a to jak volně přístupných, tak i placených nebo nelegálních.
Jsou to data z veřejných webů, jako jsou blogy nebo sociální média, dále data z platforem pro správu znalostí, jako je například Wikipedia.
V neposlední řadě jsou data sbírána ze stránek na \textit{dark webu}, kde lze naleznout výpisy z napadených databází.
Druhá fáze řetězce je \textit{navázání kontaktu}.
Právě zde je největší možnost odhalit sledování a s ním spojený útok, proto je velmi důležitá obezřetnost.
Tato část řetězce je zaměřena na navázání kontaktu s cíli nebo lidmi v jejich blízkosti.
Primárním cílem je vybudovat s cílem důvěru, získat nebo ověřit informace z předchozího kroku a v neposlední řadě připravit cíl na třetí fázi řetězce.
Za tímto účelem jsou zde využívány taktiky sociálního inženýrství.
Používají se fiktivní nebo ukradené identity, byli osloveni lidé prostřednictvím e-mailů, telefonních hovorů, textových zpráv nebo zpráv na sociálních médiích.
\textit{Využitím} je myšlena manipulace cíle.
Tato poslední část řetězce sledování obnáší vytváření phishingových domén, které jsou navržené tak, aby cíle oklamaly.
Domény se snaží získat od cíle informace nebo ho přesvědčit k provedení akce, která není v jeho nejlepším zájmu.
Jako cenné informace jsou brány přihlašovací údaje, například k  e-mailovému účtu, sociálním médiím, finančním službám nebo do  firemní sítě.
Za nežádoucí akce se považuje instalace malwaru, specificky spywaru pro další zisk informací nebo ransomwaru pro peněžitý zisk.\cite{pegasus_facebook}

\nlparagraph{Nejvíce napadené odvětví}
~\clfig{ENISA_targeted_sectors}{\linewidth}{Nejvíce napadené sektory (v období červenec 2021 - červen 2022)}{\cite{Enisa_thread_landscape}}{fig:TargetedSectors}
Z již zmíněného reportu\cite{Enisa_thread_landscape} je možné vyčíst, ve kterých odvětvích je zaznamenáno nejvíce útoků.
Útoky jsou jen zřídka omezené na jeden sektor, ve většině případů i útok zaměřený na specifický sektor přetéká díky provázanosti do ostatních.
Tento pohled na sektory je i přesto důležitý právě kvůli připravenosti jednotlivých sektorů na útoky.
Můžeme očekávat, že sektor zabývající se zprostředkováním digitálních služeb bude mít jinak připravenou ochranu než například vládní sektor.
A to nejen díky primárnímu zaměření sektoru, ale také dopadu úspěšných útoků v minulosti a předvídanému dopadu budoucích útoků.
Na první pohled je z obrázku~\ref{fig:TargetedSectors} vidět, že téměř čtvrtina útoků byla zaznamenána ve vládním sektoru.
Kolem 13\% útoků  míří na sektor zprostředkování digitálních služeb a dalších 13 \% na širokou veřejnost.
Lze očekávat, že množství útoků v těchto sektorech je ovlivněno snadností propagace útoku a v případě veřejnosti navíc ještě celkovým množstvím možných cílů.
Zajímavá je také poznámka v reportu týkající se sektorů bankovnictví a zdravotnictví.
V době sledování byly tyto sektory v rámci celé sledované periody napadány konzistentně.
Zajímavý, hlavně v kontextu války na Ukrajině, je také armádní sektor, kde je zaznamenáno kolem 3 procent útoků.
Tato nízká procentní reprezentace by mohla být způsobena metodologií sestavování tohoto reportu.
Útoky byly zaznamenávány pomocí \firstac{OSINT}, neboli volně dostupných informací\cite{moje_bakalarka}.
Volně dostupné informace mají mnohá omezení.
Je jich velké množství a proto je nutné užitečná data dolovat, nicméně jen málokdy je na první pohled zřejmé, která informace je užitečná.
V tomto případě je však hlavním problémem jejich vznik.
Informace se nazývají volně dostupné, protože je tvůrce volně zpřístupnil široké veřejnosti.
I když společnosti začínají být zodpovědnější v nahlašování útoků, lze stále předpokládat, že některé byly přehlédnuty nebo nenahlášeny.
Ve vojenském sektoru bude limitace informací prioritou.
Proto bude v kombinaci s propagandou obou stran konfliktu a limitací nežádoucích informací velmi obtížné sestavovat jakoukoli přesnou reprezentaci útoků.

\section{Nejčastější kybernetické útoky}\label{sec:nejcastejsi-kyberneticke-utoky}
Mezi nejčastější útoky dlouhodobě patří \textit{denial-of-service}, \textit{man-in-the-middle}, \textit{malware} a samozřejmě \textit{sociální inženýrství}\cite{LI20218176}.
Také zaznamenané útoky v roce 2022 jsou v souladu s tímto trendem.
Jsou to však velmi obecné kategorie, v nichž se specifika velmi liší.
Například pod malware se řadí již zmíněný spyware ale také ransomware, adware, rootkits, etc.
Pouze použití ransomwaru v roce 2022 vzrostlo o 41 \%, primárně v první polovině roku, a také čas na odhalení a nápravu úspěšného útoku trval o 49 dní déle, než bylo běžné.
V kategorii sociální inženýrství je již dlouhodobě nejčastějším útokem phishing.
Jeho oblíbenost spočívá v jeho efektivitě a relativně nízkých nákladech na provedení.
Počet zaznamenaných útoků téměř každoročně stoupá\cite{moje_bakalarka}, není tak divu, že jen za první polovinu roku 2022 byl zaznamenán nárůst v četnosti útoků o 48 \%.
V této době bylo nahlášeno přes 11 tisíc útoků, které stály cíle 12.3 milionů dolarů.
Je nutné poznamenat, že statistiky se týkají pouze \textit{zaznamenaných} útoků.
Mnoho společností tyto útoky veřejně neoznamuje, nejčastěji z důvodu zachování dobré pověsti.
Horší možností může být to, že útok ani nezaznamenali.\cite{securityintelligence_most_common_2022_attacks}

\nlparagraph{Nové cíle}
Stále více útoků se zaměřuje na \textit{Supply-chain} a \ac{IoT}.
To ovšem není překvapující, protože už v předchozích letech bylo možné zaznamenat neklid mezi Ruskem a Ukrajinou.
Přípravy na ozbrojený konflikt samozřejmě zahrnují útoky na infrastrukturu, a to i v online prostředí.
\textit{Supply-chain} je výborným cílem ze dvou důvodů.
Úspěšný útok v jedné části řetězce dovoluje šíření po celku a dopad úspěšného útoku je proto významný.
Výzkumná zpráva od Accenture\cite{accenture_supply-chain-disruption} odhadla škody způsobené v Eurozóně těmito útoky na 112.7 bilionů euro.
Odhad na období 2022/2023 spojený právě s válkou je v nejlepším případě 242 bilionů euro a v nejhorším případě až 920 bilionů.
Také útoky na \ac{IoT} zařízení stoupají.
Není tomu však díky zvýšené oblíbenosti u útočníků nebo lepších metodách útoku, zvýšení plyne téměř čistě ze zvyšujícího množství zařízení.
\ac{IoT} zařízení jsou používána všude, najdeme je v domácnostech, firmách, továrnách nebo kasinech.
Tato zařízení ulehčují lidský život, bohužel jsou také novým rizikem, protože zabezpečení není při vývoji těchto zařízení priorita.
Proto jsou cílem útočníku ať už jako přídavek do botnetu nebo jako slabý článek obrany společnosti.
Zní opravdu špatně, když se povede útočníkům ukrást důvěrné informace z kasina pomocí chytrého thermometeru akvária\cite{casino_thermometer}.
O vážnosti situace svědčí i veřejná prohlášení o zranitelnostech, která vydávají přímo státy.
Například pro monitorovací zařízení vozidel MiCODUS MV720 toto prohlášení vydala americká vláda\cite{america_gov_advisories_micodus}.
A není divu, toto zařízení nejen monitoruje vozidlo, ale je i schopné odpojit přívod paliva.
Jelikož je toto zařízení nachází hlavně v armádní a policejní technice, je to opravdu velký problém.\cite{securityintelligence_most_common_2022_attacks}

\nlparagraph{Zdroje nejčastějších útoků}
Právě z těchto důvodů je nutné podívat se na nejčastější kategorie útoků.
V předchozím textu byly mnohé zmíněny, následuje jejich rozbor do hloubky.
Kategorie byly zvoleny z kombinací několika zdrojů, jako je \ac{ENISA}\cite{Enisa_thread_landscape}, Cisco\cite{cisco_most_common_attack} nebo \firstac{NIST}\cite{nist_risks}.

\subsection{Malware}\label{subsec:malware}
Tento termín se používá pro škodlivý software a zahrnuje známé hrozby jako jsou viry, červy, trojské koně, spyware a ransomware.
Do systému se dostávají díky nepozornosti uživatele nebo s využitím některé z mnoha zranitelností\cite{cisco_most_common_attack}.
Malware je důvod, proč si uživatelé musí dávat pozor, na jaké linky klikají, jaké programy instalují a také odkud programy stahují.
Stále častěji malware předstírá, že je legitimní software.
Mezi nejznámější napodobované programy patří Skype, Adobe Acrobat, VLC nebo 7zip\cite{virustotal_report_findings}.
Škodlivému softwaru se bohužel nevyhnul ani státní sektor, nicméně není jen jeho cílem, ale také prostředkem k šíření.
Zkoumání z roku 2022 ukazuje, že je možné najít desítky instancí hostování škodlivého softwaru přímo v doménách spojených se státními institucemi\cite{virustotal_report_findings_goverment}.
Tento problém není specifický pro jeden stát, ale je to celosvětový problém, jak je možné vidět na obrázku~\ref{fig:MaliciousGoverments}.
Závažnost problému tkví hlavně v přístupu uživatelů.
Státní stránky nejsou blokované, naopak k nim existuje implicitní důvěra a tak běžné uživatele ani nenapadne, že musí být obezřetní.

~\clfig{malicious_govs_domains}{\linewidth}{Zneužití státní infrastruktury}{\cite{virustotal_report_findings_goverment}}{fig:MaliciousGoverments}

\nlparagraph{Obrana a detekce}
Obrana proti malwaru je složitá, nelze totiž ukázat na jednu specifickou chybu, kterou je nutné opravit, aby bylo zabráněno opětovnému nakažení.
Existují však dobré uživatelské praktiky, které riziko infikování stroje malwarem snižují.
Absolutním základem je aktualizování softwaru používaného zařízení.
Mnoho velkých firem aktivně sleduje bezpečnostní incidenty spojené s jejich zařízeními a snaží se své uživatele chránit pomocí bezpečnostních aktualizací.
Pro detekci malwaru je vhodný antivirus, který je schopný v online databází nalézt nejznámější rysy malwarových kampaní a ty pak detekovat v nainstalovaných souborech.
Pokud nastane podezření na malware, je proto dobré pomocí antiviru zkontrolovat soubory.
Podezření by mělo nastat při výrazném zpomalení zařízení, nemožnosti vypínat programy, vyskakování reklam nebo cizích pokusech o přihlášení k osobním účtům.
Aby se předešlo samotné instalaci malwaru, je nutné dbát na bezpečné chování uživatele, hlavně co se týče procházení internetu, instalace programů a klikání na soubory nebo odkazy v e-mailech.
Jak již bylo zmíněno, malware může být zabalen společně s legitimním softwarem, je proto velmi důležité instalovat programy pouze z ověřených, ideálně oficiálních zdrojů.
Pozor na stránky, které napodobují oficiální stránky daného produktu, protože na nich lze malware očekávat s jistotou.
Nutné je také dávat pozor na podezřelé odkazy nebo soubory v emailech, to jsou totiž hlavní vektory útoku, přes které se do zařízení může dostat malware.
V poslední řadě je nutné zmínit \firstac{USB} zařízení.
Pokud je to možné, uživatel by neměl nikdy zapojovat ke svému zařízení neznámé \ac{USB} zařízení.
Ty jsou totiž nejen hrozba v podobě přenašeče malwaru ale dokonce i hrozba samotnému zařízení.
Příkladem takto nebezpečného zařízení je USBKill\cite{usb_kill}.
Toto zařízení na testování hardwaru se při napojení do \ac{USB} portu nabije a pak vypustí svůj náboj zpět do portu.
Novější verze jsou dokonce schopné nabití dopředu, což znamená, že jsou schopná útočit na vypnutá zařízení a obchází všechny známé bezpečnostní protokoly.

\subsubsection{Ransomware}
Za zvláštní zmínku stojí ransomware, jelikož je to velmi nebezpečný a útočníky oblíbený malware.
Jedná se o typ útoku, při němž útočníci přebírají kontrolu nad cílovými daty a požadují výkupné výměnou za obnovení dostupnosti těchto dat nebo zachování jejich tajnosti.
Útočníci tak přímo ohrožují dostupnost, důvěrnost i integritu dat.
Jednoduché ransomwarové útoky data pouze odcizí a vyhrožují vypuštěním, popřípadě uzamknou systém, aby nebylo možné se k datům dostat.
Nejčastější jsou však sofistikované ransomwarové útoky, kde jsou data zašifrována a klič nebo program pro jejich odšifrování je oběti poskytnut až po zaplacení výkupného.
Ve výjimečných případech se stává, že klíč k odšifrování dat není poskytnut nikdy.
Důvodem, proč jsou tyto situace výjimečné, je dlouhodobý pohled ransomwarových skupin na svůj business.
Nejen že neposkytování klíčů by vedlo k neplacení výkupného, ale také to snižuje okruh cílů, které mohou v budoucnu napadnout.
Zašifrovaná data nemá cenu znovu napadat, nikdo za ně nezaplatí druhé výkupné.
Navíc by takové chování mohlo vézt k celkové nechuti společností výkupné platit, protože by neměli jistotu získání dat nazpět.
Tyto myšlenkové pochody útočníků nemůžou být překvapením.
Z interních dokumentů a logů skupiny Conti je zřejmé, že alespoň některé ransomwarové skupiny operují jako běžná společnost\cite{Conti_logs}.
Ve skupině byli zaměstnáni manažeři a náboráři, útočníci pracovali převážně během pracovního týdne a dokonce měli nárok na placenou dovolenou a jiné benefity.
K rozšíření tohoto typu útoku přispívá také koncept \ac{RaaS}, ten dovoluje i nezkušeným útočníkům operovat s velice sofistikovaným softwarem.
Naopak zkušení útočníci nemusí ztrácet čas hledáním cílů, ale soustředí se pouze na vyvíjení ransomwarových nástrojů a technickou podporu.
Z každého úspěšně provedeného útoku jim totiž náleží část peněz.\cite{Enisa_thread_landscape}


\nlparagraph{Monitorování}
~\clfig{ENISA_Ransomware}{\linewidth}{Počet zaznamenaných Ransomware incidentů a velikost ukradených dat ve sledovaném období květen 2021 až červen 2022}{\cite{Enisa_thread_landscape}}{fig:ENISA_Ransomware}
Jak je vidět z obrázku~\ref{fig:ENISA_Ransomware}, ransomwarové útoky byly v době sledování, tedy období od května 2021 do června 2022, časté a dopad na data byl značný.
Sledování těchto útoků je však velmi obtížné, protože pokud dochází pouze k vydírání, firmy mohou výkupné zaplatit a pokusit se zamlčet existenci útoku.
Se stoupajícími částkami výkupného je nicméně tato možnost stále méně validní.
Spíše se firmy obrací na pojištění proti ransomwaru, což však ironicky zvyšuje jejich atraktivnost coby cíle, jelikož je zde jisté zaplacení výkupného.
Dalším problémem monitorování je abstrakce ze strany útočníka.
Pro zmatení vyšetřovatelů nejsou pro ransomwarové skupiny neobvyklé změny názvu spolu s falešným odchodem do důchodu.
Stejná skupina pak pod jiným názvem operuje nadále, může však pozměnit styl provádění útoků nebo používané nástroje.
Díky rivalitě mezi skupinami často dochází ke krádežím zdrojových kódů, což zase znesnadňuje identifikování vztahu s původní skupinou.
Častým vodítkem bývají adresy krypto peněženek, protože výplaty výkupného jsou vždy v kryptoměně, například v Bitcoinu.
To samozřejmě také ztěžuje vystopování a trestní stíhání pachatelů.
Bez nadsázky lze říci, že monitorování ransomwarových skupin je složitější než obrana proti jejich útokům.\cite{Enisa_thread_landscape}

\nlparagraph{Změny v metodice}
Ze zaznamenaných dat jasně vyplývá pokles útoků s počátečním vektorem prostřednictvím \firstac{RDP}, neboli protokolem vzdálené plochy.
Stále je to však druhý nejpoužívanější vektor útoku pro ransomware.
Útočníci stále prolamují slabá \ac{RDP} přihlašovací jména a hesla, zejména pokud není povolena \firstac{MFA}, v překladu vícefaktorová autentizace.
\ac{MFA} je velmi dobrou obranou proti neznalým útočníkům a jednodušším útokům, bohužel není nepřekonatelná.
Nejpoužívanějším vektorem útoku je samozřejmě phishing.
Za povšimnutí stojí nízké náklady na využití těchto metod útoku a jejich značný výnos, což je jeden z hlavních důvodů jejich oblíbenosti mezi útočníky.
Zajímavým trendem jsou změny ve způsobu vydírání společností - klasický ransomwarový útok nejdříve sbírá informace, poté k nim zamezí přístup a posléze vydírá společnost.
Teprve pokud společnost odmítne zaplatit výkupné je útok veřejně oznámen.
Získaná data jsou také prodávána nebo volně dostupná na internetových fórech \textit{dark webu}.
Některé ransomwarové skupiny však začaly používat jiný postup.
Oběti je nabídnuto, aby si data \textit{koupila} dříve, než je zakoupí její konkurenti.
Útočníci také již po provedení útoku změnili vzhled webových stránek oběti, aby na útok upozornili.
Takto prováděný útok vede k veřejnému hanobení oběti a má přímý vliv na vztahy s veřejností a reputaci společnosti.
Dalším znepokojivým trendem je vytváření dedikovaných stránek s daty o napadených přímo na veřejném internetu.
Tento postup zvolil \textit{ALPHV}, také známý jako \textit{BlackCat} ransomware, který operuje jako \ac{RaaS}\cite{ALPHV_blackcat}.
Na tomto webu se nacházely informace o zákaznících i zaměstnancích a ti si tak mohli snadno zkontrolovat, zda byli útokem zasaženi.
Vytvoření takto veřejného repozitáře se stalo novým způsobem, jak donutit třetí strany, aby se identifikovaly.
Lze předpokládat, že postižení zákazníci sami kontaktují majitele webu, aby zaplatili za stažení dat.

\subsubsection{Spyware}
Specifický malware, jehož primárním cílem je shromažďování dat, se nazývá spyware.
Při infikování zařízení sbírá osobní a citlivé informace nejen o uživateli, ale i o samotném zařízení a získané informace spyware posílá nazpět svému tvůrci.
Všechny tyto činnosti samozřejmě provádí spyware bez souhlasu a znalosti uživatele.
Infikování je stejné jako u většiny malwaru - spyware je nevědomky nainstalován uživatelem.
Oblíbenou metodou je přibalení spywaru k jinému programu nebo přes podvodné odkazy a soubory, které spouští instalační skripty.
Data, na která se útočníci zaměřují, jsou převážně přihlašovací údaje, údaje o bankovních účtech a kreditních kartách nebo také chování na internetu.
Všechna tato data lze totiž prodat na černém trhu nebo rovnou využít k další nelegální činnosti.
Spyware je jedním z nejčastěji používaných způsobů kybernetických útoků.
Jeho oblíbenost spočívá v obtížnosti odhalení a při štěstí ve velkém výnosu.\cite{avast_spyware, fortinet_spyware}

\nlparagraph{Typy}
Všechny typy spywaru monitorují uživatelskou aktivitu, rozlišujeme je na další typy podle toho, k čemu takto získaná data využívají a jak data získávají.
Některé spywary pořizují snímky obrazovky, jiné pouze monitorují běžící programy nebo jen vstup z klávesnice.
Vzácně je tento software dokonce schopen zapínat kameru či mikrofon a z nich nahrávat záznamy.
Dalším možným bodem odlišení jednotlivých typů jsou jejich dodatečné vlastnosti.
Některé typy spywaru mají schopnost instalovat další software, což umožňuje útočníkovi rozšířit své kompetence na zařízení, ať už se jedná o pokročilejší sběr dat, manipulaci dat nebo změny nastavení přímo na daném zařízení.
Mezi nejpoužívanější typy patří:
\begin{itemize}
	\item Adware,
	\item Keylogger,
	\item Infostealer,
	\item Red Shell spyware,
	\item Cookies,
	\item Rootkit.
\end{itemize}\cite{avast_spyware, fortinet_spyware}%todo check if i can do this better

\nlparagraph{Adware}
Cílem adwaru je automatické zobrazování reklam bud přímo v prohlížeči nebo přímo v operačním systému zařízení.
V kontextu malwaru se jedná o tajně nainstalovaný software bez souhlasu uživatele.
Problémem je časté využívání k zobrazování invazivních nebo klamavých reklam.\cite{avast_spyware}

\nlparagraph{Keylogger}
Keyloggery jsou specifické programy pro zaznamenávání stisknutí kláves uživatelem, kde po zaznamenání získané informace ukládá v plaintextové nebo zašifrované formě.
Pokud keylogger funguje samostatně, tak tyto data také zasílá útočníkovi, častější je však použití keyloggeru spolu s dalším spyware.
Primárním cílem útočníka jsou běžně zadávané věci, které jsou v softwarem chráněny.
Jedná se například o přístupové údaje, soukromé zprávy a emaily.\cite{avast_spyware}

\nlparagraph{Infostealer}
Infostealer, asi neklasičtější představa spywaru, je útočníky využíván pro shromažďování informací z napadeného zařízení.
Již zmíněné keyloggery je možné uvažovat jako podtřídu tohoto spywaru.
Jiné infostealery jsou například schopné prohledávat data na zařízení pro určité informace, určité soubory nebo typy souborů.
Častým cílem jsou přístupové údaje, emaily, zápisy z komunikačních aplikací nebo internetová historie.
Hlavní rozdíly mezi infostealery jsou však ve způsobu operace.
Některé infostealery existují na zařízení až do jejich objevení nebo zničení zařízení.
Stále zasílají útočníkovi informace, což bývá primárním důvodem jejich objevení.
Zákeřnější typy jsou schopné najít a exfiltrovat všechna žádaná data najednou a posléze vymazat nejen sama sebe, ale také se pokusit po sobě odstranit všechny stopy.
Pokud nejsou detekovány při tomto jednom přenosu, není pak možnost pro uživatele poznat, že byl napaden.\cite{avast_spyware}

\nlparagraph{Red Shell spyware}
Specializovaný spyware na sledování online aktivity hráčů, který je nainstalován právě s danou hrou.
Jeho cílem je sbírat data spojená s danou hrou, která zasílá vývojáři.
Původní záměr tvůrců je využít takto získaná data pro vývoj lepších her a pomáhat společnostem dělat lepší marketingová rozhodnutí.
Hlavním problémem je však instalace tohoto softwaru bez vědomí uživatelů a jejich výslovného souhlasu.\cite{avast_spyware}

\nlparagraph{Cookies}
Cookies původně vznikly jako užitečná pomůcka, například pro přihlášení do oblíbených webových stránek uživatele nebo zachování instance v e-shopu.
Jsou také využívány pro zobrazování reklam spojených se zájmem uživatele, kterého sledují.
Jak již bylo naznačeno, problém je ve sledování online chování uživatele na internetu.
To cookies plně kvalifikuje jako spyware, který sleduje nejen historii prohlížení, ale zaznamenává i pokusy o přihlášení.
Útočník s dostatečnými znalostmi a vybavením je tak schopen zpětně obnovit přihlášenou instanci.
Není proto divu, že o cookies se již delší dobu zajímá legislativa a hlavní internetové prohlížeče jejich činnost již v základu omezují nebo dokonce kompletně zakazují.\cite{avast_spyware}

\nlparagraph{Rootkit}
Možná nejnebezpečnějším typem spyware je Rootkit, jenž umožňuje útočníkovi infiltrovat zařízení a získat přístup na velmi hluboké úrovni.
Rootkit je proto velmi obtížné odhalit.
Díky hlubokému přístupu má útočník značnou kontrolu nad zařízením, kterou většinou využije k instalaci a skrytí dalšího malwaru.
Při prvotním nakažení využívá rootkit pro získání přístupu nejčastěji bezpečnostní zranitelnosti v samotném systému zařízení nebo administrátorské přístupy.
Jeho prvotní kroky jsou však detekovatelné dobrým antivirovým softwarem.\cite{avast_spyware}

\nlparagraph{Dopad}
Jedním z nejčastějších problémů způsobených spywarem je krádež dat.
Všechna data mají pro útočníky cenu, některá jsou však vyhledávaná více nežli jiná.
Útočník se například může snažit sestavit falešnou identitu, kterou pak sám použije k další trestné činnosti nebo ji prodá na černém trhu.
Také přístupové údaje k účtům mohou být cenná data, vzácné účty se na černém trhu prodávají i za stovky dolarů.
Dalším příkladem cenných dat jsou přístupová práva, která může útočník použít k většímu kybernetickému útoku.
Vedlejším efektem spywaru jsou problémy s přístupem k internetu nebo problémy na interní síti, které vznikají právě kvůli zasílání získaných dat tvůrci spywaru.
Dalším ukazatelem je zpomalení zařízení, jelikož v závislosti na sofistikovanosti spywaru běžícího na pozadí bude zařízení ovlivněno.
V horších případech může spyware zařízení dokonce nevratně poškodit.
To se stává, pokud je spyware špatně navržen nebo nezáleží na dlouhodobém sledování, ale jde pouze o krátkodobou extrakci dat.\cite{avast_spyware, fortinet_spyware}

\nlparagraph{Pegasus spyware}
Jak již bylo zmíněno, spyware je také používán pro špehování na zakázku.
Již zmíněný Pegasus spyware spadá právě do této kategorie a je to výborný příklad.
Také více jak 30,000 aktivistů za lidská práva, novinářů a právníků po celém světě bylo cílem špehování.
Jeho použití ve státech \ac{EU} potvrdil i samotný tvůrce NSO\@.
Pegasus je velmi sofistikovaný spyware, o jeho schopnostech svědčí fakt, že společnost NSO musí získat povolení od izraelského ministerstva obrany předtím, než může být nástroj licencován pro jakéhokoli klienta.
V minulosti u něj výzkumníci pozorovali použití hned několika \textit{zero-day} slabin zřetězených za sebou k získání kontroly nad celým zařízením.
Pegasus poté zapnul mikrofon, kameru, četl zprávy, poslouchal hovory a sledoval polohu zařízení.
Všechna tato data posléze zasílal na NSO servery, kde k nim měli přístup zadavatelé špehování.
Při pohledu na oznámené případy používání Pegasus spywaru se často objevuje velmi nepříjemný společný motiv.
Proti cílené oběti dochází znepokojivě často k nějaké fyzické akci.
Existují případy, které vedly k uvěznění, fyzickým hrozbám, útokům a zastrašování.
Nejhorším případem je však vražda.
Jamal Khashoggi byl novinář ze Saúdské Arábie a původně blízký přítel královské rodiny.
Po jmenování Mohameda bin Salmána korunním princem byl však nucen uprchnout ze země, začal proto velmi otevřeně mluvit o represi v Saúdské Arábii.
V říjnu 2018 byl v Turecku nalákán do budovy saúdského konzulátu kvůli zřízení dokumentů pro bezpečný návrat do Saúdské Arábie.
Z budovy však nikdy nevyšel, byl uškrcen a rozčtvrcen.
Zkoumání odhalilo, že NSO nainstalovalo Pegasus na telefon jeho manželky Hanan Elatr jen několik měsíců před jeho smrtí\cite{khashoggi_wife_pegasus}.
Mezi potencionálními cíli instalace Pegasus spyware bylo nalezeno taká číslo telefonu jeho snoubenky, lze předpokládat, že cílem sledování byl i sám Jamal Khashoggi.
Při zohlednění těchto skutečností je použití Pegasus spyware zcela neetické.\cite{darknet_100_NSO,Enisa_thread_landscape}

\subsection{Sociální inženýrství}\label{subsec:socialni-inzenyrstvi}
Sociálního inženýrství je možné definovat takto:
Jedná so o útok, kdy se útočník snaží přimět cíl útoku, aby provedl akce, které nejsou v jeho nejlepším zájmu\cite{moje_bakalarka}.
Příkladem akcí může být instalace malwaru, vydání informací nebo třeba jen povolení vstupu do budovy nebo areálu.
V době psaní tohoto textu je sociální inženýrství jedním z nejpoužívanějších útoků.
Zaměření tohoto útoku na lidský faktor znamená, že obrana je často obtížně proveditelná.
Rutinně tomuto typu útoku propadají specialisté na bezpečnost nebo bezpečnostní výzkumníci.
Za efektivitou tohoto útoku stojí využívání faktů z psychologie, sociologie a studia interakce lidí s technologiemi.
Výsledkem je používaní stejných manipulačních technik, které lze pozorovat v mnoha dalších odvětvích, jako je například marketing.
Využívá nejen legitimní chyby lidského myšlení, jako například bias, ale také lidské zvyky a charakter.
Například otevírání dveří člověku, který nese těžké věci.
To je pro většinu lidí slušnost, avšak i to je jeden ze způsobů, jak může útočník překonat ochranu budovy.
Dveře zabezpečené čtečkou karet nejsou překážkou, pokud vám je legitimní pracovník pomůže otevřít.
Velká část sociálního inženýrství je postavena na představení věrohodné záminky.
To je možné zaznamenat v mnoha podobách, ať už se jedná o podvodný e-mail, v němž útočník předstírá, že je vaší bankou, nebo podvodný telefonát, kde útočník přesvědčí nápomocného operátora, aby mu pomohl převést \textit{ztracené} číslo na novou \ac{SIM} kartu.
V zámince však spočívá také nejlepší obrana, jelikož malé detaily jsou to, co nejčastěji odhalí útok sociálního inženýrství.
V již zmíněném emailu od banky je v adrese například \textbf{M0NETA(s nulou místo velkého O)} nebo při hovoru s operátorem není daný člověk schopen odpovědět na základní otázky, které se například týkají místa nebo roku narození.
S tím však souvisí další další bod ochrany, omezení veřejně dostupných informací.
O naprosto každém člověku existují veřejně dostupné informace, rozhoduje však to, jak těžké je tyto informace získat.
Jedním z nejhorších provinění jsou veřejné profily na sociálních sítích, dvojnásob pokud daná osoba vykazuje špatnou komunikační hygienu.
Pokud na Twitter cíl napíše, že jeho banka stojí za nic a zmíní přesné jméno banky, útočník ví, které jméno banky má použít a nemusí posílat emaily náhodně.
Pokud na veřejném Facebookovém profilu má cíl zadané datum narození, zná ho automaticky i útočník.
V nepříjemném místě proto stojí pracovní sociální sítě jako LinkedIn, kde kvůli pracovním příležitostem je žádoucí zadávat mnoho identifikačních údajů, je však možné, že je zneužije útočník.\cite{moje_bakalarka}


\nlparagraph{Trendy}
Report od společnosti \ac{ENISA} poukazuje na fakt, že ve zhruba 82 \% závažných bezpečnostních incidentů figuruje lidský faktor a minimálně 60 \% incidentů v Evropě, na Středním východě a v Africe zahrnuje využití sociálního inženýrství.
Takto velká čísla spočívá v oblíbenosti tohoto typu útoků.
Výhod pro útočníka je totiž mnoho.
V rámci většiny typů útoků není útočník ovlivněn lokací, jeho počáteční náklady bývají minimální, a přesto je výnosnost těchto útoků značná.
Navíc ačkoli jsou prováděny kurzy a semináře na zvýšení povědomí o těchto útocích, jejich účinnost bývá smíšená.
Také skupiny provádějící ransomware se silně spoléhají na prvotní přístup pomocí sociálního inženýrství.
Nemůže proto být divu, že už jen samotný přístup je prodejný a jsou útočníci, kteří se na něj specializují a další kroky operací nechávají na jiných skupinách.
Velmi často napadanými cíli jsou finanční instituce, které útočníci velmi rádi napodobují.
Útoky jsou ve formě platebních podvodů, jejichž počet i sofistikovanost rok od roku narůstá.
Dalšími často napadanými sektory jsou zdravotnický nebo technologický sektor.
Není proto divu, že náklady spojené specificky s phishingem byly v roce 2021 v porovnání s rokem 2015 více než trojnásobné.
Časově i peněžně nejnáročnější jsou úkony spojené s vyčištěním, opravou a forenzní analýzou napadených systémů.
V poslední době byly také zaznamenány dlouhodobé podvody zaměřené na kybernetickou špionáž, převážně íránskými skupinami.
Útočníci se vydávají například za vědce, kteří zvou své kolegy a novináře na falešnou konferenci.
Pozvánky na tuto konferenci vedly na  webové stránky zaměřené na krádež přihlašovacích údajů.
Dalším možným příkladem je vydávání se za atraktivní ženu na sociálních médiích.
Cílem je buďto z cílů postupně extrahovat informace nebo po dlouhodobějším kontaktu a získání důvěry zaslat škodlivé dokumenty, po jejichž otevření je kompromitováno zařízení oběti útoku.
Bohužel tyto kampaně bývají velmi úspěšné, a tak je téměř jisté jejich využití i v budoucnu.\cite{Enisa_thread_landscape}

\nlparagraph{Typy útoků}
Je možné rozlišovat několik hlavních kategorií sociálního inženýrství.
Je jasné, že kategorie jsou různě rozsáhlé a obsahují vlastní pod-kategorie, pro pochopení je však vhodné jednodušší roztřídění.
Hlavní kategorie jsou představeny v tomto seznamu:
\begin{itemize}
	\item Phishing - podvodné e-maily,
	\item Vishing - podvodné telefonáty,
	\item SMSing - podvodné \ac{SMS},
	\item Personální útok - útočník osobně napadá lokaci.
\end{itemize}\cite{Enisa_thread_landscape, moje_bakalarka}%todo check


\subsubsection{Phishing}
Phishing jsou podvodné e-maily, kde největší roli hraje zvolená záminka.
Nejčastěji je cílem nasměrovat cíl na podvodné stránky pro krádež nebo ověření informací, druhým nejčastějším cílem je získat prvotní přístup do uzavřeného systému.
Zajímavé informace pro útočníka jsou například přihlašovací údaje, které se pokusí zjistit vytvořením kopie přihlašovací stránky banky a na tuto stránku zašle cíli emailem odkaz.
V získání přístupu naopak často figurují infikované soubory.
Phishing existuje v mnoha podobách.
Velmi známé jsou emaily typu \textit{Nigerijský princ}, které fungují na zasílání velkého počtu emailů a přirozené filtraci v podobě odpovědí.
Genius tohoto útoku je v tom, že na emaily s takto jasným podvodem budou odpovídat pouze lidé, kteří jsou náchylní k podlehnutí danému podvodu.
Hlavní nebezpečí phishingu však tkví ve specializovaných útocích, zaměřených na jednu určitou osobu.
Útočník stráví týdny nebo i měsíce zjišťováním informací o cílené osobě a poté vytváří jeden specifický útok, který je v drtivé většině případů úspěšný.
Tato podkategorie má název \textit{spear-phishing}.
Ještě specializovanější podkategorií je \textit{whaling}, kdy je útok zaměřen na jednu vysoce postavenou osobu ve společnosti, jako je například vedoucí oddělení nebo prezident organizace.
Velmi znepokojující je každoroční nárůst počtu těchto útoků.\cite{moje_bakalarka}

\nlparagraph{PhaaS}
Jedním z důvodů zvýšení sofistikovanosti útoků a jejich rozšíření je \firstac{PhaaS}
Útočníci stále častěji využívají již připravené materiály nabízené phishingovými sadami místo tvorby vlastních.
Využití těchto sad mívá jen krátkou životnost, většina dokonce není využívána déle jak jeden den.
Výhodou však bývají perfektní lokalizace pro útok a základní informace pro tvorbu obsahu nerozeznatelného od legitimního.
Dříve bylo možné poznat phishingový email pomocí špatné gramatiky, dnes už tomu tak není.
Zajímavým úskalím je však šance podvodu.
Některé sady obsahují \textit{dodatečnou} funkcionalitu, která například odesílá získané přihlašovací údaje nejen útočníkům ale i vlastníkům phishingové sady.
To pro oběti útoku znamená, že odcizené informace se šíří rychleji a nikdo nad nimi nemá úplnou kontrolu.\cite{Enisa_thread_landscape}


\subsubsection{Vishing}
Forma sociálního inženýrství zaměřená na podvodné telefonáty se nazývá vishing.
Hlavní rozdíl oproti již představenému phishingu je silná zpětná vazba, kterou má útočník k dispozici během hovoru.
Vishing tak klade mnohem větší důraz na improvizaci a komunikační schopnosti útočníka.
Útok, který nebyl tak dobře připraven, je možné zachránit dobrým využitím nově získaných informací.
Je to také mnohem rychlejší a interaktivnější forma sociálního inženýrství.
Při zaslání phishingového e-mailu můžeme čekat dny nebo i týdny na zjištění úspěšnosti útoku, při vishingu je to otázka minut.
Všechny okolnosti však nejsou jen ve prospěch útočníka.
Rychlost a komunikace také znamená, že náhodná interakce může zkazit výborně připravený útok.
Je jasné, že v komunikaci po telefonu nelze poslat škodlivý link.
Proto je primárním cílem útočníka zisk nebo ověření informací.
Jako nový trend se ukazují podvody s bankovními účty, kdy útočník přesvědčí oběť, aby převedla peníze na \textit{bezpečný} účet.
Princip je snadný, útočník se vydává za policistu nebo zaměstnance finanční instituce a obeznámí oběť o faktu, že jejich běžný účet je napaden a mohli by tak o své peníze přijít.
\textit{Bezpečný} účet je však pod kontrolou útočníka, a tak jedním převodem některé oběti za pár minut ztratili celoživotní úspory.
Report společnosti \ac{ENISA} jasně ukazuje, že ve sledovaném období (1. čtvrtletí 2021 až 1. čtvrtletí 2022) se počet případů vishingu zvýšil o více jak 550 \%.
Je nepochybné, že tento trend bude nadále pokračovat díky vzrůstající oblíbenosti u útočníků.\cite{Enisa_thread_landscape, moje_bakalarka}

\subsubsection{SMShing}
SMShing je verze sociálního inženýrství prováděná přes \ac{SMS} zprávy.
Forma je velmi podobná phishingu, liší se však v přístupu lidí k \ac{SMS}.
Příchozí email oběť vyřizuje v prostředí, kde má čas se mu věnovat a dávat si pozor na podezřelé detaily.
\ac{SMS} je však vyřizována většinou hned při jejím příchodu, obzvláště pokud vypadá jako krize.
Příkladem může být kampaň FluBot, jejímž cílem jsou Android zařízení.
Oběť nejprve obdrží \ac{SMS} zprávu, která se vydává za doručovatelské společnosti nebo falešný software.
Cílem zprávy je přimět uživatele, aby nainstaloval podvodnou aplikaci a dodal jí oprávnění.
Podvodná aplikace je pak schopna monitorovat seznam kontaktů, uložená nebo zadávaná čísla kreditních karet, přihlašovací údaje do internetového bankovnictví nebo zachytává \ac{SMS} a v nich přicházející jednorázová hesla.
FluBot se navíc sám šíří z napadeného zařízení právě zasíláním zpráv na záznamy v seznamu kontaktů.\cite{Enisa_thread_landscape, moje_bakalarka}

\subsubsection{Personální útok}
Personální útoky jsou speciální kategorií útoků sociálního inženýrství, kdy se útočník snaží fyzicky dostat k citlivým datům společnosti.
Tento typ útoku je v porovnání s ostatními velmi vzácný, většinou se jedná o předem domluvené testovací akce.
Důvod, proč tento útok stojí za zmínku, je jeho efektivnost.
V dnešní době jsou servery velmi dobře chráněné proti přístupu z internetu, co když ale někdo přijde a zapojí do něj \ac{USB} flash disk?
Je jasné, že tento typ útoku je pro útočníka velmi nebezpečný a náročný, vyžaduje schopnosti, které nejsou standardní, a dokonce i specializované nástroje.
Jejich efektivitu však nelze popřít a jsou mnohdy opomíjeny jako možný vektor útoku.\cite{moje_bakalarka}


\subsection{Threat against data}\label{subsec:threat-against-data}
Tato sekce se zabývá útoky, které primárně ohrožují integritu a bezpečí dat.
Každá společnost v dnešní době vytváří, shromažďuje a zpracovává ohromné množství dat.
To vedlo k rozvoji správy a analýzy dat, kde lepší techniky a postupy vedou k rychlejším procesům, lepšímu řízení zákaznických vztahů a nižším provozním nákladům.
Nemalá závislost také existuje mezi modely strojového učení nebo umělé inteligence, které jsou přímo závislé na správných vstupních datech.
Je proto dobré uvědomovat si hrozby, které cílí na zdroje dat s cílem získat k nim neoprávněný přístup.
Poté můžeme rozlišovat dva hlavní cíle, které vysvětlují chování útočníků při zisku přístupu k datům.
Prvním cílem jsou úniky a krádeže dat, kdy dochází ke zveřejnění nebo ztrátě citlivých informací.
Do této kategorie spadá průmyslová špionáž ale také ransomwarové útoky.
Druhým je manipulace, aby se zasáhlo do chování systému závislého na datech.
Příkladem je šíření dezinformace nebo takzvané \textit{otravování dat\textbf{[Data poisoning]}}, kde účelná manipulace dat znehodnotí výsledky umělé inteligence nebo strojového učení.
Je dobré připomenout, že do této sekce spadají i chybné modifikace dat a neúmyslné úniky informací.
To je právě rozlišení mezi porušením bezpečnosti dat (vždy útok) a únikem dat (neúmyslná chyba).
Samozřejmě je v mnoha případech těžké nastavit přesnou hranici.
Příkladem může být chybná konfigurace bezpečnosti serveru, která vedla ke krádeži dat útočníkem.
Z reportu od společnosti \ac{ENISA} je vidět, že zhruba 80 \% útoků s cílem kompromitovat data pochází z vnějšku cílové organizace, zatímco zhruba 20 \% vzniká přímo uvnitř organizace.
Motivací pro tyto útoky je stále převážně finanční zisk (asi 90 \% útoků) a špionáž (méně než 10 \%).\cite{Enisa_thread_landscape}

\subsubsection{Krádež identity}
V důsledku nárůstu úniků dat jsou osobní a citlivá data snadno dostupná útočníkům na \textit{dark webu}.
Nemůže tak být překvapením kaskádový efekt, který tato skutečnost měla na krádeže identity.
Krádež identity znamená, že útočníci používají odcizená osobní údaje k tomu, aby se vydávali za uživatele, nejčastěji s cílem provedení bankovního podvodu.
Za zmínku stojí skutečnost, že více jak polovina útoků zaměřených na supply-chain v roce 2021 měla jako koncový cíl právě osobní údaje o uživatelích.

\subsubsection{Otravování dat [Data poisoning]}
Důvěryhodná data jsou nejdůležitějším předpokladem pro implementaci bezpečných autonomních a adaptivních systémů.
Možná nejvíce zasaženými kategoriemi jsou tvorba umělé inteligence a strojové učení.
I malá chyba v prvotních učících datech má velkou šanci absolutně zničit celý systém.
S možnostmi zpracování dat však narůstá také možnost data cíleně měnit.
Dříve byl televizní přenos nebo video téměř nepopíratelný důkaz událostí, dnes pomocí deepfake možné vytvořit cokoli.
V době psaní tohoto textu jsou například velmi oblíbená deepfake videa prezidentů USA, kteří v nich hrají počítačové hry.
To se nikdy nestalo, proto je použití deepfake očividné a vtipné.
Co když ale útočník použije deepfake hlasového hovoru pro podvodný bankovní převod ve výši téměř 35 milionů?
Je nutné se připravit na budoucnost, kde je stále obtížnější rozpoznat fikci od skutečnosti.\cite{Enisa_thread_landscape}

\subsubsection{SQL injection}
Možná nejznámějším příkladem lidské chyby je útok \firstac{SQL} injection.
Tento známý útok využívá špatného nastavení databáze pro provádění za normálních okolností nepovolených operací.
Pokud útočník nalezne špatně zabezpečený vstup, například vyhledávací box, může do databáze zadávat vlastní příkazy.
To je možné pomocí řetězení příkazů, kdy útočník vytvoří specifický řetězec, který mu dovolí vyvolat nejen očekávané chování ale i další chování, které je na původní chování přidané.
Nejčastěji takto útočník získává výpis celé databáze.\cite{cisco_most_common_attack}


\subsection{Threat against availability}\label{subsec:threat-against-availability}
Útoky ohrožující dostupnost dat a systémů jsou používané již více jak 20 let a stále hrají významnou roli v repertoáru útočníků.
Je samozřejmé, že přesné postupy byly během let vyvíjeny, ale základní myšlenka je stále stejná, zajistit, aby uživatelé nemohli získat přístup k datům nebo službám.
Tohp může být dosaženo vyčerpáním služby a jejích zdrojů nebo zahlcením komponenty síťové infrastruktury.
Zajímavé je, že tento typ útoku lze provést i nechtěně.
Když známá osoba například náhodně zmíní malý internetový obchod, velké množství fanoušků může svým přístupem vyřadit webové stránky obchodu z provozu, není to však zcela běžné.
Ve většině příkladů je tento typ útoku využíván cíleně a s drtivou efektivitou.
Dokonce se o těchto typech útoků mluví jako o pátém rozměru války, po bojích ve vzduchu, na moři, na souši a dokonce i ve vesmíru.
Většinou se jedná o útoky typu \firstac{DoS}, \firstac{DDoS} nebo \firstac{RDoS}.
Znepokojivá je současná situace právě ve spojení s válkou na Ukrajině.
Hrozby a úrovně vydírání se celkově zvýšily a bohužel stále více útoků je vedeno státem podporovanými skupinami.
Nepříjemné je také zaměření útočníků na \ac{IoT}, kde mají senzory a zařízení často nedostatečnou ochranu.
Atraktivní jsou tyto cíle pro zisk informací nebo jako část botnetu.
Jednou z příčin slabého zabezpečení jsou velmi často slabé přihlašovací údaje, například \textbf{admin} (uživatelské jméno) a \textbf{1234} (heslo), které uživatelé využívají.
Také aktualizace jsou mnohdy problém, například botnet Mozi stále k šíření využívá zranitelností objevených před osmi lety a je odhadováno, že úspěšně napadl až stovky tisíc zařízení.\cite{Enisa_thread_landscape}


\subsubsection{Denial of service}
\textit{Denial-of-service}, také znám jako \ac{DoS}, je útok zaměřený na kolaps infrastruktury tím.
Útok se snaží vyčerpat zdroje služby množstvím zasílaných požadavků nebo získat přístup k ovládnutí služby a vyřadit ji tak z provozu.
Přístup k ovládání dané služby je prováděn s využitím známe zranitelnosti nebo ziskem přístupových údajů administrátora.\cite{cisco_most_common_attack}

\subsubsection{Distributed denial of service}
Známější a více používaná je však podkategorie tohoto útoku zvaná \ac{DDoS}.
Hlavní změnou je využívání mnoha zařízení, takzvaného \textit{Botnetu}, která na příkaz zahltí službu množstvím požadavků.
Problematika tohoto útoku spočívá v 2 hlavních bodech.
Při útoku \ac{DoS} je možné příchozí požadavky z jednoho zařízení snadno zablokovat pomocí \textit{blacklistu} daného zařízení, není to však proveditelné, pokud tyto požadavky přichází z tisíců nebo i statisíců zařízení.
S tím souvisí i druhý problém -rozsah celého útoku.
Jedno zařízení může jen těžce konkurovat statisícím v množství požadavků, které je schopné odeslat.
A to i za předpokladu, že je mnohem výkonnější.
Proto jsou do \textit{botnetů} často přidávána jakákoli možná zařízení s přístupem k internetu, jako smart televize, pračky, ledničky nebo i kamery a jiné typy \ac{IoT} zařízení.\cite{cisco_most_common_attack}



\subsubsection{Ransomware denial of service}
Jako nová forma útoků se objevilo \ac{RDoS}.
Jedná se o útok \ac{DoS} nebo i \ac{DDoS}, kde však primárním cílem není vyřazení služby z provozu.
Výpadek provozu je však efektivní prostředek pro získání pravé motivace - peněz.
Stejně jako jiné již zmíněné formy ransomwaru, i \ac{RDoS} existuje ve dvou hlavních podobách v závislosti na tom, zda nejdříve nastane útok, nebo výhružka.
První možnost je, že nejdříve nastane útok.
Po jeho pozastavení je poslána výhružka, v níž je požadováno výkupné, jinak útok znovu začne.
Druhou možností je zaslání výhružky rovnou a pouze při nezaplacení nebo nutnosti prokázání možností útočníka je proveden skutečný útok.
Začíná zde s cílem útoku psychologická hra, protože útočník mnohdy nemá možnosti pro silný a dlouhodobý útok, to však cíl při rozhodování, zda zaplatí výkupné, neví.
\ac{RDoS} často cílí na poskytovatele internetových služeb, finanční instituce a malé až střední podniky.
Možná nejpřekvapivější je návrat plateb za \textit{ochranu}, tedy každodenních plateb, například v hodnotě 1 BTC denně, za nenapadnutí společnosti.\cite{Enisa_thread_landscape}


\subsection{Ostatní útoky}\label{subsec:ostatni-utoky}
Tato kategorie se skládá z útoků, hrozeb a technik, které nelze zařadit samostatně do jedné kategorie.
Často jsou však využívány v kombinaci s jinými kategoriemi útoků pro dosažení lepších výsledků.
Je nutné je v tomto výčtu zmínit kvůli jejich nebezpečnosti, rozšířenosti a nízkému veřejnému povědomí.

\subsubsection{Man-in-the-middle}
Při útoku \textit{Man-in-the-middle},také zvaném odposlouchávací útoky, se útočník dostává doprostřed komunikace dvou subjektů.
Hlavním cílem je filtrování, kradení a nahrazování dat proudících v komunikaci.
Mezi nejčastější implementace tohoto útoku patří napodobování veřejné \textit{Wi-Fi}.
Útočník se představuje jako vstupní bod na tuto veřejnou Wi-Fi, kam posléze odesílá veškerou komunikaci.
Lidé si tak nemusí uvědomit, že útočník existuje, a nedávají si tak pozor na svoji činnost na takto odposlouchávané síti.
Další oblíbenou implementací útoku je použití malwaru.
Ten po nainstalování přesměrovává komunikaci nebo pouze odposlouchává činnost na daném stroji.
Zajímavým trendem poslední doby je použití QR kódů.
V lednu 2022 dokonce FBI vydalo varování ohledně zločinců, kteří používají QR kódy k přesměrování obětí na podvodné weby a kradou tak přihlašovací informace.
Není to však jen otázka USA, podobné metodologie útoků využívali i útočníci v Německu.
QR kódy jsou pro útočníky výhodné, protože člověk není schopen rozeznat pravdivý od škodlivého.
Pokud tedy útočník zamíchá mezi legitimní kódy své podvodné, je pro běžného člověka nemožné je odhalit.\cite{Enisa_thread_landscape, cisco_most_common_attack}


\subsubsection{Zero day exploit}
\textit{Zero day exploit} je zranitelnost systému, na niž ještě neexistuje patch.
Tato situace může nastat, pokud byla zranitelnost nahlášena a výrobce systému ji ještě nestihl opravit.
Mnohem častější je případ, kdy zranitelnost našel sám útočník.
Ten ji ale bude chtít využít, rozhodně ne nahlásit.
Tyto zranitelnosti se také snaží získat státní složky zaměřené na špehování.
Nemůže tak být divu, že s těmito slabinami existuje černý trh\cite{world_end_2021}, na němž se prodávají až za miliony dolarů.
Ani výzkum zranitelností není levná záležitost a vyžaduje velké množství zdrojů.
Částečně je to z důvodů lepší bezpečnosti a lepších technologií, částečně je to faktor kompetice, kde první nálezce má ze zranitelnosti největší nebo i jediný zisk.
To je jeden z důvodů, proč se skupiny útočníků začaly zaměřovat na napadání bezpečnostních výzkumníků.
Proč investovat zdroje, když je možné nechat to na někom jiném.
Z podobného důvodu je i samotný fakt veřejného nahlášení zranitelnosti nebezpečný, protože vede k pokusům o zneužití ze strany útočníků, kteří výzkumníky dlouhodobě sledují.
Bohužel však existují společnosti, které ignorují nahlášené slabiny právě do chvíle, než jsou upozorněni na veřejné nahlášení v rámci následujících dnů či měsíců.
Časová lhůta existuje právě kvůli nutnému času na opravu, je však nutné, aby tuto výhrůžku nahlašovatel dodržel, jinak přestane být efektivní.\cite{Enisa_thread_landscape}


\subsubsection{DNS tunneling}
\textit{DNS tunneling} je možné použít pro legitimní účely, tato práce však zkoumá jeho zneužití.
Není to samotný útok, ale podpora útoku založená na \firstac{DNS}.
Tento protokol je využíván prakticky neustále pro běžné účely a je velmi flexibilní, to však dovoluje jeho zneužití.
\ac{DNS} je používán tak často, že malé navýšení není poznat.
Mnoho společností ho navíc nekontroluje dostatečně, aby mohlo tento typ útoku možné odhalit.
Útočník v \ac{DNS} requestech a responsech zakódovává vlastní komunikaci za účelem jejího skrytí.
Odchozí komunikace může být použita pro exfiltraci kritických dat nebo přijímání odpovědí od nainstalovaného malwaru, příchozí komunikace naopak pro posílání příkazů již nainstalovanému malwaru nebo dokonce stahování dalšího malwaru.\cite{cisco_most_common_attack, bright_sec_dns_tunneling}

\subsubsection{Supply-chain útoky}
Supply-chain útoky využívají vztahy mezi organizacemi.
V dnešní době je provázanost nevyhnutelná, bohužel to však představuje značnou bezpečnostní slabinu.
\ac{ENISA} uvádí, že se tyto útoky skládají z kombinace alespoň dvou útoků, jeden na dodavatele a další na spotřebitele.
První útok na dodavatele je použit primárně k útoku na skutečný cíl, tedy spotřebitele.
To však neznamená, že spotřebitel jedné služby nemůže být dodavatelem další.
Útočník mnohdy může útoky řetězit a mít až překvapivý dosah.
Efektivita plyne v malých možnostech přípravy na tento typ útoku ze strany spotřebitele.
Velmi nepříjemnou verzí supply-chain útoků jsou útoky na open-source knihovny.
Reálné knihovny bývají nakaženy skrytým malwarem s cílem nakazit kohokoli, kdo knihovnu bude využívat.
Tento proces by měli zastavit udržovatelé knihoven, kteří kontrolují přidávané změny, bohužel však mohou udělat chybu.
Další možností pro útočníky je napodobit jména a funkcionalitu legitimních knihoven.
Je pak šance, že vývojáři omylem použijí tuto podvodnou knihovnu, aniž by si to uvědomili.
Například v červnu 2022 bylo zjištěno, že knihovny pygrata a loglib extrahují AWS klíče.
Za speciální zmínku stojí útok skupiny provozující ransomware LockBit oproti společnosti Abiom.
To byl velice závažný útok protože Abiom dodává komunikační technologii pro nizozemskou záchrannou síť C2000, Nizozemské ministerstvo obrany, národní policii a bezpečnostní služby.
Situace okolo supply-chain útoků je natolik vážná, že vedla ke vzniku evropské směrnice \textbf{NIS2}, která by měla řešit bezpečnost dodavatelských řetězců.
Představuje kybernetickou strategii s návrhy na posílení obrany a zlepšení reakcí proti zákeřným aktivitám.
Jedinou obranou proti supply-chain útokům je posílení obrany všech článků řetězce.\cite{Enisa_thread_landscape}


\section{Kategorie útočníků}\label{sec:kategorie-utocniku}
Pro kompletnost je při bezpečnostním zkoumání nutné uvažovat i typ útočníka, který útok uskutečňuje.
Různé typy se chovají během útoku různě, mají jiné cíle, možnosti a motivace.
Pokud je cílem komplexní ochrana, je nutné zvážit, se kterými typy útočníků bude nejčastější konflikt.
Pro zjednodušení je možné útočníky zařadit do několika skupin.
Stejně jako u útoků mezi skupinami existují návaznosti a překrývání, je nutné skupiny brát pouze jako hrubé zařazení a ne definitivní výčet.
Skupinami jsou:
\begin{itemize}
	\item Příležitostný útočník,
	\item Script kiddie,
	\item Hacktivista,
	\item Hacker na objednávku,
	\item Kyberkriminálník,
	\item Státem podporovaný útočník,
	\item Insider (vnitřní osoba).
\end{itemize}\cite{Enisa_thread_landscape,data_flair_attackers}

\subsection{Příležitostný útočník}\label{subsec:prilezitostny-utocnik}
Tento typ útočníka by bylo možné nazývat také hobby útočník.
Mají omezené zdroje a bývají velmi specifičtí v rámci postupů a zranitelností, které využívají k dosažení svého záměru.
Tito útočníci nejsou plně zaměřeni na hackování, je to pro ně spíše zábava a zpestření života.
Z toho také vyplývají hlavní motivace těchto útočníků - získat proslulost.
Existují fóra dedikovaná těmto útočníkům, kde se navzájem chlubí svými útoky ostatním.
Můžeme tak očekávat, že útoky budou směřovány k jasně viditelným, avšak málo destruktivním typům.

\subsection{Script kiddie}\label{subsec:script-kiddie}
Ve většině případů jsou script kiddies nejméně schopní útočníci.
Jsou to amatéři, kteří používají volně dostupné nebo zakoupené nástroje bez hlubších znalostí systémů a hackování.
Většinou bývají neškodní, teprve se učí a mají omezené znalosti a možnosti útoku, a proto jsou jejich útoky málokdy úspěšné.
V případě úspěchu často ani nevědí, jak v útoku pokračovat.
Lze tak u útoků předpokládat nízkou úroveň poškození, snadno odhalitelné útoky a nízkou sofistikovanost.
Jediným výrazným rizikem jsou zakoupené nástroje pro specifické účely.
Ve výjimečných případech, u nichž bývá motivací pomsta, zakupují script kiddies na černém trhu nástroje pro konkrétní devastující útok.
Ve většině případů se však jedná o nováčky, kteří hledají výzvy a adrenalin.
Pokud má nicméně skript kiddie pro hackování talent, může se díky zisku zkušeností a znalostí stát v průběhu času profesionálním hackerem.

\subsection{Hacktivista}\label{subsec:hacktivista}
Útočníci motivovaní politickými nebo ideologickými názory jsou nazýváni hacktivisti.
Provádějí škodlivé útoky pro zviditelnění a prosazení své agendy.
Možná nejznámějším příslušníkem je skupina Anonymous.
S velikostí skupiny je očekávaná jistá fragmentace, a tak se Anonymous hlásí k množství incidentů s různými agendami.
Za speciální zmínku stojí jejich kybernetické útoky proti Rusku v souvislosti s válkou na Ukrajině\cite{anonymous_russian_attacks}.
Motivací hacktivistů není zisk, ale snaha bojovat za spravedlnost.
Jejich útoky tak bývají ve vážnosti v rozmezí od neškodných, jako je změna webové stránky, po drastické, kde vede k poškození infrastruktury a zničení nebo vyzrazení citlivých dat.
Také není neobvyklá spolupráce s Insidery, kteří sdílí jejich přesvědčení nebo je upozornili na objekt jejich zájmu.
Lze tedy říci, že hacktivisté mohou dle svého přesvědčení být kvalifikování jako síla dobra i zla.


\subsection{Hacker na objednávku}\label{subsec:hacker-na-objednavku}
Skupina schopných hackerů, kteří své vědomosti a znalosti propůjčují jiným osobám či organizacím, jsou hackeři na objednávku.
Nemůže být překvapením, že velká většina hackerů více či méně spadá do této skupiny.
Skupina se totiž navíc dle motivace,metodologie a záměru dělí na podskupiny, zvané \textit{White hat, Gray hat} a \textit{Black hat} hackeři.

\nlparagraph{White hat hackeři}
\textit{White hat hackeři} využívají své schopnosti ve spolupráci s organizacemi k určení jejich slabých míst v zabezpečení.
Tito hackeři se řídí silným etickým kompasem, který je jasně zřetelný z jejich činnosti a zaměření pro zlepšení zabezpečení.
Pracují se svolením organizace a v jasně vymezených hranicích, což však může limitovat jejich schopnost odhalit veškeré slabiny.

\nlparagraph{Black hat hackeři}
\textit{Black hat hackeři} jsou neetický opak white hat hackerů.
Jejich primární metodikou je prolamování obrany systémů a sítí bez vědomí organizace.
Cílem těchto hackerů je vždy svůj vlastní prospěch.
Existuje mnoho možností, jak tohoto prospěchu dosáhnou.
Někteří napadají společnosti a exfiltrují data uživatelů, která pak prodávají na černém trhu.
Jiní využívají tato data k bankovním podvodům, kampaním sociálního inženýrství nebo kradení účtů.
Další možností je pouze vyhledávání slabin a jejich následný prodej na trhu slabin.
Státní organizace jsou za takzvané \textit{zero day slabiny} ochotné zaplatit i statisíce dolarů\cite{world_end_2021}.
Tam, kde by slabinu etický hacker ohlásil, aby mohla být napravena, ji neetický hacker prodá za značnou sumu peněz.

\nlparagraph{Gray hat hackeři}
\textit{Gray hat hackeři} jsou na pomezí předchozích kategorií.
Jestli boudou klasifikování blíže k white hat hackerovi nebo black hat hackerovi závisí na situaci.
Mnohdy využívají metodologii black hat hackerů k odhalení slabin, ale místo prodeje nebo zneužití slabiny ji dané organizaci nahlásí.
Nesnaží se tak způsobovat škodu, ale odhalit slabiny zabezpečení, které by mohlo být nemožné odhalit pro white hat hackera.
To však bohužel stále znamená napadení organizace či osoby, které nemusí reagovat kladně na pozdější oznámení útoku.
Také občasné požadavky platby za napravení slabiny nebo její nevyzrazení jim nedělá nejlepší jméno.
Asi nejlepším příkladem tohoto fenoménu je kauza okolo Twitteru Donalda Trumpa, jeho hesel a hackerů nazývaných \textit{The Guild of the Grumpy Old Hackers}\cite{darknet_87_grumpy}.
Této skupině hackerů se povedlo několikrát získat přístup ke Twitter účtu Donalda Trumpa, a to v letech 2016 a 2020.
Pro kontext, Donald Trump byl v roce 2016 kandidát na prezidenta Spojených států amerických a v roce 2020 prezident.
Po obou těchto úspěšných útocích to sami hackeři nahlásili, avšak i tak se nevyhnuli soudnímu řízení.
Naštěstí byl jejich postup zcela legální a byli tak zproštěni viny.

\subsection{Kyberkriminálník}\label{subsec:cyber-kriminalnik}
Tento druh útočníků působí jako jednotlivci nebo dokonce organizované skupiny zaměřené na finanční zisk pomocí kriminální aktivity.
Mezi jejich činnosti patří ransomware, těžba kryptoměn, krádež kryptoměn nebo krádež přihlašovacích údajů, které posléze využívají pro další trestnou činnost.
Množství těchto útočníků stoupá také díky stále nižším vstupním nárokům díky \ac{MaaS}\cite{MaaS_ATaT} a \ac{RaaS}\cite{RaaS_microsoft}.
Zajímavým trendem posledních let je navíc neustálé přejmenovávání a `odcházení do důchodu' kriminálních skupin.
Cílem je vyhýbání se zákonnému stíhání a sankcím, jelikož je na tyto skupiny kladena stále větší pozornost.

\subsection{Státem podporovaný útočník}\label{subsec:statem-podporovany-utocnik}
Útočníci úzce spojeni s určitým státem, jejichž motivace a cíle jsou vždy v zájmu jejich státu.
Útoky jsou tedy často zaměřené na posílení státu v politické nebo vojenské sféře.
Je jasné, že tito útočníci mají téměř neomezené zdroje, vyspělé technologie a prvotřídní znalosti.
Proto jsou od nich časté sofistikované a rozsáhlé útoky.
Lze tedy očekávat průmyslovou špionáž, úniky státních tajemství, cílené kybernetické útoky na infrastrukturu ale také rozsáhlé ransomwarové kampaně a podvody s kryptoměnou.
Není neobvyklé, že státy rekrutují úspěšné hackery ze všech možných zdrojů.
Existují dokonce doměnky o rekrutování i mezi kriminálníky.
Mnoho spekulací koluje například kolem skupiny REvil, kterou Rusko zatklo na začátku roku 2022\cite{REvil_story}.
Bohužel již o pár měsíců později se znovu začaly objevovat známky jejich aktivity.
Jak je však u státem sponzorovaných akcí trendem, daný stát jakoukoli vazbu popírá a tento fakt lze jen těžko vyvrátit.
Přesto bylo identifikováno hned několik skupin, kde je návaznost na stát téměř jistá.
Příkladem je \textit{Lazarus Group} pro Severní Koreu, \textit{Sandworm Team} pro Rusko nebo \textit{APT41} spojený s Čínou\cite{Mitre_groups}.

\subsection{Insider (vnitřní osoba)}\label{subsec:insider-(vnitrni-osoba)}
Insider je osoba pocházející z organizace, která způsobila chtěně nebo nechtěně bezpečnostní incident, představuje proto značnou hrozbu pro bezpečnost celé organizace.
Většina bezpečnosti je nastavena na venkovní hrozby.
Nebezpečí insidera je právě v naprosté neefektivitě takto postavené obrany vůči němu.
Systém totiž nemůže být nikdy stejně chráněný z venku jako zevnitř.
Insider takto nastavenou ochranu obejde a dostane se přímo ke zranitelným místům.
Velmi často jsou těmito insidery nespokojení zaměstnanci, bývalí zaměstnanci, dočasní pracovníci nebo dokonce zákazníci.
Je proto velmi důležité správně nastavit přístupy do systému a při odchodu zaměstnanců jim přístup včasně odebrat.
Insidery můžeme dle úmyslu dělit na tři hlavní kategorie, kterými jsou \textit{Úmyslný insider}, \textit{Nechtěný insider} a \textit{Nedbalý insider}.

\nlparagraph{Úmyslný insider}
Úmyslný insider je ten, kdo vědomě způsobí své organizaci újmu.
Mezi příklady se řadí krádeže dat, úmyslné poškození infrastruktury nebo vydání přístupu třetí neoprávněné osobě.
Cílem těchto insiderů bývá často pomsta nebo jen peněžní zisk.
Speciálním případem této kategorie je takzvaný \textit{whistleblowing}, což termín označující situaci, při níž současný nebo bývalý zaměstnanec upozorní na trestné, neetické nebo podezřelé jednání firmy či státní instituce.
Tohoto zaměstnance lze tedy také považovat za úmyslného insidera, který však vyzrazuje informace v dobré víře a nejedná ve vlastní prospěch.
Velice známým zástupcem je Edward Snowden, který v roce 2013 veřejnosti odhalil existenci rozsáhlých programů na sběr informací fungujících pod záštitou \firstac{NSA}\cite{Edward_Snowden}.

\nlparagraph{Nechtěný insider}
Může se stát, že insiderem se stane běžný zaměstnanec, který se shodou okolností dopustil nějaké chyby a poškodil firmu.
To však nebylo úmyslem a ani tato situace nenastala v rámci zanedbání povinností.
Může se například jednat o náhodné smazání nebo modifikace důležitých souborů, nechtěné vypojení zařízení ze zásuvky.

\nlparagraph{Nedbalý insider}
Některé hrozby vznikly kvůli nedbalosti zaměstnance,
Ten pak figuruje jako nedbalý insider.
Situace nastane, když zaměstnanec nedodržuje správné postupy, politiky nebo metodologie, které organizace stanovila.
Tyto postupy vznikly právě pro ochranu důvěrnosti, integrity a dostupnost dat.
Jejich nedodržování je proto značný bezpečnostní problém.
Je však nutné zkoumat, zda toto nedodržování plyne z nerealisticky nastavených politik nebo pouze chyb zaměstnance.
Další možností jsou také nedostatečné znalosti a zaškolování zaměstnanců pro vykonávání možné činnosti.
Je jasné, že v mnoha případech může být obtížné rozeznat, zda se jedná o nedbalého nebo pouze o nechtěného insidera


\section{Testování}\label{sec:testovani}
Smyslem testování je simulovat útok na infrastrukturu systému.
Ve většině případů to znamená, že se specialista na bezpečnost snaží provádět stejné kroky jako potencionální útočník.
Ideální postup vylučuje nejen nepředvídatelnost útočníka, ale ve výjimečných případech i jeho neschopnost nebo neznalost.
Stejně jako v každém odvětví existují i mezi útočníky sféry kompetence a znalostí.
Existuje mnoho útočníků, kteří se touto činností nejen živí, ale je to také jejich vášeň.
Takovýto útočník bude disponovat znalostmi a technikami které nejsou běžné.
Při útoku bude postupovat co možná nejoptimálněji za účelem dosažení výsledků.
Je možné od něj očekávat pozorné zkoumání cíle a vytrvalost, díky nimž si cíl zvolí.
Tiše hledá slabiny a proniká do střežených systémů bez povšimnutí.
Ne každý útočník je však takto nebezpečný.
Drtivá většina útoků je prováděna nadšenci nebo útočníky bez obsáhlých znalostí a technik útoku.
Není tak vyloučeno použití snadno detekovatelných \textit{hlučných} technik nebo prostých chyb, kterými na sebe při útoku upozorní.
Nebezpečnost této skupiny v posledních letech vzrostla díky propagaci \firstac{MaaS}\cite{MaaS_ATaT} a \firstac{RaaS}\cite{RaaS_microsoft}.
Existence nástrojů, které dovolují provézt úspěšný útok za pomocí znalostí zkušenějšího útočníka, znamená, že ani nezkušené útočníky není možné podceňovat.

\paragraph{}
Testování je jedna z nejlepších možností, jak zlepšit obranyschopnost organizace.
Nemilou samozřejmostí je, že největší změny v ochraně přichází po bezpečnostním incidentu.
Ztráta dat, poškození reputace organizace nebo i finanční postihy jsou výbornou motivací, proč věnovat zabezpečení větší úsilí, nejen pro obránce, ale i pro management organizace.
Pokud se útočníkovi podařilo prolomit ochranu organizace, jasně to ukazuje na nedostatky, které je nutné napravit.
Bezpečnostní incident tak kromě mnoha nepříjemností ukazuje, jak dobře byla organizace připravena.
Dle reakce obránců lze zkoumat jejich celkovou připravenost.
Dobře připravení obránci mohou nebezpečný incident zaznamenat včas a pokud jeho následku nejde zabránit, mohou ho alespoň omezit.
Nepřipravení obránci nemusejí zaznamenat incident ani měsíce po jeho uskutečnění a několikanásobném zopakování.
Organizace a její obránci musí vědět, jak postupovat v případě incidentu.
Testování je simulace bezpečnostního incidentu ale bez většiny jeho negativ.
V závislosti na druhu testování je možné vyzkoušet připravenost obránců, jejich obezřetnost a postupy v případě detekce podezřelé činnosti.
Můžeme testovat robustnost infrastruktury, zda je kvalitně navržena a správně nastavena.
Můžeme testovat zařízení, zda fungují správně a nelze je zneužít.
Můžeme testovat technologie, zda jsou správně využívány, popřípadě zda je jejich využívání nutno omezit nebo naopak rozšířit.
Důvodů, proč by mělo být testování součástí zlepšování obranyschopnosti každé organizace je tedy mnoho.
Testování přináší tolik benefitů, protože to není prostá reakce na událost, ale především příprava.
Cílem organizace je zajistit, aby žádný bezpečnostní incident nebylo možné stejně uskutečnit dvakrát.
Čím více je poprvé uskutečněno pomocí testování, tím více jich bude zaznamenáno a zastaveno při skutečném útoku.


\subsection{Rozsah testování}\label{subsec:rozsah-testovni}
Obránci se musí přizpůsobovat a testovat nejen nejběžnější a nejefektivnější útoky ale i krajní scénáře.
Takovéto přizpůsobování vedlo nejen k různým testovacím metodikám, jako \textit{Red teaming} a \textit{Penetration testing}, ale také k testování různých scénářů a hlavně rozsahů.
Mezi nejznámější patří \textit{celkový pokus o kompromitaci}, \textit{specifický pokus o kompromitaci} nebo \textit{předpokládaný kompromis}.
Je samozřejmé, že každá tato kategorie obsahuje další podkategorie.
Toto základní rozdělení je však vhodné pro rozpoznání hlavních výzev, složitostí ale i přínosů testování.
Nelze říci, zda je jeden scénář lepší nežli jiné, naopak se doplňují a každý slouží pro určitou situaci.\cite{red_team_oakley_2019}

\subsubsection{Celkový pokus o kompromitaci}
Základní situací je \textit{celkový pokus o kompromitaci obrany}, který lze definovat jako snahu \textit{red teamu} napadnout celou infrastrukturu organizace a pokusit se kompromitovat co možná největší možnou část.
Tato strategie je vhodná pro celkové testování infrastruktury, jedná se totiž o emulaci skutečného útoku.
Testování ve většině případů začíná ze stejného bodu, který je běžně dostupný veřejnosti a tím pádem i útočníkům.
Lze takto testovat správnou segmentaci infrastruktury a rezistivitu jednotlivých segmentů.
Z velkého a otevřeného rozsahu však vyplývá jen omezená možnost testování do hloubky, není možné zaměřit se na specifické části infrastruktury.
\textit{Red team} má pouze omezený čas a prostředky, proto nachází pouze nejčastější slabiny na celém rozsahu testování, je nerealistické předpokládat, že by mohl testovat jednotlivé části infrastruktury do hloubky nebo pro všechny možné hrozby.
Při nesprávném provedení nebo nepochopení cíle tohoto testování může vznikat falešný pocit bezpečnosti, který je pro zabezpečení nebezpečný.
Cílem tohoto testu je získat celkové povědomí o ochraně a poté pokračovat s podrobnějším testováním.

\subsubsection{Specifický pokus o kompromitaci}
Pro testování omezené části infrastruktury se využívá \textit{specifický pokus o kompromitaci}.
Cílem je důkladně otestovat omezenou část infrastruktury bez využití, zásahu nebo omezení částí infrastruktury nacházející se mimo testovaný rozsah.
\textit{Red team} provádí podrobné testování, které při korektním provedení vede k nalezení všech slabin.
Výhodou tohoto testování je jeho specificita, je možné testovat určitou oblast infrastruktury nebo jen určité zařízení, kde bývá výhodné testovat za určitých podmínek.
Příkladem může být testování za použití specifického účtu a s ním spojených pravomocí přístupu.
Další výhodou je možnost testování v běžném provozu.
Krátkodobě vyřadit a testovat část infrastruktury je proveditelnější než celkové vyřazení nebo testování za běžného provozu.
V takovém případě je však nutné dávat pozor na správný výběr rozsahu.
Při důkladném testování není neobvyklé vyřazení testovacího zařízení z běžného provozu nebo jeho zhroucení.
Je proto důležité, aby nebyl testován systém, který je kriticky důležitý nebo zrovna používaný.

\subsubsection{Předpokládaná kompromitace}
Z názvu je jasné, že toto testování zkoumá, jakou škodu může útočník napáchat při úspěšném útoku.
Počáteční bod tohoto testování je založen na předpokladu úspěšné infiltrace útočníkem.
Přístup k takto identifikovanému bodu je s příslušnými právy poskytnut \textit{red teamu}, který nemusí prolamovat obranu systému.
\textit{Red team} se tak může plně soustředit na zkoumání dopadu úspěšného útoku.
Důvod, proč toto testování není pouze součástí předchozích testování, je úspora času a prostředků.
Vhodným příkladem jsou útoky sociálního inženýrství a phishing.
Jsou to často testované útoky právě díky jejich četnosti ale jejich výsledeky nejsou okamžité, a tak není možné vytvořit rychlou zpětnou vazbu.
Může totiž trvat i týdny než uživatel otevře e-mail a nainstaluje malware.\cite{red_team_oakley_2019}
Z důvodu efektivity je tedy lepší předpokládat úspěch útoku a začít testovat z bodu malwarem nakaženého uživatelského stroje.
Tento typ testování je výhodný pro ukázku dopadu úspěšného útoku.
Častým problémem bezpečnosti je její nedocenění, dokud funguje správně, specialisti se zdají být nepotřební.
Ve chvíli, kdy nastane problém, je však většinou pozdě.
Proto tento typ testování představuje nástroj k prokázání důležitosti kvalitní obrany ukázkou důsledků jejího selhání.

\subsection{Metodologie testování}\label{subsec:metodologie-testovani}
Důležitým aspektem testování je již zmíněný rozsah, ještě důležitější je však správný výběr způsobu testování.
Mezi nejznámější testovací metodologie patří: \textit{Penetration testování}, \textit{Red team vyhodnocení} a \textit{Purple team testování}, také známé jako \textit{kontrolní cvičení}.
Stejně jako u rozsahu testování, tak i u těchto metodologií existuje určitý přesah.
Z tohoto důvodu jsou tyto metodologie nepřesně definovány, někdy zaměňovány nebo dokonce považovány za jedinou metodologii s několik různými názvy.
Je proto nutné si je představit v kontextu tohoto textu.
K tomu slouží následující sekce.\cite{securityInteligence_pen_test_red_team_purple_team}

\subsubsection{Penetration testování}
Penetration testování, často také zkracován na Pen testing, je metodologie s cílem vyhledání co nejvíce možných zranitelností testovaného systému.
Takto důkladné hledání je omezeno pouze na zadaný rozsah, neboli část testovaného systému.
Aby bylo dosaženo co největší efektivity, tento typ testování se svoji činnost nesnaží schovávat, naopak bývá velmi snadné ho detekovat.
To však nevadí, protože ochrana daného systému by o jeho provádění měla být předem informována a může tak zkoušet, zda i detekce funguje optimálně.
Tento typ testování může být také z části automatizován, což vede k dalšímu zlepšení efektivnosti na úkor flexibility.
V neposlední řadě Penetration testování vyžaduje menší množství zdrojů než Red team vyhodnocení, ať už v podobě času, lidí či kapitálu.

\subsubsection{Red team vyhodnocení}
Red team vyhodnocení, také referovaný jako Red teaming, je na rozdíl od Penetration testování zaměřen na dosažení zadaných cílů, například získání přístupu k citlivým datům, nebo testování všímavosti ochranných systémů.
To také znamená, že Red teaming není omezen oblastí, kterou může v rámci dosažení svého cíle využít.
Obrana systému není ze zřejmých důvodů seznámena s nadcházejícím testováním, proto tato metodika vyžaduje maskování a opatrný přístup, aby,v rámci možností, co nejvíce simulovala skutečný útok.
Výhodou je, že za předpokladu detekce bude obrana systému postupovat stejně, jako kdyby se jednalo o skutečnou hrozbu a získají tak cenná data a zpětnou vazbu pro zlepšení budoucí obrany.
Je jasné, že pro správné provedení Red teamingu je potřeba více zdrojů než v případě Pen testingu, ať už se jedná o čas nebo lidskou práci,.
Také automatizace zde bývá složitá, jedná se totiž o specifickou strategii pro každé testování, při němž je nutné reagovat na všechny události vzniklé při testování.\cite{securityInteligence_pen_test_red_team_purple_team, lootsec_pen_test_vs_red_team, astra_pen_test_vs_red_teaming}

\subsubsection{Purple team testování/Kontrolní cvičení}
Specifickou situací je blízká spolupráce útočníků (Red team) a obránců (Blue Team).
Hlavní výhodou tohoto postupu je zpětná vazba mezi útočníky a obránci, díky níž se dá testovat detekce a následná odezva obránců při testování specifických technik obsažených v MITRE ATT\&CK frameworku.
Další výhodou je seznámení s postupy druhé strany pro tvorbu efektivnější strategie obrany, ať už se jedná o útočníky nebo obránce.
Tato cvičení lze uskutečňovat pro vyzkoušení techniky jednou, lepší však bývá opakované testování.
Částečná automatizace za použití open-source nástrojů, které mají v této práci vlastní kapitolu, je také jednou z možností.
Výhodou opakovaného testování s automatizací je možnost měřit a porovnávat výsledky za vstejných stupních podmínek, což vede k jasně viditelnému zlepšení obranné strategie.\cite{securityInteligence_pen_test_red_team_purple_team,redscan_team_purple_team}

\section{Zavedené nástroje v problematice Testování}\label{sec:zavedene-nastroje-v-problematice-testovani}
Pro účely testování je dobré využívat stávající technologie.
Je jasné, že každé testování prostředí je jedinečné, to však neznamená, že není možné těžit z poznatku ostatních obránců.
Vzniklo mnoho nástrojů, jejichž cílem je pomoci nejen s rozeznáváním útoků, ale i se samotným testováním.
Asi nejznámějším frameworkem pro kolekci útoků a jejich rozeznávání je MITRE ATT\&CK\cite{mitre_attack_framework}.
Tento framework je open-source, volně dostupný a obsáhlý.
Existuje množství testovacích frameworků, které jsou s MITRE ATT\&CK kompatibilní\cite{csoonline_4_testing_frameworks}.
Příkladem \firstac{RTA}, Caldera nebo Atomic Red.
Tyto frameworky jsou na rozdíl od jiných zdarma, a proto se hodí pro začátek testování, kdy je dobré si nejdříve vymezit testovanou oblast a nutné nástroje.
Všechny tyto frameworky budou více probrány a porovnány v následujících kapitolách.

\subsection{MITRE ATT\&CK}\label{subsec:mitre-att&ck}
MITRE ATT\&CK je bezplatná otevřená znalostní databáze popisující chování útočníků a techniky, které tyto útočníci využívají.
Tato znalostní báze je založená na pozorování v rámci reálného světa, data pochází z veřejného zpravodajství a hlášených bezpečnostních incidentů.
Samozřejmě jsou začleněny i veřejné výzkumy technik útočníků.
Je aktivně udržována, nové informace jsou přidávány dvakrát do roka\cite{mitre_attack_framework_faq}.
Hlavním přínosem tohoto projektu však není pouze mapování útočníků, ale celková klasifikace útoků do jednotlivých \textit{taktik, technik a sub-technik}.
Framework tak obráncům nabízí možnost rozložit složitý útok na jeho jednotlivé stavební kameny.
ATT\&CK je velmi podrobný, a dokonce u jednotlivých technik útočníků nabízí možnosti detekce a obrany.
Obránci proto mohou snáze porozumět stylu práce útočníků, technikám, které používají, ale nejdůležitěji, jak tyto informace využít k vytvoření lepší obrany.
Všechny tyto informace jsou navíc přehledně dostupné v interaktivní formě pomocí ATT\&CK navigátoru\cite{mitre_attack_navigator}.
V něm je možné provádět vizualizaci a porovnávání útoků.
Je tedy snadné prezentovat rozbor útoku dalším osobám,  díky exportování a importování studovat již popsané útoky a sledovat nejpoužívanější taktiky a techniky.
Není proto divu, že je MITRE ATT\&CK v době psaní tohoto textu považován jako jeden z nejvýznamnějších standardů pro popis technik používaných útočníky při kybernetických útocích.\cite{mitre_attack_framework}

~\clfig{Mitre_Attack_Navigator}{\linewidth}{Mitre ATT@CK Navigátor}{\cite{mitre_attack_framework}}{fig:navigator}

\subsubsection{Členění}
Díky popularitě ATT\&CK došlo k jeho velkému růstu.
Je jasné, že s přidáváním taktik a technik vzrůstá nepřehlednost.
Také rozšiřování zaměření nakonec vedlo k nutnosti rozdělení, aby byla zachována přehlednost a funkcionalita.
Proto existují specifikace pro určitá odvětví:

\begin{itemize}
	\item \textbf{Enterprise} - síťové a cloudové technologie,
	\item \textbf{ICS} - průmyslové řídící systémy,
	\item \textbf{Mobile} - mobilní zařízení.
\end{itemize}

\paragraph{}
Samozřejmě i jednotlivá odvětví jsou dále rozdělena na domény dle zaměření útočníků.
U Enterprise je rozlišování pro Windows, macOS nebo Linux a také cloud, network a containers.
Mobilní platforma obsahuje techniky pro Android a iOS\@.
Toto rozdělení dává smysl, stejná technika bude jinak aplikována na různých systémech a díky tomuto rozdělení je možné zamířit se právě na jeden určitý use-case útoku.

\subsubsection{Taktika}
Taktika představuje nejvyšší úroveň abstrakce modelu ATT\&CK\@.
Představuje cíl útočníka, ne však jak se tohoto cíle útočník snaží dosáhnout.
Jako příklad je možné zmínit taktiku \textit{Impact(Dopad)}, která je zaměřená na způsobení škody v podobě ohrožení integrity nebo dostupnosti dat.
Rozdělení na taktiky není ojedinělé, naopak na této abstraktní úrovni ATT\&CK těsně připomíná další modely hrozeb zaměřené na postup útoku a útočníka.
Důvod, proč je ATT\&CK preferován před jinými modely, je jeho rozsah, provázanost a modelování namapované na proces navigace útočníka v napadaném systému.
Další výhodou je jasná rozlišitelnost taktik.
Jsou označené jedinečným řetězcem ve tvaru \textbf{TA0XXX}, kde je XXX nahrazeno číslem jednotlivé taktiky.
Pozor na fakt, že taktika se stejným názvem, například \textit{Initial access(Počáteční přístup)}, bude označena jiným řetězcem v závislosti na odvětví, do něhož spadá.
Pro enterprise je to \textbf{TA0001}, pro mobile \textbf{TA0027} a pro ICS se tato taktika značí \textbf{TA0108}.
Nemůže proto dojít k záměně a nahlížet na techniky, které nejsou aplikovatelné na dané odvětví.\cite{Mitre_finding_cyber_threats, mitre_attack_framework}

\subsubsection{Technika a sub-technika}
Techniky jsou způsob, kterým útočník dosahuje svého taktického cíle.
To znamená, že v rámci každé taktiky existuje konečný počet popsaných akcí, jejichž provedením útočník dosáhne svého cíle.
Je jasné, že použité techniky se mění v závislosti na znalostech i možnostech útočníka.
Také je nutné brát v potaz prostředí, v němž útok probíhá.
Popis taktik je však od těchto specifik oproštěn.
Důvodem je opět nutnost klasifikace, kdy není možné vytvořit téměř nekonečné množství technik pro jednotlivé útoky.
Jsou proto klasifikovány do kategorií technik, v nichž jsou změny v metodologii nebo jednotlivé kroky přidány pomocí sub-technik.
Tento postup umožňuje popsat nejdůležitější kroky chování útočníka aniž by se obránce ztratil v detailech.
Další výhodou je izolace od neustále vyvíjejícího kódu.
Základní metodika zůstává zachována, avšak jednotlivé implementace se v čase rapidně mění.
Stejně jako taktiky jsou i techniky označeny jedinečným řetězcem, který je ve tvaru \textbf{TXXXX}, kde je XXXX nahrazeno číslem jednotlivé techniky.
Pokud pro tuto techniku existují sub-techniky, připojuje se na konec řetězce \textbf{.XXX}, dde XXX reprezentuje jednotlivou sub-techniku.
Za příklad je možno uvézt techniku \textit{Phishing}, identifikovanou řetězcem \textbf{T1566}.
Technika \textit{Phishing} má také 3 sub-techniky, kterými jsou \textit{Spearphishing attachment \textbf{[T1566.001]}}, \textit{Spearphishing link \textbf{[T1566.002]}} a \textit{Spearphishing via service \textbf{[T1566.003]}}

\paragraph{}
Techniky se jen málokdy vyskytují v izolaci, většinou na sebe, stejně jako celé taktiky, navazují.
Vytvářejí tak sled událostí, které vedou k úspěšnému útoku.
Schopnost identifikovat a propojit navazující druhy událostí je důležitou součástí obrany, cílem modelu ATT\&CK je to co možná nejvíce usnadnit.
Data získaná z každého kroku v sekvenci pak nejen vypovídají o tom, zda se jedná o útok, ale také obránci dovolují lépe vyhledávat další postup útočníka.
Je také možné, že podle cíle techniky je daná technika zařazena do více taktik zároveň.
Jedním takovýmto příkladem může být technika \textit{Input capture (Zachycení vstupu)}.
Ta spadá ve stejnou chvíli do taktik \textit{Collection (Sběr dat)} a \textit{Credential access (Pověření k přístupu)}.
Je jasné, že framework ATT\&CK nevypisuje všechny existující techniky útoku z dané taktiky.
Jeho založení na informacích získaných z opravdových bezpečnostních incidentů a komunity výzkumníků však vede k upřednostnění nejznámějších a nejpoužívanějších technik.
Zdá se to být nejlepší způsob, jak shromažďovat účinné informace o použití technik útočníka a jak je propojovat do užitečného analytického nástroje.\cite{Mitre_finding_cyber_threats, mitre_attack_framework}

\subsubsection{Další přínos}
V neposlední řadě ATT\&CK také sleduje původ útoků, využitý software a zařazuje útoky do předpokládaných kampaní.
Tyto záložky jsou na hlavní stránce, specificky se jedná o \textit{Groups, Software} a \textit{Campaigns}.

\nlparagraph{Groups - skupiny}
Skupiny označují shluky útočníků, kteří operují se stejným cílem, je proto logické se domnívat, že jsou mezi sebou v kontaktu.
Analytici sledují skupiny pomocí různých  metodologií a termínů.
Je tedy možné, že různé skupiny analytiků nazývají jistou skupinu různými jmény, proto jsou u skupin zaznamenávány i alternativní názvy.
ATT\&CK se snaží tato různá pojmenování respektovat.
Také mezi jednotlivými skupinami dochází k částečnému překrytí, a to z důvodu pohybu útočníků a složitosti sledování skupin.
U kriminálních skupin je častý takzvaný \textit{rebranding}, kdy skupina změní své oficiální jméno nebo identifikační rysy za účelem zmatení autorit.
Pro zmatení je také časté použití identifikačních rysů jiných skupin, i z toho důvodu je zaznamenávání a sledování skupin obtížné.
Hlavním přínosem sledování skupin jsou informace o postupech a metodologiích útoku, které daná skupina preferuje.
Tyto informace jsou získány mapováním na veřejně oznámené útoky a jsou uvedeny původní odkazy.
Je důležité zmínit, že informace nezobrazují všechna možná použití technik skupin, ale pouze podmnožinu, která byla zaznamenána.
I tak je to pro obránce značný přínos.
Při identifikaci metodologie útoku na určitou skupinu je možné předpovídat další kroky z předchozích záznamů a zmírnit tak dopad útoku.\cite{Mitre_groups}


\nlparagraph{Software}
Software je termín pro vlastní nebo komerční kód a nástroje používané útočníky pro provádění technik nebo taktik.
Stejně jako u skupin můžeme u softwaru najít alternativní názvy právě díky sledování několika skupin.
Překrývání je sledováno týmem ATT\&CK a tyto názvy jsou označeny jako \textit{Associated Software}.
Informace o softwaru pochází z veřejně oznámených technik a často bývají mapované na skupiny, které tento software využívají.
Je tedy opět nutné zmínit, že použití určitého softwaru neznamená, že se jedná o související skupinu.
Pouze to znamená, že daná skupina tento software v minulosti použila.\cite{Mitre_software}


\nlparagraph{Campaigns - kampaně}
Pojem kampaň označuje rozsáhlou intruzivní aktivitu, která proběhla během určitého období s obecnými cíli a úkoly a byla značnou kybernetickou hrozbou.
Jedná se například o dlouhodobou průmyslovou špionáž nebo špionáž proti vládě určité země.
Není neobvyklé, že do složité kybernetické operace je zapojeno několik přidružených skupin, přičemž každá hraje jedinečnou roli.
Například může být jedna skupina zodpovědná za počáteční průnik do systému a jiná za exfiltraci dat
Kampaň je označována názvem uvedeným ve veřejných zprávách nebo jedinečným identifikátorem ATT\&CK, pokud kampaň ještě nebyla pojmenována.
Zaznamenání a sledování kampaní je obtížné.
Různé organizace zaznamenávající útok patřící do kampaně ho mohou oznámit pod různými jmény a stejný útok navíc může být popsán z různých úhlů pohledu.
Tým ATT\&CK pro jednotlivé kampaně činí nejlepší úsilí o sledování překrývajících se jmen, která jsou označena jako `Přidružené kampaně'.
Toto sledování je výhodné, protože poskytuje informace nejen o existenci kampaně, ale také informace o technikách, které jsou využívány.
Pro referenci jsou tak kampaně mapovány na veřejně uváděné techniky a jsou v nich zahrnuty původní reference.\cite{Mitre_campaigns}

\subsection{Nástroje}\label{subsec:nastroje}
~\clfig{cso_mitre_open-source_attck_test_tools}{\linewidth}{Porovnání vybraných nástrojů}{\cite{csoonline_4_testing_frameworks}}{fig:OpenSourceTestTools}

Než je zvolen finální framework pro testování, je nutné si nejdříve připravit co možná nejvíce informací týkajících se testování.
Je jasné, že každý z vybraných frameworků má své silné a slabé stránky.
Jak je vidět v tabulce ~\ref{fig:OpenSourceTestTools}, jedním z ovlivňujících parametrů je například testovaný operační systém.
S atomic red je možné testovat na všech třech hlavních platformách, \ac{RTA} je přizpůsobené pouze pro Windows.
Specializace sama o sobě není špatná vlastnost, naopak většinou bývá přínosem.
Pokud však potřebujeme testovat Linux, je jasné že nemůžeme použít nástroj, který toho není schopen.
Žádný z frameworků také nepokrývá celou MITRE ATT\&CK matici.
Proto lze předpokládat použití více nástrojů právě podle okruhu testování, na který je testování zaměřeno.

\subsubsection{Red Canary Atomic Red}
Ze všech uváděných příkladů je \textit{Atomic Red} nejvíce přívětivý rychlému začátku.
Pro jeho funkčnost není potřeba nic stahovat ani nastavovat, lze ho jednoduše použít z příkazové řádky\cite{redcanary_atomic_red}.
Další odlišností je jeho ovládání.
Většina ostatních frameworků je založena na jazyku Python, popřípadě jiném skriptovacím jazyku.
Atomic Red je ale spíše sada instrukcí odpovídajících jednotlivým taktikám a technikám Mitre ATT\&CK\@.
Atomic Red tedy není testovací software ale instrukce, pro testování jednotlivých ATT\&CK taktik s nástroji, které jsou již pravděpodobně nainstalované v počítači.
Je tedy vhodný pro naučení testovacích postupů, ne však pro automatizované testování.
Uživatel při testování vždy musí provézt kroky útoku a sledovat výsledek.
To neznamená, že není možné simulovat složité útoky využívající hned několik technik.
Atomic Red dovoluje techniky za sebou řetězit a vytvářet složité sekvence útoků.
Výborným příkladem přímo od tvůrců je kód zvaný \textit{Dragons tail}\cite{redcanary_dragons_tail}.
Tento příklad se snaží napodobit chování skutečných útočníků.
Samozřejmě napodobení není dokonalé, ale dobře ukazuje možnosti Atomic Red pro složitější testování.\cite{csoonline_4_testing_frameworks}

\nlparagraph{Nevýhody}
Hlavní nedokonalostí tohoto přístupu je nutnost vytvářet nebo najít vlastní pomůcky.
Atomic Red je nástroj pro obránce a nechce dát útočníkům všechny potřebné prostředky pro provedení útoku.
To znamená že pomocné nástroje pro útok si musí obránce připravit sám.
Příkladem může být malware vložený v Microsoft Word dokumentu.
Atomic Red se snaží ukázat, jak malware operuje a jak ho útočníci využívají bez toho, aby ho útočníkům poskytl.
Dalším problémem je generace výstupních reportů.
Na rozdíl od dalších přístupů Atomic Red nevytváří automaticky stručný report o technikách zkoumaných v útoku.
Tato funkcionalita je bohužel až v pokročilejším placeném softwaru, který Red Canary nabízí.\cite{csoonline_4_testing_frameworks}


\subsubsection{Endgame RTA}
\ac{RTA} v tomto kontextu znamená \firstac{RTA}.
Z představených nástrojů je to stále jednodušší, třebaže mocný nástroj.
Jediný povinný požadavek je Python verze 2.7, kde pro instalaci stačí rozbalit repozitář, který je volně dostupný na GitHubu.
Pro plnou funkcionalitu je však doporučeno navíc do podadresáře \textit{bin} vložit \textbf{Sysinternals Suite} a \textbf{MsXsl}.
Stále je to však jednoduchá instalace a celý návod se nachází přímo v GitHub repozitáři.\cite{endgame_rta}

\nlparagraph{Schopnosti}
\ac{RTA} je složení téměř 50 různých skriptů simulujících útoky.
Bohužel jména těchto skriptů neodpovídají přesně Mitre ATT\&CK, i když jsou na ní založené.
Také zde neexistuje hyperlinkuvá navigace, jako například u Atomic Red.
Práce se skripty proto vyžaduje více úsilí a určitou známost matice ATT\&CK\@.
Naštěstí jsou přesná označení technik, jako \textbf{T1107}, snadno dohledatelná přímo ve skriptu.
Pro složitější testování je možné spouštět všechny skripty najednou nebo vybrat některé pomocí podmíněného příkazu \textit{IF} přímo v kódu.
Pro základní automatizaci stačí, pro hlubší testovaní je tento nástroj však omezen.\cite{csoonline_4_testing_frameworks}


\subsubsection{Mitre Caldera}
Caldera je od stejných vývojářů jako ATT\&CK, tedy Mitre.
Lze tak očekávat dobrou integraci a kompatibilitu mezi těmito nástroji.
Na rozdíl od dříve představených nástrojů je Mitre Caldera komparativně náročnější nástroj, což se projeví i v instalaci.
Ani tak není instalace náročná, a to hlavně díky přípravě tvůrců a dobré dokumentaci\cite{mitre_caldera_docs}.

Framework caldera lze rozdělit na 2 hlavní části: \textit{jádro systému} a \textit{pluginy}.
\textit{Jádro systému} je dostupné v GitHub repozitáři, zahrnuje asynchronní server pro řízení příkazů a kontrolu (command-and-control, C2) s REST API a webovým rozhraním.
\textit{Pluginy} jsou rozšíření možností jádra frameworku, které poskytují dodatečnou funkcionalitu.
Ve většině případů se nachází ve vlastních repozitářích, jsou však v hlavním repozitáři referencovány.
Jako příklady je dobré uvézt agenty, hlášení, nebo  techniky z Atomic Red teamu.\cite{mitre_caldera}

\nlparagraph{Systémové požadavky}
Autoři se snaží podporovat široké spektrum cílových systémů.
Proto existují 2 typy požadavků: povinné a doporučené.
Povinné požadavky určují minimální prostředí, kde může být Caldera připravena.
Jádro frameworku může být nainstalováno na operačních systémech Linux nebo MacOS\@.
Pro fungování je vyžadován Python verze 3.7, 3.8, nebo 3.9, samozřejmě s rozhraním pip3.
Pip3 je vyžadován pro instalaci podpůrných balíčků uvedených v souboru \textit{requirements} přímo v repozitáři Caldery.
Ke správnému ovládání je vyžadován moderní prohlížeč, doporučený je Google Chrome.
Doporučené požadavky se týkají vývoje a správného fungování Caldery.
Je doporučený hardware s 8GB+ RAM a 2+ CPU\@.
Dále je pro správnou kompilaci a funkčnost GoLang agentů doporučen GoLang 1.17+.
Za zmínku stojí také možnost instalovat a pracovat s Calderou v Docker kontejneru.\cite{mitre_caldera_docs}

\nlparagraph{Možnosti}
Caldera je oproti dříve představeným nástrojům složitý framework.
To je však více nežli dostatečně vyváženo dobrou dokumentací a hlavně možnostmi, které zkušenému uživateli Caldera nabízí.
Caldera dovoluje nastavení autonomních red-team nebo blue-team operací, a to plnohodnotně včetně závěrečného výpisu a exportování logů.
Existuje také možnost manuálních red-team operací, hlavně v případech nahrazování a testování pomocí vlastních nástrojů.\cite{mitre_caldera_docs}


\section{Praktická část}\label{sec:prakticka-cast}
Praktická část této práce je zaměřená na zjišťování možností testování.
Cílem je vytvořit jednoduché a srozumitelné testovací prostředí a návod, jak provádět základní testování taktik a technik MITRE ATT\&CK\@.
Za tímto účelem jsou představeny vybrané testovací nástroje založené na MITRE ATT\&CK\@ nebo s ním kompatibilní.
Je popsáno testovací prostředí, instalace vybraných nástrojů, možné problémy, které při přípravě mohou nastat, a také jak tyto problémy vyřešit.
Dále je ukázáno a vysvětleno, jak tyto nástroje používat k docílení testování, a také jak testovat vybrané taktiky a techniky.
Výsledná práce by tedy měla stačit k tomu, aby i neznalý uživatel byl schopen nastavit testovací prostředí a otestovat základní vlastnosti své infrastruktury nebo zařízení.


\subsection{Popis testovacího prostředí}\label{subsec:popis-testovaciho-prostredi}
Jako testovací prostředí bylo zvoleno Kali Linux, které bude spouštěno v Oracle VM VirtualBox.
Kali Linux je operační systém založený na Debianu, jenž je od základu navržen pro testování zabezpečení a penetrační testování.
Jedná se o možná nejznámější a nejrozšířenější distribuci Linuxu s tímto zaměřením, oblíbeným mezi profesionály i nadšenci.
Obsahuje množství specializovaných nástrojů pro testování zabezpečení, odhalování zranitelností nebo monitorování sítě.
Velkou výhodou je zaměření na open-source nástroje, často vytvářené profesionály pro své specifické potřeby.
Lze tak jednoduše využít jejich znalosti ke zjednodušení práce ostatních uživatelů.
V případě potřeby se však stále jedná o distribuci Linuxu a proto je v rámci kmenové distribuce jednoduché nainstalovat jakýkoli nástroj, který by mohl uživatel potřebovat.
Repozitáře Kali Linuxu však zjednodušují instalaci právě testovacích nástrojů.\cite{kali_mainpage}

\clfig{Kali_Purple_VirtualBox}{\linewidth}{Spuštěná Kali Purple ve virtuálním prostředí}{Vlastní}{fig:kali_purple}

Menší změna od původního plánu využít Kali nastala při 10. výročí této distribuce\cite{kali_purple}.
Vývojáři představili Kali Purple, kterou je možné vidět na obrázku~\ref{fig:kali_purple}.
Tato verze Kali Linuxu je oproti klasické ofenzivně zaměřené Kali více orientována na defenzivní testování.
Proto byl původní plán pozměněn a pro implementaci prostředí byla použita právě Kali Purple.
Dalšími faktory vědoucími k této změně byla i zvědavost a možnost testování nové distribuce.
S tímto rozhodnutím se však váže i menší problém - Kali nabízí na svých stránkách ke stáhnutí mnoho různých verzí \textit{image}, mezi nimiž je i specifická verze připravená pro VirtualBox.
Kali Purple je v době psaní tohoto textu dostupná pouze v podobě klasického instalačního \textit{image}.
Prvotní příprava je proto o instalační krok ztížena, to však není zásadní problém.

\nlparagraph{Caldera}
Po přípravě operačního systému ve virtuálním prostředí je čas nainstalovat nástroj Mitre Caldera.
Při samotné instalaci Caldery však nastal další problém, nejnovější verze Caldery v době psaní je 4.1.0, která vyšla 19. 9. 2022 a v době testování tato verze Caldery nejde na nové verzi Kali Purple zkompilovat.
Tento fakt je vidět na obrázku~\ref{fig:caldera_error}.
%todo upravit
\clfig{Caldera_error_msg}{\linewidth}{Chyba kompilace Caldera frameworku}{Vlastní}{fig:caldera_error}


\noindent %todo last, play with no indents?
Problém vyplývá ze starších balíčků, které Caldera vyžaduje pro svoji funkčnost.
Je zřejmé, že nejnovější verze pip3 a python3 je již plně nepodporují, což vede k chybám kompilace.
Nabízí se několik řešení, jak problém vyřešit.
Prvním a velmi líným řešením je oznámit problém a počkat na vydání nové verze.
Toto řešení zachovává stabilitu systému a frameworku, je to však na úkor času.
Autoři Caldery mají nejlepší znalosti a možnosti otestovat, zda změny v závislostech neovlivnily správnou funkčnost frameworku.
Z časových důvodů to však není pro tuto práci možné.
Dalším možným řešením je změna verze pythonu pro celý systém.
To je však velmi drastický zásah do celého systému a mohl by vézt ke ztrátě stability aplikací nebo dokonce celého systému.
Realističtější možností je vytvořit virtualizaci pythonu a využívat nižší verzi pythonu pouze pro specifické aplikace, v tomto případě pro Calderu.
Caldera je však složitá aplikace využívající nestandardní serverovou strukturu.
Není tak zajištěno, že se při zkompilování pod určitým pythonem aplikace nepokusí využívat systémovou vyšší verzi.
Posledním řešením je zkusit identifikovat problematické balíčky a najít, zda existují novější kompatibilní verze.
Problémem tohoto řešení je možná nefunkčnost aplikace v závislosti na tom, jak velký rozdíl je mezi verzemi balíčků.
Lze však očekávat, že novější balíčky mají zpětnou kompatibilitu, není ale neomezená.

\nlparagraph{Výsledné řešení}
Po porovnání přístupů se jako nejlepší řešení jeví využití novějších verzí balíčků.
Virtualizace pythonu je druhé nejlepší řešení.
Zde je však větší šance problémů, a tak slouží jako záloha v případě, že první řešení nebude fungovat.
Identifikace problémových balíčků je jednoduchá přímo ze zpětné vazby při kompilování, jak je možné vidět na obrázku~\ref{fig:caldera_error}.
Prvním problémovým balíčkem je \textbf{aiohttp}, který je ve verzi 3.8.1.
V repozitáři balíčků je možné najít nejnovější \textbf{aiohttp} ve verzi 3.8.4.
To je možné vidět na obrázku~\ref{fig:pypi_aiohttp}

\clfig{pypi_aiohttp}{\linewidth}{Nejnovější verze balíčku aiohttp v repozitáři Pypi}{Vlastní}{fig:pypi_aiohttp}

Po změně na tuto novou verzí byl identifikován další problémový balíček.
Je jím \textbf{reportlab} ve verzi 3.5.67, ten je ale opět možné nahradit novější verzí 3.6.12.
Následný pokus o zkompilování proběhl úspěšně.
Upravený soubor s požadovanými balíčky je vidět na obrázku~\ref{fig:new_setup}.
%todo remake, just the requirements
\clfig{new_setup}{\linewidth}{Nová podoba souboru requirements.txt}{Vlastní}{fig:new_setup}

Po spuštění serveru existuje propojení přes \textbf{localhost:8888}.
I přihlášení pomocí základního uživatele \textbf{red} s heslem \textbf{admin} proběhlo úspěšně a tak lze předpokládat, že Caldera je funkční a připravena pro testování, viz ~\ref{fig:Caldera_running}.
%todo remake
\clfig{Caldera_running}{\linewidth}{Caldera framework po úvodním přihlášení}{Vlastní}{fig:Caldera_running}

\nlparagraph{Recon-ng}
Zajímavým nástrojem, který byl připraven, ale nakonec nebyl využit, je \textit{Recon-ng}.
Jedná se o open-source \ac{OSINT} nástroj v příkazové řádce.
Díky volbě Kali Purple jako testovacího prostředí je jeho instalace opravdu snadná, stačí v příkazové řádce vykonat příkaz:

\begin{codeblock}
	\begin{verbatim}
$ sudo apt-get install recon-ng
	\end{verbatim}
	\captionsource{Ukázka příkazu pro instalaci nástroje Recon-ng}{[Vlastní]}
\end{codeblock}

Zajímavějším a důležitějším krokem je však instalace modulů.
Po zapnutí nástroje příkazem \textbf{recon-ng} je možné instalovat jednotlivé moduly přes marketplace.
Všechny moduly je možné zobrazit příkazem \textbf{marketplace search}.
Vybrané moduly jsou nainstalovány příkazem \textbf{marketplace install \textit{"jméno\_modulu"}}.
Při testování však byla zjištěna zastaralost a nefunkčnost důležitých modulů.
Také ovládání tohoto nástroje je zvláštní a po otestování bylo od použití tohoto nástroje v testovaných scénářích odstoupeno.
Recon-ng je totiž možné nahradit specializovanými nástroji a technikami, jako je například \textit{Nmap}.


\nlparagraph{Nmap}
Zde je důležitá právě volba Kali Purple jako testovacího prostředí.
Nástroj Nmap je připraven již s instalací této distribuce a proto nebylo pro jeho používání nutné provádět žádné další kroky.


\subsection{Popis testované infrastruktury}\label{subsec:popis-testovane-infrastruktury}
V rámci pokusu o simulování co možná nejreálnějšího testování bylo i testované prostředí vytvářeno na základě reálného.
Vzniklo na základě dotazníku a po rozhovoru s odborníkem, který reálné prostředí udržuje.
Je jasné, že simulované prostředí podléhá simplifikaci, byla však snaha zachovat všechny nejdůležitější prvky.
Prvotní návrh topologie byl jednoduchý a reflektoval získaná data, viz obrázek~\ref{fig:prvotni_navrh}.

\clfig{prvotni_navrh}{\linewidth}{Prvotní návrh testovaného prostředí}{Vlastní}{fig:prvotni_navrh}

Posléze byl vymodelován v programu Cisco Packet Tracer do použitelného návrhu prostředí.
Je jasně vidět zachování základní myšlenky, byly ale přesně definované prvky topologie a jejich vlastnosti jako IP adresy koncových stanic, rozsahy jednotlivých sítí a zařazení do \firstac{VLAN} skupin.
V rámci programu Packet Tracer byla také na prvcích provedena potřebná konfigurace a otestování funkčnosti.
Model prostředí je na obrázku~\ref{fig:ptmodel}.

\clfig{ptModel}{\linewidth}{Návrh prostředí v Cisco Packet Tracer}{Vlastní}{fig:ptmodel}


Posledním krokem je implementace infrastruktury na skutečných zařízeních.
Za tímto účelem byla využita síťová laboratoř J-5 Univerzity Hradec Králové.
Specificky bylo využito 6 počítačů v učebně, router Cisco 2911 a switch Catalyst 2960.
Jeden z počítačů funguje jako simulační server, kde jsou ve virtuálním prostředí nasazeny 2 samostatné serverové implementace - \textit{Windows Server 2012 R2} a \textit{Ubuntu Server 20.04.4 Focal Fossa}.
Nasazení infrastruktury s použitím fyzických zařízení opět vyžaduje otestování správného propojení všech komponentů.
Důležitým bodem je hlavně možnost komunikovat se servery ve virtuálních prostředích.
Proto bylo otestováno u každého zařízení postupně připojení sama na sebe, připojení na switch a router, připojení na ostatní prvky v daném \ac{VLAN} a nakonec komunikace s prvky v ostatních \ac{VLAN}.
Po úspěšném otestování všech zařízení je možné považovat infrastrukturu za připravenou pro testování v labech.

\subsection{Testované scénáře}\label{subsec:testovane-scenare}
Cílem této kapitoly je představit práci s nástroji a simulovat útok na vybranou organizaci.
Byly za tímto účelem vybrány hrozby a vytvořeny scénáře, které na sebe volně navazují a představují možné kroky útočníka.
Je však nutné podotknout, že každý útok je jedinečný, a proto není možné vytvořit jeden testovací, který reprezentuje všechny možnosti.
Je však možné ukázat nejčastější kroky, poukázat na jejich návaznost a připravit potencionální obránce tak, aby byli schopni s pomocí již zmíněných nástrojů vytvořit vlastní scénáře pro jejich specifické potřeby a testování.
Na obrázku~\ref{fig:mitre_colors} je možné vidět barevné znázornění reprezentace jednotlivých scénářů.

\clfig{Mitre}{\linewidth}{Barevné označení jednotlivých scénářů}{Vlastní}{fig:mitre_colors}


\subsubsection{Scénář 1 - \textit{Recon}}
První scénář je zaměřen na práci s informacemi.
Jen velmi malé množství útoků probíhá bez prvotní fáze získávání informací a drtivá většina z nich je neúspěšná právě kvůli tomu, že útočníci podcenili tento první krok.
Sběr informací lze provádět mnoha způsoby.
V dnešní moderní době není problém informace získat, je však problém určit, která informace je důležitá a která ne.
Nejjednodušší řešení je zakoupit informace na černém trhu, dokonce existují balíčky informací setříděné právě pro přípravu útoků.
To však není cílem tohoto scénáře.
Cílem je ukázat vybrané techniky a nástroje, pomocí kterých získávají útočníci \ac{OSINT}, neboli volně dostupné informace.
Sběr informací je prováděn na již zmíněném reálném cíli, podle něhož je i modelováno testovací prostředí.
Z důvodu zachování anonymity vybraného cíle nebudou v práci zveřejňována specifická data, ale pouze typ nalezeného údaje nebo záznam, který není identifikovatelný.
Příkladem je nalezení webového serveru.
Je možné říci, že byla nalezena IP adresa a specifický operační systém serveru.
Je také možné říci, o jaký operační systém se jedná.
Je však nežádoucí zmínit přesnou verzi systému nebo již zmíněnou IP adresu.


\nlparagraph{Internet}
Je překvapivé, kolik dat o cíli může útočník získat čistě pomocí vyhledávání na internetu.
Nejen, že cíl provozuje webové stránky, dokonce v porovnání s dalšími stránkami podobných organizací vyplynulo, že mají jiného jednotného správce a jsou pouze upravovány z jednotné šablony.
Lze tedy očekávat, že problémy nalezené na jedné implementaci šablony budou platit pro všechny.
Bylo proto využito veřejných databázových repozitářů \textbf{WHOIS} a \textbf{CenSys} pro zjištění více informací.
V technických databázích byly o doméně organizace zjištěny následující údaje:
\begin{itemize}
	\item zkrácená jména administrátorů domény,
	\item datum registrace domény,
	\item kontakt na administrátory systému – jméno, adresa, název organizace,
	\item název organizace, pod kterou je doména zaregistrována.
\end{itemize}

To jsou informace, které sice nevedou přímo k útoku, ale ukazují na osoby a organizace, na než je dobré se více zaměřit.
Není nutné tedy hledat slepě, ale je pro potencionálního útočníka jasné, jakým směrem se vydat.
Zde lze například při využití běžného vyhledávače DuckDuckGo a sociálních sítí LinkedIn a Facebook údaje o administrátorovi.
Například bylo možné nalézt osobní i pracovní emailovou adresu (vhodné pro phishing), místo bydliště a pracovní i osobní telefonní číslo (Vishing).
Třešničkou na pomyslném dortu však byla anonymizovaná smlouva podepsaná daným administrátorem.
To by samo o sobě nebyl problém, pokud by nestačilo začernalý text označit a překopírovat do editoru, kde je již vidět ten stejný obsah v plaintextové formě.

\nlparagraph{Censys}
Pro kontrolu a doplnění informací bylo využito platformy Censys.
Tato platforma je schopná po zadání doménového jména nebo IP adresy serveru najít informace o službách a portech, na kterých služba komunikuje.
Je jasné, že tato platforma nemůže nahradit plnohodnotný nástroj jako Nmap, je však dostupná online a není nutné instalovat další nástroje.
Pomocí platformy Censys byly nalezeny 2 důležité záznamy - \textit{webový server} a \textit{emailový server}.
Záznam o \textit{webovém serveru} poskytuje informace o IP adrese, provozovaném operačním systému (Ubuntu) a veřejných portech.
Na portech 80 a 443 je již zmíněná internetová stránka, zajímavější jsou však porty 500, kde je protokol \firstac{IKE}, a 10443, kde se nachází webová služba.
Při zadání adresy do prohlížeče je uživatel přesměrován na přihlášení do systému od společnosti Sophos.
Tato společnost se zabývá vytvářením bezpečnostního software a monitorováním bezpečnosti klientů.
Lze tedy očekávat, že na portu 10443 je vzdálený přístup právě pro tyto účely.
Záznam o \textit{emailovém serveru} také obsahuje zajímavé informace, jako například reverzní \ac{DNS} záznam, operační systém serveru (FortiOS) a také port 10443, jehož prozkoumání vede do přihlašovacího formuláře společnosti fortinet.
Jedná se tedy opět o možnost vzdáleného přístupu a u obou serverů je tedy možné získat přístup pomocí supply-chain útoků.

\nlparagraph{Nmap}
Nástroj pro aktivní skenování portů \textit{Nmap} je dlouhodobě využívaný nástroj mnoha útočníků i obránců, a tak je dobré vědět, co s ním jde o daném cíli zjistit.
Pro zahájení skenování je nutné zadat potřebné vlastnosti skenu a definovat cíl.
Cílem je samozřejmě již zmíněná organizace, Nmap přijímá informace o doméně, jedné nebo i skupině adres, což jsou informace nalezené v předchozím kroku.
Nutné je specifikovat možnosti skenování portů, je například možné získat informace o aktivních portech, protokolech, spuštěných službách a jejich verzích.
V rámci sbírání přehledných dat bylo také nastaveno, aby po ukončení práce Nmap vyexportoval výsledek do textového souboru.

\begin{codeblock}
	\begin{verbatim}
# nmap -v -A -p- -sV -version-all -O -oN vysledek.txt "cíl_útoku"
	\end{verbatim}
	\captionsource{Ukázka příkazu pro Nmap}{[Vlastní]}
\end{codeblock}

Výše ukázaný příkaz byl proveden a výsledek byl vypsán do souboru \textbf{vysledek.txt}, což je nastaveno přízviskem \textbf{-oN}.
Příznak \textbf{-v} označuje vyšší level podrobnosti, takzvané verbosity.
Pro detekci operačního systému a detekci verzí je využito příznaku \textbf{-A} a příznaku \textbf{-O}.
K detekci portů slouží \textbf{-sV -version-all}, v němž -version-all znamená testování všech možností.
Pro skenování portů slouží \textbf{-p-}, což je zkratka pro explicitní skenování všech portů.
Výsledek tohoto scanu potvrdil již nalezené informace, ale také tyto znalosti rozšířil o nové poznatky.
Obzvláště zajímavá je verze webového serveru, na které je spuštěn internetový portál.
Jedná se o totiž o starší verzi serveru Apache vydanou v roce 2017.
Tato informace dává útočníkovi možnost nalézt zranitelnosti pro tuto specifickou verzi a je to tedy značným bezpečnostním rizikem.
Posledním zajímavým poznatkem bylo nalezení portu 5060 s protokolem SIP a port 8443 se službou OpenVPN\@.

\subsubsection{Scénář 2 - \textit{Discovery} a \textit{Elevate-privileges}}
Scénář 2 navazuje na scénář 1.
Snahou je simulovat možné kroky útočníka poté, co provedl sběr informací o cíli.
Cílem útočníka je tedy využít získaná data ve svůj prospěch a provést kompromitaci systému.
Jak již bylo zmíněno v teoretické části textu, jedním z nejpoužívanějších vektorů pro prvotní kompromitaci systému je \textit{phishing}.
Útočník využije již získaných dat ze scénáře 1 pro vytvoření \textit{phishingové kampaně}, jejímž cílem je kompromitovat zařízení.
Pro účely scénáře 2 uvažujeme, že se útočníkovi tímto vektorem povedlo získat prvotní vstup, je totiž velmi obtížné simulovat phishing v laboratoři.
Jeho založení na psychologii a zranitelnostech lidského chování lze sice jednoduše napodobit, nemá však velký vypovídající význam.
Pro účely testování tedy uvažujeme, že běžný uživatel klikl na podvodný email, který útočníkovi poskytl vzdálený přístup k jeho zařízení.
Důležité je, že se jedná o běžného uživatele.
V pozdějších částech tohoto labu je ukázáno, jaký je rozdíl v možnostech útočníka v případě, že by se jednalo o privilegovaného uživatele.
Tento scénář bude simulován na již popsané testovací infrastruktuře.
V roli útočníka bude působit Caldera, jakožto nástroj pro testování.
Za zmínku stojí fakt, že většina infrastruktury obsahuje nejnovější operační systémy.
Výjimkou jsou servery, kde lze očekávat dlouhodobě podporovanou starší verzi operačního systému.
Pozor však na fakt, že na všechna zařízení byly, v rozumné míře, uplatněny bezpečnostní aktualizace.
To znamená, že tato infrastruktura je proti útokům stejně odolná, jako nejlepší možná varianta skutečné infrastruktury.
Pokud však správce skutečné infrastruktury podcenil aktualizace zařízení, lze očekávat, že bude na útoky náchylnější.
Výsledkem je tedy nelichotivá komparace testovací a skutečné infrastruktury.
Pokud se útok povede na testovací infrastruktuře, zcela jistě ho bude možné provézt i na skutečné.
I nevydařený útok na testovacím prostředí má však šanci na skutečné infrastruktuře uspět.
Tento fakt pouze svědčí o tom, že je nutné aktualizovat zařízení z důvodu optimální bezpečnosti.


\nlparagraph{Příprava scénáře}
Pro simulaci scénáře je nutné připravit agenta v testovacím nástroji Caldera.
Tento agent pak simuluje kompromitování zařízení a provádí testování, které mu nastavíme.
V Caldeře je možné sledovat a vytvářet agenty v záložce agents, viz obrázek~\ref{fig:caldera_agents}.
%todo crop image
\clfig{lab/Agent_mainpage}{\linewidth}{Stránka pro ovládání agentů}{Vlastní}{fig:caldera_agents}

Agenta lze vytvořit stiskem tlačítka \textit{deploy an agent}.
Po stisknutí je uživateli představen formulář pro bližší specifikaci agenta, viz obrázek~\ref{fig:agent_creation}.
V tomto formuláři je nutné nastavit platformu a kontaktní adresu Caldera serveru.
Vhodné je také změnit \textit{implant\_name}, což je název, pod nímž bude agent vidět na infikovaném stroji.
V rámci testování bylo použito jasně rozeznatelné jméno \textbf{caldera}.
Pro složitější testování, kde se snaží útočníci red teamu vyhnout detekci členy obrany v blue teamu by mohlo být zvoleno méně nápadné jméno, jako například \textbf{svchost}.
Na obrázku jsou pak také vidět příkazy, které je nutné spustit na simulovaném napadeném zařízení pro instalaci a nastavení agenta.
Existuje několik verzí příkazů, pro tuto práci jsou však aplikovatelné příkazy na obrázku~\ref{fig:agent_creation}, které jsou určené pro windows powershell.
Po provedení příkazů agent sám naváže komunikaci se serverem Caldera.
Agent navíc pravidelně ohlašuje svoje informace serveru, a to až do doby svého ukončení.
Caldera naopak o agentovi vede záznam a může mu posílat instrukce.

\clfig{lab/agent_creation}{\linewidth}{Formulář pro vytvoření agenta}{Vlastní}{fig:agent_creation}

Na obrázku~\ref{fig:caldera_agents} je možné vidět již vytvořeného agenta připraveného pro další testování.
Za povšimnutí stojí všechny údaje, které jsou s agentem spojené.
Základní údaje jsou \textit{id} a \textit{host}, které agenta jednoznačně identifikují.
\textit{Platform} identifikuje, na jaké platformě je agent spuštěn.
Nejdůležitější údaje jsou však \textit{group} a \textit{privilege}.
\textit{Group} označuje pracovní skupinu, do níž agent patří.
To je důležité pro spouštění operací, kde právě pomocí \textit{group} určujeme, kteří agenti mají operace vykonávat.
\textit{Privilege} určuje, jaká práva má agent na daném zařízení.
\textbf{User} znamená, že tento agent byl spuštěn běžným uživatelem a zdědil tak jeho základní práva.
Pokud by agenta spustil privilegovaný uživatel, v této kolonce by bylo označení \textbf{elevated}, jak je možné vidět na pozdějším obrázku~\ref{fig:dead_agent}.
Je také možné identifikovat, jak s Caldera serverem agent komunikuje pomocí atributu \textit{contact}.
Poslední důležité údaje vypovídají o stavu agenta [\textit{status}] a informací o čase posledního kontaktu agenta se serverem [\textit{last seen}].
Samozřejmě existuje i podrobnější výpis přímo po rozkliknutí agenta, viz obrázek~\ref{fig:dead_agent}.
Za povšimnutí zde stojí informace, které mohou být využitelné pro útočníka.
Jsou jimi \textit{host IP addresses, architecture} a primárně \textit{executors}.
Důležité je tlačítko \textit{kill agent}, kterým se zastaví funkčnost agenta.
Černý křížek na hlavní stránce agentů, viz obrázek~\ref{fig:caldera_agents}, nezpůsobí ukončení agenta, ale pouze ho odstraní ze seznamu agentů.
Stále fungující agent se proto v tomto seznamu znovu objeví při jeho další komunikaci se serverem.

\clfig{lab/dead_agent}{\linewidth}{Detaily specifického agenta}{Vlastní}{fig:dead_agent}

\nlparagraph{Výběr chování při útoku - \textit{Adversary}}
Dalším důležitým krokem je příprava chování útočníka.
To je v Caldeře simulované pomocí takzvaných \textit{adversaries}.
\textit{Adversary} je simulovaný útočník, kterému je možné vybrat techniky, které bude v operaci provádět.
To je možné vidět na obrázku~\ref{fig:adversary_show_techniques}.
Jak již bylo zmíněno, Caldera je založena na frameworku Mitre ATT\&CK, proto je možno u \textit{adversaries} vybírat techniky podle taktik z Mitre ATT\&CK\@.

%todo remake with create profile button and proper crop
\clfig{lab/adversary_show_techniques}{\linewidth}{Ukázka technik u simulovaného útočníka}{Vlastní}{fig:adversary_show_techniques}

\noindent %todo play with no indets at end
Nový \textit{adversary} je vytvořen pomocí tlačítka \textit{new profile}.
To otevře formulář pro vyplnění názvu a popisu tohoto profilu útočníka.
Poté je nutné přidat techniky, které bude tento útočník provádět.
To lze udělat dvěma způsoby.
Prvním je přidání  technik jiného profilu pomocí tlačítka \textit{add adversary}.
Samozřejmostí je výběr technik, které lze z jiného profilu přidat.
Pokud tedy existuje profil z velké části odpovídající potřebám testování, toto je nejrychlejší volba, jak bez úpravy původního profilu lze vytvořit nový.
V Caldeře existuje mnoho před-připravených profilů útočníka, příkladem může být worm, viz obrázek~\ref{fig:worm3}, který dokonce existuje v několika podobách s minimálními úpravami.
Je tak na zvážení, zda vytvářet nového útočníka zcela od začátku nebo využít jednu z před-připravených šablon a na ní dále stavět.

\clfig{lab/worm3}{\linewidth}{Příklad předpřipraveného adversary}{Vlastní}{fig:worm3}

Druhým způsobem přidávání technik je tlačítko \textit{add ability}, kde přidáváme jednotlivé požadované techniky.
Jak je vidět na obrázku~\ref{fig:ability_selection}, vyhledávání technik lze provádět dvěma způsoby.
Pokud je známo jméno techniky nebo alespoň přibližné zaměření, lze použít přímé vyhledávání technik.
Naopak pokud je vyžadováno využití určité taktiky, je možné vyhledávat selektivně podle nich.
Volba taktiky pak vede k volbě technik vedoucím na volbu sub-technik nebo specifických provedení dané techniky.
Tímto způsobem může dále upravovat chování útočníka na bázi jednotlivých technik.

%todo make picture for add ability search
%todo add picture\label{fig:ability_selection}
%\clfig{lab/ability_selection}{\linewidth}{Ukázka výběru technik}{Vlastní}{fig:ability_selection}

\nlparagraph{Adversary pro scénář 2}
Pro scénář 2 byli vyzkoušeni 2 hlavní profily útočníků, které byly pojmenovány \textit{Lab02} a \textit{Lab02v2}.
Pro přehlednost budou i operace pojmenované podle \textit{adversary}, který v nich figuruje.
Operace \textit{Lab02} je zaměřena na rozsáhlé testování.
Předpokládáme útočníka, který nezná vnitřní prostředí a jeho cílem je získat co nejvíce informací a vyzkoušet základní a pro útočníka přínosné taktiky.
\textit{Adversary} pro tuto operaci obsahuje 74 technik.
Útočník v operaci \textit{Lab02v2} využije znalosti z předchozí operace a pokusí se dosáhnout specifických cílů.
V tomto případě se jedná specificky o získání privilegií administrátora a vypnutí monitorování.
Tento útočník proto obsahuje 31 technik zaměřených právě k tomuto záměru.


\nlparagraph{Spuštění operace}
%todo check? dunno
%\clfig{lab/operation}{\linewidth}{Ukázka správy operací}{Vlastní}{fig:operation}
Finálním krokem testování je spuštění operace.
K tomuto účelu v Caldeře slouží záložka \textit{operations}, viz obrázek~\ref{fig:operation}.
Zde je možné spouštět nebo vytvářet nové operace, ale zároveň tato záložka slouží pro správu již uskutečněných operací.
Zachovávají se zde informace o průběhu operace a případných výstupech z daných technik.
Jelikož již bylo připraveno vše pro správnou činnost operace, je na čase kliknout na tlačítko \textit{create operation}, čímž je vyvolán formulář pro tvorbu nové operace, viz obrázek~\ref{fig:operation_creation}.
Je zde několik důležitých nastavení.
Jméno operace a nastavení požadovaného \textit{adversary} je přímočaré.
\textit{Fact source} je zajímavější, jedná se o před-připravené poznatky, například o testovaném zařízení, které lze přímo zadat nebo použít zjištěné z předchozích operací.
V rozšířené sekci se pak nachází složitější nastavení.
Jsou zde nastavení pro cílovou skupinu[\textit{group}], tedy určení, kteří agenti mají provádět úkony útoku zadané v \textit{adversary}.
\textit{Planner} určuje, jak budou operace prováděny.
Základním je \textbf{atomic}, který posílá jednotlivé příkazy jeden po druhém ve stejném pořadí, v jakém se nachází v \textit{adversary}.
Lze však vytvořit vlastní \textit{planner} s rozdílným chováním\cite{mitre_caldera_docs}.
V neposlední řadě se zde nachází přepínače pro řízení chodu operací a možnosti zakódovaní a skrytí operace.
%todo crop
\clfig{lab/operation_creation}{\linewidth}{Ukázka tvorby operace}{Vlastní}{fig:operation_creation}

Pro účely této práce jsou všechny operace nastaveny na automatické spuštění při vytvoření a také automatické uzavření a kolekci dat.
Automatické spuštění je zřejmé, již máme připraveny všechny stavební bloky pro vykonání operace, a tak není třeba nic dalšího připravovat a čekat.
Automatické uzavření a kolekce vyplývá z faktu, že se jedná o kompletní operace, nechceme v běhu operace přidávat další kroky ani přistupovat k napadenému zařízení na přímo a vykonávat vlastní příkazy.
V rámci automatizace je tedy výhodnější zvolit možnosti automatického uzavření a kolekce dat, protože není nutné hlídat, zda se již provedly všechny požadované kroky operace a je nutné zadat příkaz pro uzavření operace.
Z pohledu efektivity to také uvolňuje čas testovatele, který může během průběhu jedné operace vytvářet jinou nebo zkoumat data z jiné operace.
Pro referenci, operace může běžet i několik hodin, a pokud tedy není dozor nutný, je dobré se mu vyhnout.

\nlparagraph{Lab02}
První z připravených operací má název \textit{Lab02}.
Jak již bylo zmíněno, cílem je simulovat prvotní kroky útočníka v nově infikovaném systému.
Útočník má v tuto chvíli o systému pouze minimální informace.
Proto lze předpokládat, že se pokusí co nejvíce informací získat.
Důvod, proč byla vybrána pro první scénář tato situace, je vyzkoušení možností samotné Caldery.
Z tohoto důvodu operace pro \textit{lab02} provádí 74 technik zaměřených na zisk dat, která by běžného útočníka zajímala.
Cílem je vyhodnotit, jaká data je pro útočníka jednoduché získat a kde je naopak jeho snaha zastavena.
Výhodou pro testovatele je zde barevné značení technik Caldery, jak je vidět na obrázku~\ref{fig:lab02}.
Rozlišuje 3 barevné stavy techniky, červená barva pro neúspěch, zelená pro úspěch a žlutá pro právě provádějící operaci.
Je však nutné dávat pozor na fakt, že úspěšná operace nemusí vždy vracet očekávaná data.
Také definice úspěšnosti může být u některých technik pro nezkušeného operátora Caldery zvláštní.
Například se stalo, že Caldera vyhodnotila techniku o kontaktování \ac{DNS} jako úspěšnou, i když celá infrastruktura \ac{DNS} nevyužívá.
Tyto případy jsou však ojedinělé a není problém je nalézt, pokud nastanou.

\clfig{lab/lab02}{\linewidth}{Ukázka probíhající operace}{Vlastní}{fig:lab02}

Je jasné, že pro útočníka existují úrovně dat, jenž jsou řazené podle složitosti zjištění, složitosti pochopení nebo důležitosti.
Proto i v simulované operaci můžeme vidět, že útočník se nejdříve zaměřil na snadno zjistitelná data s nízkým rizikem odhalení.
Příkladem je jméno uživatele a jeho doména, viz obrázek~\ref{fig:username_and_domain}.
%todo crop
\clfig{lab/username_and_domain}{\linewidth}{Výstup taktiky pro zjištění uživatele a jemu příslušné domény}{Vlastní}{fig:username_and_domain}

Dalším krokem může být zjištění všech účtů na daném zařízení.
Tato informace může vypovídat o počtu uživatelů, kteří se k zařízení běžně přihlašují, ale i jestli v organizaci existuje striktní metodologie vytváření přihlašovacích jmen.
Třešničkou na pomyslném dortu jsou účty typu \textit{Admin} nebo \textit{Guest}, kde velmi často dochází k porušení praktik dobrých hesel.
Není neobvyklé, že tyto účty mají hesla stejná jako jméno, nebo v případě účtů Admin je stejné heslo pro všechna zařízení.
Kompromitace jediného Admin účtu by tak kompromitovala všechna zařízení s tímto účtem.
Výstup z techniky pro zjištění bude vypadat jako výstup na obrázku~\ref{find_all_accounts}.

\clfig{lab/find_all_accounts}{\linewidth}{Výstup taktiky pro zjištění všech uživatelských účtů}{Vlastní}{fig:find_all_accounts}

Také je možné zjistit přesné informace o operačním systému, viz obrázek~\ref{data_about_system_and_machine}.
Tato data o zařízení jsou pro útočníka zajímavá v kontextu hledání využitelných zranitelností.
Na obrázku je vidět \textit{OS Version}, tedy přesná verze operačního systému.
Podle tohoto údaje lze z otevřených databází jednoduše vyhledat nejen o kterou aktualizaci se jedná, ale také zda existují novější verze.
Největším nebezpečím jsou však databáze slabin, existující nejen na dark webu, ale i na klasickém internetu.
Stačí velmi jednoduše z databáze verzí získat oficiální označení verze, pro tento scénář se jedná o 21H2\cite{win_versions}.
S tímto kódem je pak možné z některé z mnoha přístupných databází nalézt příslušné kódy zranitelností, viz obrázek~\ref{fig:21h2_vulnerabilities}.
V tuto chvíli není nic jednoduššího než nalézt aplikovatelnou zranitelnost a využít ji.

~\clfig{lab/data_about_system_and_machine}{\linewidth}{Ukázka zjištění specifické verze operačního systému}{Vlastní}{fig:data_about_system_and_machine}
~\clfig{21h2_vulnerabilities}{\linewidth}{Ukázka zjištění specifické verze operačního systému}{\cite{21h2_vulnerabilities}}{fig:21h2_vulnerabilities}

Dalším důležitým poznáním z této operace je nejen zjištění přítomnosti firewallu a antiviru na testovaném zařízení, ale dokonce i jejich identifikace.
Výstupy zkoumající tyto fakty je možné vidět na obrázcích~\ref{fig:antivirus_discovery} a~\ref{fig:firewall_discovery}.
Stejně jako u operačních systémů, i u zabezpečení existují zranitelnosti a způsoby obcházení jejich činnosti.
Znalost ochranných prostředků proto útočníkovi nabízí podstatnou výhodu.

\clfig{lab/antivirus_discovery}{\linewidth}{Nalezené informace o antiviry na testovaném zařízení}{Vlastní}{fig:antivirus_discovery}
\clfig{lab/firewall_discovery}{\linewidth}{Nalezené informace o firewall na testovaném zařízení}{Vlastní}{fig:firewall_discovery}

V neposlední řadě se útočník může pokusit získat data z prohlížeče.
Informace, na které se v tomto kontextu útočník zaměřuje, jsou cookies, záložky, historie prohlížení nebo uložená hesla.
Oproti předchozím případům se zde primárně nejedná o data, která může útočník použít k dalším útokům na dané zařízení.
Stejně se ale jedná o cenná data, která může v mnoha případech útočník prodat nebo použít k jiným typům útoků.

\nlparagraph{Lab02v2}
Tato operace a adversary využívají již zjištěných dat k upřesnění specifických cílů.
Simulujeme zde situaci, kdy útočník získal základní data o napadeném zařízení.
Jeho cílem je teď nejen získat vyšší práva nad tímto zařízením ale také získat informace vhodné pro zajištění dlouhodobého přístupu k zařízení.
Prvním krokem je zlepšení šancí na dosažení těchto cílů, za tímto účelem se simulovaný útočník pokusí vypnout antivirová opatření, na než narazil v předchozí operaci, viz obrázek~\ref{fig:antivirus_discovery}.
To však není zcela úspěšné, jak již bylo psáno, nacházíme se na novější verzi operačního systému Windows, která je adekvátně aktualizovaná.
Nemůže tak být překvapením, že se tato taktika nezdařila.
Důležité je však poznamenat, že tento krok operace v systému Windows nevyvolal žádné hlášení.
Hlášení nastala až ve chvíli, kdy se simulovaný útočník pokoušel získat administrátorská práva.
V rámci testování se tato práva snažil získat všemi možnostmi, které Caldera nabízí.
Tento fakt a vyvolané poplašné hlášení je možné vidět na obrázcích~\ref{fig:privilege_escalation},\ref{fig:all_blocked_threats} a~\ref{fig:specific_threat}.

%todo remake, show some antivirus disablin and then this, its in the other operation
~\clfig{lab/privilege_escalation}{\linewidth}{Probíhající operace zaměřená na získání administrátorských privilegií}{Vlastní}{fig:privilege_escalation}
~\clfig{lab/all_blocked_threats}{\linewidth}{Záznamy o vyvolaných hrozbách}{Vlastní}{fig:all_blocked_threats}
~\clfig{lab/specific_threat}{\linewidth}{Specifika náhodně vybrané hrozby}{Vlastní}{fig:specific_threat}


Jak je vidět z obrázků, všechny pokusy o získání administrátorských práv byly zastaveny a oznámeny uživateli.
Je tedy zřejmé, že testování systému opravu provádí nebezpečné operace, o nichž je nutné uživatele informovat.
Již při vytváření operace bylo jasné, že šance úspěchu předchozích operací je malá.
Proto jejich neúspěch není překvapením, ale očekávaným a správným výsledkem.
Naopak by bylo nemilým překvapením, kdyby se nám takto jednoduchým způsobem povedlo administrátorská práva získat.
Poslední částí této operace jsou pokusy o získání dalších důležitých dat, která by útočníkovi mohla pomoci získat administrátorský přístup.
Příkladem je například politika hesel, která existuje na daném zařízení.
Jak je patrné na obrázku~\ref{fig:show_password_policy}, Caldera si plně nerozumí s českou lokalizací systému.
To pouze znamená, že není možné sběr dat plně zautomatizovat, nejdůležitější poznatky lze stále přečíst, i když se zvýšeným úsilím.

%todo crop
\clfig{lab/show_password_policy}{\linewidth}{Nalezená politika hesel}{Vlastní}{fig:show_password_policy}

Poslední technikou v této operaci, která stojí za zvláštní zmínku, je zobrazení všech procesů daného uživatele.
Jak je vidět na obrázku~\ref{fig:show_user_processes}, pro útočníka je možné zjistit všechny procesy daného uživatele.
To je důležité hned z několika důvodů.
Znalost procesů dovoluje útočníkovi napodobit jména často používaných procesů a tak je před uživatelem chovat.
Ještě důležitější je pro útočníka tato znalost z důvodu hledání slabin.
Znalost procesů omezuje množinu programů, které musí útočník zkontrolovat pro využitelné zranitelnosti.
Navíc nemusí řešit dodatečnou instalaci nástrojů nebo hledat zranitelnosti přímo v operačním systému, pokud může využít slabin již nainstalovaných programů se stejným výsledkem.
Tato možnost není uplatnitelná vždy, ale je dobré mít ji na paměti.
Posledním důvodem, proč procesy uživatele útočníka zajímají, jsou data, která z těchto procesů může útočník vytěžit.
Pokud narazí na proces, který ho zajímá, může na něj zaměřit další fáze útoku.
Například už jen zjištění, jaký prohlížeč uživatel preferuje, zjednodušuje následující útoky na data.
Nebo fakt, že uživatel využívá nějaké cloudové uložiště, jak je například vidět na obrázku~\ref{fig:show_user_processes}.
%todo crop
\clfig{lab/show_user_processes}{\linewidth}{Ukázka všech procesů uživatele}{Vlastní}{fig:show_user_processes}


\nlparagraph{Změny s privilegovaným uživatelem}
%todo add more or pictures?
V rámci kompletnosti testování byly stejné operace, tedy \textit{Lab02} a \textit{Lab02v2}, pouštěny na jiném zařízení v infrastruktuře, tentokrát s privilegovaným přístupem.
Získaná data byla až na pár operací stejná.
To potvrzuje domněnku robustního systému, kde celková stabilita a dostatečné zabezpečení v podobě antiviru odbouralo alespoň část hrozby.
Zajímavá jsou však data z operace \textit{Lab02v2}.
Operace \textit{Lab02} byla primárně pro zjištění dat, proto tam nevznikly významné odchylky.
\textit{Lab02v2} byl na získání vyšších uživatelských práv, což popravdě nedává s administrátorským účtem smysl.
Zajímavé je, že se podařilo částečně vyřadit fungování antivirového programu.
Další překvapivé zjištění také nastalo, když se místo selhání všech hrozeb pro zisk privilegií jedna technika vydařila.
Tento poznatek nemá velký smysl, ale je to zajímavé a úsměvné zjištění.
%todo add picture with succesfull technique


\subsubsection{Scénář 3 - \textit{Discovery, Impact} a \textit{Lateral movement}}
Zaměřením tohoto scénáře je otestování možností šíření útočníkova dosahu v infrastruktuře a dopad jeho činnosti.
Scénář 2 byl primárně zaměřen na jedno zařízení a zisk informací, scénář 3 je zaměřen na infrastrukturu a dopad na uživatele a společnost.
Předpokladem je, že útočník již zjistil minimální potřebná data ze scénáře 2, již ho nezajímá být tak skrytý, ale naopak chce napadenému cíli uškodit.
V rámci možností Caldery proto budou simulovány možné techniky, které jsou v souladu s cíli útočníka.

\nlparagraph{Lab03}
Operace na šíření po infrastruktuře má název \textit{Lab03}, jako \textit{adversary} je využit základní útočník \textbf{Worm}.
Tento útočník v Caldeře existuje hned v několika verzích s malými rozdíly, zajímavou myšlenkou proto bylo použít několik verzí a porovnat jejich výsledky.
Specificky byla tato operace testována s útočníky \textbf{Worm, Worm2} a \textbf{Worm 3}.
Pro ukázku je možné techniky útočníka \textbf{Worm 3} vidět na obrázku~\ref{fig:worm3}.
Při testování vybraných útočníků typu worm však nebyly rozeznatelné rozdíly v jejich účinnosti.
Proto bude v dalším textu popisována pouze generická operace s útočníkem worm zahrnující všechny specifické iterace.
Jak je z obrázku~\ref{fig:worm3} jasné, cílem útočníka worm je rozšířit se v infrastruktuře.
Prvním krokem tohoto útočníka je proto zjištění dalších připojených zařízení.
Výsledek tohoto kroku je vidět na obrázku~\ref{fig:show_IP_in_VLAN}.

\clfig{lab/show_IP_in_VLAN}{\linewidth}{Ukázka nalezených IP adres}{Vlastní}{fig:show_IP_in_VLAN}

Je zřejmé, že útočník tímto krokem nenalezl všechna zařízení v síti, ale pouze zařízení v jeho \ac{VLAN}.
Tento fakt potvrzuje nutnost dobré segmentace infrastruktury za cílem její obrany.
Dalším krokem útočníka je provézt \textit{reverse IP nslookup} pro všechny nalezené IP adresy.
Tento krok však selže, protože v síti není využívané \ac{DNS}, implementace totiž z důvodu velikosti a bezpečnosti nedávala smysl.
Překvapivé je, že neexistence \ac{DNS} nejen že zastavila další šíření útočníka worm, ale navíc byly techniky provádějící tuto operaci chybně označeny za úspěšné.
Tento fakt je možný vidět na obrázku~\ref{fig:nslookup_fail}.
%todo create this one
%\clfig{lab/nslookup_fail}{\linewidth}{Ukázka špatně označených technik}{Vlastní}{fig:nslookup_fail}

Z výsledků je jasné, že testovaný infrastruktura je vůči tomuto útoku velmi odolná.
Nejen že správně nastavená infrastruktura omezila zisk informací útočníka, ale také kompletně zamezila jeho dalšímu šíření.

\nlparagraph{Lab03v2}
Druhá část scénáře 3 je zaměřena na testování taktiky \textit{Impact}, jenž je zaměřena na manipulaci, přerušení nebo destrukci systémů a dat.
V Caldeře byl proto vytvořen \textit{adversary}, který obsahuje techniky s tímto zaměřením.
Průběh operace s tímto útočníkem je vidět na obrázku~\ref{fig:operation_ransom}.
V první části je simulován ransomwarový útok, protože to je nejčastější a nejzávažnější typ hrozby.
Dává proto smysl zjistit, zda je možné pomocí Caldery testovat bezpečnost zařízení vůči tomuto útoku.
Jak je vidět z obrázku~\ref{fig:operation_ransom}, úspěšně se povedlo na ploše uživateli vytvořit textový soubor \textit{ransomware note}.
Naštěstí pokus o zakódování dat byl obranou systému úspěšně zastaven.
Také přepisování souborů bylo zastaveno.
Naopak práce se \textit{staging directory} byla úspěšná, povedlo se nejen vytvořit, ale při ukončování operace po sobě i smazat, tento adresář.
Je tedy nutné podotknout, že pokud je i volně dostupný testovací framework chopen provést tyto operace, je na zvážení, co vše je schopen udělat specifický software zaměřený přímo pro tyto úkony.
Takových softwarů je hned řada, velká část je samozřejmě nelegální, existují však i legálně dostupné softwary.
Možná nejznámějším příkladem je \textit{Metasploit}\cite{metasploit}.

\clfig{lab/operation_ransom}{\linewidth}{Ukázka operace pro Lab03v2}{Vlastní}{fig:operation_ransom}

\section{Závěry a doporučení}\label{sec:zavery-a-doporuceni}

% TODO WRITER: text

Kritická diskuze nad výsledky, ke kterým autor dospěl (soulad výsledků  literaturou či předpoklady;
výsledky a okolnosti, které zvláště ovlivnily předkládanou práci atd.).
Je vhodné naznačit i případné další(popř. alternativní) možnosti zkoumání dané problematiky a otevřené problémy pro další studium.


%todo reshape
Kybernetická bezpečnost je důveřitá oblast ochnary každé společnosti.
Je nutné vytvářet, dodržovat a obnovovat mnoho předpisů, které zajištují holistickou obranu.
Stejně tak je ale nutné uznat, že praktické příklady mhnohdy daným předpisům protiřečí.
Je tedy nutné propojit idealistický pohled na obranu v rámci předpisů a nařízení s pohledem praktickým.
Právě za tímto účelem je nutné nastavené předpisy testovat skutečnými útoky, aby bylo možné určit, zda opravdu splnují důvod svého vzniku.

Cílem práce bylo poukázat na současný stav kybernetického světa a představit jednoudché možnosti, jak otestovat obrenyschopnost organizací právě proti hrozbám moderní doby.%todo steal for uvod a anotation
Bezpečnostní experti musí sledovat novodobé trendy, jelikož organizace plně zpoléhá na jejich znalost nových hrozeb.

%todo fin
Výsledky testování jsou ve většině příkladů očekávány.
Vždy existují povrchní data, která může útočník získat.
Nebylo tedy překvapením, že data o uživatele, síti nebo o politice hesel se podařilo získat.
Stejně tak však nebylo překvapením, že části útoku zasahující do systému více byly zastaveny.
Co naopak překvapilo je, které informace jsou považovány za povrchní a tedy jednoduše přístupné.
Například zisk přesné verze operačního systému vede po jednoduchém vyhledávání na internetu k jeho známým zranitelnostem a dokonce i připravenému malware, které danou zranitelnost zneužívá.
Velkým zklamáním bylo také množství a typ informací, které se povedlo získat o vybrané organizaci.
Na závěr je vhodné zmínit další možnosti výzkumu související s touto prací.
Prvním doplnění této práce závisí na úzké spolupráci s organizací.
V rámci možností by bylo zajímavé vytvořit scénáře přímo podle již uskutečněných útoků na organizaci nebo podobné organizace a zjistit, zda je organizace připravena takovému útoku čelit.
Problémem je však důvěra mezi potencionálním autorem a tetovanou organizací.
Dalším zajímavým rozšířením by bylo větší zaměření na pouze jednu oblast útoku.
Z důvodu pokrytí mnoha taktik, technik a několika nástrojů a metodologií není možnost se žádnému z nich věnovat do hloubky a připravit jeho zhodnocení a možné návrhy na vylepšení.
Autor si například dokáže představit práci založenou pouze na zkoumání taktiky \textit{reconnaissance}, kde by byly zkoumány využívané nástroje, shromaždována nalezená data a představeny nejčastější místa, kde je u organizací nutné zlepšit práci s daty.
Cíleně by bylo možné ukázat, kde je nutné omezit sdílení informací nabo naopak ukázat, jaké data nelze schovat a tak s nimi nakládat právě jako s daty které jsou veřejně známé a tedy nebezpečné.












